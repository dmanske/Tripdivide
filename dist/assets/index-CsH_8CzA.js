(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))o(u);new MutationObserver(u=>{for(const h of u)if(h.type==="childList")for(const f of h.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function i(u){const h={};return u.integrity&&(h.integrity=u.integrity),u.referrerPolicy&&(h.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?h.credentials="include":u.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function o(u){if(u.ep)return;u.ep=!0;const h=i(u);fetch(u.href,h)}})();function Fm(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Dc={exports:{}},_r={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ym;function G0(){if(ym)return _r;ym=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function i(o,u,h){var f=null;if(h!==void 0&&(f=""+h),u.key!==void 0&&(f=""+u.key),"key"in u){h={};for(var m in u)m!=="key"&&(h[m]=u[m])}else h=u;return u=h.ref,{$$typeof:n,type:o,key:f,ref:u!==void 0?u:null,props:h}}return _r.Fragment=a,_r.jsx=i,_r.jsxs=i,_r}var xm;function P0(){return xm||(xm=1,Dc.exports=G0()),Dc.exports}var r=P0(),Rc={exports:{}},ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function Y0(){if(vm)return ye;vm=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),u=Symbol.for("react.profiler"),h=Symbol.for("react.consumer"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),x=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.for("react.activity"),j=Symbol.iterator;function _(T){return T===null||typeof T!="object"?null:(T=j&&T[j]||T["@@iterator"],typeof T=="function"?T:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,O={};function D(T,Q,B){this.props=T,this.context=Q,this.refs=O,this.updater=B||y}D.prototype.isReactComponent={},D.prototype.setState=function(T,Q){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,Q,"setState")},D.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function z(){}z.prototype=D.prototype;function U(T,Q,B){this.props=T,this.context=Q,this.refs=O,this.updater=B||y}var E=U.prototype=new z;E.constructor=U,N(E,D.prototype),E.isPureReactComponent=!0;var G=Array.isArray;function W(){}var K={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function ae(T,Q,B){var te=B.ref;return{$$typeof:n,type:T,key:Q,ref:te!==void 0?te:null,props:B}}function de(T,Q){return ae(T.type,Q,T.props)}function ke(T){return typeof T=="object"&&T!==null&&T.$$typeof===n}function ge(T){var Q={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(B){return Q[B]})}var qe=/\/+/g;function be(T,Q){return typeof T=="object"&&T!==null&&T.key!=null?ge(""+T.key):Q.toString(36)}function q(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(W,W):(T.status="pending",T.then(function(Q){T.status==="pending"&&(T.status="fulfilled",T.value=Q)},function(Q){T.status==="pending"&&(T.status="rejected",T.reason=Q)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function S(T,Q,B,te,ie){var ue=typeof T;(ue==="undefined"||ue==="boolean")&&(T=null);var je=!1;if(T===null)je=!0;else switch(ue){case"bigint":case"string":case"number":je=!0;break;case"object":switch(T.$$typeof){case n:case a:je=!0;break;case v:return je=T._init,S(je(T._payload),Q,B,te,ie)}}if(je)return ie=ie(T),je=te===""?"."+be(T,0):te,G(ie)?(B="",je!=null&&(B=je.replace(qe,"$&/")+"/"),S(ie,Q,B,"",function(Da){return Da})):ie!=null&&(ke(ie)&&(ie=de(ie,B+(ie.key==null||T&&T.key===ie.key?"":(""+ie.key).replace(qe,"$&/")+"/")+je)),Q.push(ie)),1;je=0;var lt=te===""?".":te+":";if(G(T))for(var Ge=0;Ge<T.length;Ge++)te=T[Ge],ue=lt+be(te,Ge),je+=S(te,Q,B,ue,ie);else if(Ge=_(T),typeof Ge=="function")for(T=Ge.call(T),Ge=0;!(te=T.next()).done;)te=te.value,ue=lt+be(te,Ge++),je+=S(te,Q,B,ue,ie);else if(ue==="object"){if(typeof T.then=="function")return S(q(T),Q,B,te,ie);throw Q=String(T),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return je}function F(T,Q,B){if(T==null)return T;var te=[],ie=0;return S(T,te,"","",function(ue){return Q.call(B,ue,ie++)}),te}function se(T){if(T._status===-1){var Q=T._result;Q=Q(),Q.then(function(B){(T._status===0||T._status===-1)&&(T._status=1,T._result=B)},function(B){(T._status===0||T._status===-1)&&(T._status=2,T._result=B)}),T._status===-1&&(T._status=0,T._result=Q)}if(T._status===1)return T._result.default;throw T._result}var pe=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)},A={map:F,forEach:function(T,Q,B){F(T,function(){Q.apply(this,arguments)},B)},count:function(T){var Q=0;return F(T,function(){Q++}),Q},toArray:function(T){return F(T,function(Q){return Q})||[]},only:function(T){if(!ke(T))throw Error("React.Children.only expected to receive a single React element child.");return T}};return ye.Activity=w,ye.Children=A,ye.Component=D,ye.Fragment=i,ye.Profiler=u,ye.PureComponent=U,ye.StrictMode=o,ye.Suspense=g,ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,ye.__COMPILER_RUNTIME={__proto__:null,c:function(T){return K.H.useMemoCache(T)}},ye.cache=function(T){return function(){return T.apply(null,arguments)}},ye.cacheSignal=function(){return null},ye.cloneElement=function(T,Q,B){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var te=N({},T.props),ie=T.key;if(Q!=null)for(ue in Q.key!==void 0&&(ie=""+Q.key),Q)!R.call(Q,ue)||ue==="key"||ue==="__self"||ue==="__source"||ue==="ref"&&Q.ref===void 0||(te[ue]=Q[ue]);var ue=arguments.length-2;if(ue===1)te.children=B;else if(1<ue){for(var je=Array(ue),lt=0;lt<ue;lt++)je[lt]=arguments[lt+2];te.children=je}return ae(T.type,ie,te)},ye.createContext=function(T){return T={$$typeof:f,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:h,_context:T},T},ye.createElement=function(T,Q,B){var te,ie={},ue=null;if(Q!=null)for(te in Q.key!==void 0&&(ue=""+Q.key),Q)R.call(Q,te)&&te!=="key"&&te!=="__self"&&te!=="__source"&&(ie[te]=Q[te]);var je=arguments.length-2;if(je===1)ie.children=B;else if(1<je){for(var lt=Array(je),Ge=0;Ge<je;Ge++)lt[Ge]=arguments[Ge+2];ie.children=lt}if(T&&T.defaultProps)for(te in je=T.defaultProps,je)ie[te]===void 0&&(ie[te]=je[te]);return ae(T,ue,ie)},ye.createRef=function(){return{current:null}},ye.forwardRef=function(T){return{$$typeof:m,render:T}},ye.isValidElement=ke,ye.lazy=function(T){return{$$typeof:v,_payload:{_status:-1,_result:T},_init:se}},ye.memo=function(T,Q){return{$$typeof:x,type:T,compare:Q===void 0?null:Q}},ye.startTransition=function(T){var Q=K.T,B={};K.T=B;try{var te=T(),ie=K.S;ie!==null&&ie(B,te),typeof te=="object"&&te!==null&&typeof te.then=="function"&&te.then(W,pe)}catch(ue){pe(ue)}finally{Q!==null&&B.types!==null&&(Q.types=B.types),K.T=Q}},ye.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},ye.use=function(T){return K.H.use(T)},ye.useActionState=function(T,Q,B){return K.H.useActionState(T,Q,B)},ye.useCallback=function(T,Q){return K.H.useCallback(T,Q)},ye.useContext=function(T){return K.H.useContext(T)},ye.useDebugValue=function(){},ye.useDeferredValue=function(T,Q){return K.H.useDeferredValue(T,Q)},ye.useEffect=function(T,Q){return K.H.useEffect(T,Q)},ye.useEffectEvent=function(T){return K.H.useEffectEvent(T)},ye.useId=function(){return K.H.useId()},ye.useImperativeHandle=function(T,Q,B){return K.H.useImperativeHandle(T,Q,B)},ye.useInsertionEffect=function(T,Q){return K.H.useInsertionEffect(T,Q)},ye.useLayoutEffect=function(T,Q){return K.H.useLayoutEffect(T,Q)},ye.useMemo=function(T,Q){return K.H.useMemo(T,Q)},ye.useOptimistic=function(T,Q){return K.H.useOptimistic(T,Q)},ye.useReducer=function(T,Q,B){return K.H.useReducer(T,Q,B)},ye.useRef=function(T){return K.H.useRef(T)},ye.useState=function(T){return K.H.useState(T)},ye.useSyncExternalStore=function(T,Q,B){return K.H.useSyncExternalStore(T,Q,B)},ye.useTransition=function(){return K.H.useTransition()},ye.version="19.2.3",ye}var bm;function ou(){return bm||(bm=1,Rc.exports=Y0()),Rc.exports}var H=ou();const jn=Fm(H);var Uc={exports:{}},jr={},zc={exports:{}},Mc={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _m;function K0(){return _m||(_m=1,(function(n){function a(S,F){var se=S.length;S.push(F);e:for(;0<se;){var pe=se-1>>>1,A=S[pe];if(0<u(A,F))S[pe]=F,S[se]=A,se=pe;else break e}}function i(S){return S.length===0?null:S[0]}function o(S){if(S.length===0)return null;var F=S[0],se=S.pop();if(se!==F){S[0]=se;e:for(var pe=0,A=S.length,T=A>>>1;pe<T;){var Q=2*(pe+1)-1,B=S[Q],te=Q+1,ie=S[te];if(0>u(B,se))te<A&&0>u(ie,B)?(S[pe]=ie,S[te]=se,pe=te):(S[pe]=B,S[Q]=se,pe=Q);else if(te<A&&0>u(ie,se))S[pe]=ie,S[te]=se,pe=te;else break e}}return F}function u(S,F){var se=S.sortIndex-F.sortIndex;return se!==0?se:S.id-F.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var h=performance;n.unstable_now=function(){return h.now()}}else{var f=Date,m=f.now();n.unstable_now=function(){return f.now()-m}}var g=[],x=[],v=1,w=null,j=3,_=!1,y=!1,N=!1,O=!1,D=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function E(S){for(var F=i(x);F!==null;){if(F.callback===null)o(x);else if(F.startTime<=S)o(x),F.sortIndex=F.expirationTime,a(g,F);else break;F=i(x)}}function G(S){if(N=!1,E(S),!y)if(i(g)!==null)y=!0,W||(W=!0,ge());else{var F=i(x);F!==null&&q(G,F.startTime-S)}}var W=!1,K=-1,R=5,ae=-1;function de(){return O?!0:!(n.unstable_now()-ae<R)}function ke(){if(O=!1,W){var S=n.unstable_now();ae=S;var F=!0;try{e:{y=!1,N&&(N=!1,z(K),K=-1),_=!0;var se=j;try{t:{for(E(S),w=i(g);w!==null&&!(w.expirationTime>S&&de());){var pe=w.callback;if(typeof pe=="function"){w.callback=null,j=w.priorityLevel;var A=pe(w.expirationTime<=S);if(S=n.unstable_now(),typeof A=="function"){w.callback=A,E(S),F=!0;break t}w===i(g)&&o(g),E(S)}else o(g);w=i(g)}if(w!==null)F=!0;else{var T=i(x);T!==null&&q(G,T.startTime-S),F=!1}}break e}finally{w=null,j=se,_=!1}F=void 0}}finally{F?ge():W=!1}}}var ge;if(typeof U=="function")ge=function(){U(ke)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,be=qe.port2;qe.port1.onmessage=ke,ge=function(){be.postMessage(null)}}else ge=function(){D(ke,0)};function q(S,F){K=D(function(){S(n.unstable_now())},F)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(S){S.callback=null},n.unstable_forceFrameRate=function(S){0>S||125<S?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<S?Math.floor(1e3/S):5},n.unstable_getCurrentPriorityLevel=function(){return j},n.unstable_next=function(S){switch(j){case 1:case 2:case 3:var F=3;break;default:F=j}var se=j;j=F;try{return S()}finally{j=se}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(S,F){switch(S){case 1:case 2:case 3:case 4:case 5:break;default:S=3}var se=j;j=S;try{return F()}finally{j=se}},n.unstable_scheduleCallback=function(S,F,se){var pe=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?pe+se:pe):se=pe,S){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=se+A,S={id:v++,callback:F,priorityLevel:S,startTime:se,expirationTime:A,sortIndex:-1},se>pe?(S.sortIndex=se,a(x,S),i(g)===null&&S===i(x)&&(N?(z(K),K=-1):N=!0,q(G,se-pe))):(S.sortIndex=A,a(g,S),y||_||(y=!0,W||(W=!0,ge()))),S},n.unstable_shouldYield=de,n.unstable_wrapCallback=function(S){var F=j;return function(){var se=j;j=F;try{return S.apply(this,arguments)}finally{j=se}}}})(Mc)),Mc}var jm;function Q0(){return jm||(jm=1,zc.exports=K0()),zc.exports}var Bc={exports:{}},xt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function X0(){if(wm)return xt;wm=1;var n=ou();function a(g){var x="https://react.dev/errors/"+g;if(1<arguments.length){x+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)x+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+g+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var o={d:{f:i,r:function(){throw Error(a(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},u=Symbol.for("react.portal");function h(g,x,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:w==null?null:""+w,children:g,containerInfo:x,implementation:v}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,x){if(g==="font")return"";if(typeof x=="string")return x==="use-credentials"?x:""}return xt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,xt.createPortal=function(g,x){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!x||x.nodeType!==1&&x.nodeType!==9&&x.nodeType!==11)throw Error(a(299));return h(g,x,null,v)},xt.flushSync=function(g){var x=f.T,v=o.p;try{if(f.T=null,o.p=2,g)return g()}finally{f.T=x,o.p=v,o.d.f()}},xt.preconnect=function(g,x){typeof g=="string"&&(x?(x=x.crossOrigin,x=typeof x=="string"?x==="use-credentials"?x:"":void 0):x=null,o.d.C(g,x))},xt.prefetchDNS=function(g){typeof g=="string"&&o.d.D(g)},xt.preinit=function(g,x){if(typeof g=="string"&&x&&typeof x.as=="string"){var v=x.as,w=m(v,x.crossOrigin),j=typeof x.integrity=="string"?x.integrity:void 0,_=typeof x.fetchPriority=="string"?x.fetchPriority:void 0;v==="style"?o.d.S(g,typeof x.precedence=="string"?x.precedence:void 0,{crossOrigin:w,integrity:j,fetchPriority:_}):v==="script"&&o.d.X(g,{crossOrigin:w,integrity:j,fetchPriority:_,nonce:typeof x.nonce=="string"?x.nonce:void 0})}},xt.preinitModule=function(g,x){if(typeof g=="string")if(typeof x=="object"&&x!==null){if(x.as==null||x.as==="script"){var v=m(x.as,x.crossOrigin);o.d.M(g,{crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0})}}else x==null&&o.d.M(g)},xt.preload=function(g,x){if(typeof g=="string"&&typeof x=="object"&&x!==null&&typeof x.as=="string"){var v=x.as,w=m(v,x.crossOrigin);o.d.L(g,v,{crossOrigin:w,integrity:typeof x.integrity=="string"?x.integrity:void 0,nonce:typeof x.nonce=="string"?x.nonce:void 0,type:typeof x.type=="string"?x.type:void 0,fetchPriority:typeof x.fetchPriority=="string"?x.fetchPriority:void 0,referrerPolicy:typeof x.referrerPolicy=="string"?x.referrerPolicy:void 0,imageSrcSet:typeof x.imageSrcSet=="string"?x.imageSrcSet:void 0,imageSizes:typeof x.imageSizes=="string"?x.imageSizes:void 0,media:typeof x.media=="string"?x.media:void 0})}},xt.preloadModule=function(g,x){if(typeof g=="string")if(x){var v=m(x.as,x.crossOrigin);o.d.m(g,{as:typeof x.as=="string"&&x.as!=="script"?x.as:void 0,crossOrigin:v,integrity:typeof x.integrity=="string"?x.integrity:void 0})}else o.d.m(g)},xt.requestFormReset=function(g){o.d.r(g)},xt.unstable_batchedUpdates=function(g,x){return g(x)},xt.useFormState=function(g,x,v){return f.H.useFormState(g,x,v)},xt.useFormStatus=function(){return f.H.useHostTransitionStatus()},xt.version="19.2.3",xt}var Nm;function J0(){if(Nm)return Bc.exports;Nm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Bc.exports=X0(),Bc.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function Z0(){if(Sm)return jr;Sm=1;var n=Q0(),a=ou(),i=J0();function o(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function h(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function f(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function g(e){if(h(e)!==e)throw Error(o(188))}function x(e){var t=e.alternate;if(!t){if(t=h(e),t===null)throw Error(o(188));return t!==e?null:e}for(var s=e,l=t;;){var c=s.return;if(c===null)break;var d=c.alternate;if(d===null){if(l=c.return,l!==null){s=l;continue}break}if(c.child===d.child){for(d=c.child;d;){if(d===s)return g(c),e;if(d===l)return g(c),t;d=d.sibling}throw Error(o(188))}if(s.return!==l.return)s=c,l=d;else{for(var p=!1,b=c.child;b;){if(b===s){p=!0,s=c,l=d;break}if(b===l){p=!0,l=c,s=d;break}b=b.sibling}if(!p){for(b=d.child;b;){if(b===s){p=!0,s=d,l=c;break}if(b===l){p=!0,l=d,s=c;break}b=b.sibling}if(!p)throw Error(o(189))}}if(s.alternate!==l)throw Error(o(190))}if(s.tag!==3)throw Error(o(188));return s.stateNode.current===s?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var w=Object.assign,j=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),D=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),U=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),ae=Symbol.for("react.activity"),de=Symbol.for("react.memo_cache_sentinel"),ke=Symbol.iterator;function ge(e){return e===null||typeof e!="object"?null:(e=ke&&e[ke]||e["@@iterator"],typeof e=="function"?e:null)}var qe=Symbol.for("react.client.reference");function be(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===qe?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case N:return"Fragment";case D:return"Profiler";case O:return"StrictMode";case G:return"Suspense";case W:return"SuspenseList";case ae:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case y:return"Portal";case U:return e.displayName||"Context";case z:return(e._context.displayName||"Context")+".Consumer";case E:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case K:return t=e.displayName||null,t!==null?t:be(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return be(e(t))}catch{}}return null}var q=Array.isArray,S=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,F=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},pe=[],A=-1;function T(e){return{current:e}}function Q(e){0>A||(e.current=pe[A],pe[A]=null,A--)}function B(e,t){A++,pe[A]=e.current,e.current=t}var te=T(null),ie=T(null),ue=T(null),je=T(null);function lt(e,t){switch(B(ue,t),B(ie,e),B(te,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?qf(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=qf(t),e=Vf(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Q(te),B(te,e)}function Ge(){Q(te),Q(ie),Q(ue)}function Da(e){e.memoizedState!==null&&B(je,e);var t=te.current,s=Vf(t,e.type);t!==s&&(B(ie,e),B(te,s))}function Rr(e){ie.current===e&&(Q(te),Q(ie)),je.current===e&&(Q(je),yr._currentValue=se)}var fl,gu;function is(e){if(fl===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);fl=t&&t[1]||"",gu=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fl+e+gu}var ml=!1;function gl(e,t){if(!e||ml)return"";ml=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(t){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(I){var V=I}Reflect.construct(e,[],J)}else{try{J.call()}catch(I){V=I}e.call(J.prototype)}}else{try{throw Error()}catch(I){V=I}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(I){if(I&&V&&typeof I.stack=="string")return[I.stack,V.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var c=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");c&&c.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),p=d[0],b=d[1];if(p&&b){var C=p.split(`
`),$=b.split(`
`);for(c=l=0;l<C.length&&!C[l].includes("DetermineComponentFrameRoot");)l++;for(;c<$.length&&!$[c].includes("DetermineComponentFrameRoot");)c++;if(l===C.length||c===$.length)for(l=C.length-1,c=$.length-1;1<=l&&0<=c&&C[l]!==$[c];)c--;for(;1<=l&&0<=c;l--,c--)if(C[l]!==$[c]){if(l!==1||c!==1)do if(l--,c--,0>c||C[l]!==$[c]){var Y=`
`+C[l].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=l&&0<=c);break}}}finally{ml=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?is(s):""}function _g(e,t){switch(e.tag){case 26:case 27:case 5:return is(e.type);case 16:return is("Lazy");case 13:return e.child!==t&&t!==null?is("Suspense Fallback"):is("Suspense");case 19:return is("SuspenseList");case 0:case 15:return gl(e.type,!1);case 11:return gl(e.type.render,!1);case 1:return gl(e.type,!0);case 31:return is("Activity");default:return""}}function pu(e){try{var t="",s=null;do t+=_g(e,s),s=e,e=e.return;while(e);return t}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var pl=Object.prototype.hasOwnProperty,yl=n.unstable_scheduleCallback,xl=n.unstable_cancelCallback,jg=n.unstable_shouldYield,wg=n.unstable_requestPaint,Ct=n.unstable_now,Ng=n.unstable_getCurrentPriorityLevel,yu=n.unstable_ImmediatePriority,xu=n.unstable_UserBlockingPriority,Ur=n.unstable_NormalPriority,Sg=n.unstable_LowPriority,vu=n.unstable_IdlePriority,Tg=n.log,Eg=n.unstable_setDisableYieldValue,An=null,At=null;function Ra(e){if(typeof Tg=="function"&&Eg(e),At&&typeof At.setStrictMode=="function")try{At.setStrictMode(An,e)}catch{}}var Ot=Math.clz32?Math.clz32:Og,Cg=Math.log,Ag=Math.LN2;function Og(e){return e>>>=0,e===0?32:31-(Cg(e)/Ag|0)|0}var zr=256,Mr=262144,Br=4194304;function ls(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Lr(e,t,s){var l=e.pendingLanes;if(l===0)return 0;var c=0,d=e.suspendedLanes,p=e.pingedLanes;e=e.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?c=ls(l):(p&=b,p!==0?c=ls(p):s||(s=b&~e,s!==0&&(c=ls(s))))):(b=l&~d,b!==0?c=ls(b):p!==0?c=ls(p):s||(s=l&~e,s!==0&&(c=ls(s)))),c===0?0:t!==0&&t!==c&&(t&d)===0&&(d=c&-c,s=t&-t,d>=s||d===32&&(s&4194048)!==0)?t:c}function On(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function kg(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bu(){var e=Br;return Br<<=1,(Br&62914560)===0&&(Br=4194304),e}function vl(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function kn(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Dg(e,t,s,l,c,d){var p=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var b=e.entanglements,C=e.expirationTimes,$=e.hiddenUpdates;for(s=p&~s;0<s;){var Y=31-Ot(s),J=1<<Y;b[Y]=0,C[Y]=-1;var V=$[Y];if(V!==null)for($[Y]=null,Y=0;Y<V.length;Y++){var I=V[Y];I!==null&&(I.lane&=-536870913)}s&=~J}l!==0&&_u(e,l,0),d!==0&&c===0&&e.tag!==0&&(e.suspendedLanes|=d&~(p&~t))}function _u(e,t,s){e.pendingLanes|=t,e.suspendedLanes&=~t;var l=31-Ot(t);e.entangledLanes|=t,e.entanglements[l]=e.entanglements[l]|1073741824|s&261930}function ju(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-Ot(s),c=1<<l;c&t|e[l]&t&&(e[l]|=t),s&=~c}}function wu(e,t){var s=t&-t;return s=(s&42)!==0?1:bl(s),(s&(e.suspendedLanes|t))!==0?0:s}function bl(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function _l(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Nu(){var e=F.p;return e!==0?e:(e=window.event,e===void 0?32:um(e.type))}function Su(e,t){var s=F.p;try{return F.p=e,t()}finally{F.p=s}}var Ua=Math.random().toString(36).slice(2),ut="__reactFiber$"+Ua,_t="__reactProps$"+Ua,ks="__reactContainer$"+Ua,jl="__reactEvents$"+Ua,Rg="__reactListeners$"+Ua,Ug="__reactHandles$"+Ua,Tu="__reactResources$"+Ua,Dn="__reactMarker$"+Ua;function wl(e){delete e[ut],delete e[_t],delete e[jl],delete e[Rg],delete e[Ug]}function Ds(e){var t=e[ut];if(t)return t;for(var s=e.parentNode;s;){if(t=s[ks]||s[ut]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Qf(e);e!==null;){if(s=e[ut])return s;e=Qf(e)}return t}e=s,s=e.parentNode}return null}function Rs(e){if(e=e[ut]||e[ks]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Rn(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(o(33))}function Us(e){var t=e[Tu];return t||(t=e[Tu]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function ot(e){e[Dn]=!0}var Eu=new Set,Cu={};function os(e,t){zs(e,t),zs(e+"Capture",t)}function zs(e,t){for(Cu[e]=t,e=0;e<t.length;e++)Eu.add(t[e])}var zg=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Au={},Ou={};function Mg(e){return pl.call(Ou,e)?!0:pl.call(Au,e)?!1:zg.test(e)?Ou[e]=!0:(Au[e]=!0,!1)}function $r(e,t,s){if(Mg(t))if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var l=t.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+s)}}function qr(e,t,s){if(s===null)e.removeAttribute(t);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+s)}}function da(e,t,s,l){if(l===null)e.removeAttribute(s);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(t,s,""+l)}}function Ht(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ku(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Bg(e,t,s){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var c=l.get,d=l.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){s=""+p,d.call(this,p)}}),Object.defineProperty(e,t,{enumerable:l.enumerable}),{getValue:function(){return s},setValue:function(p){s=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Nl(e){if(!e._valueTracker){var t=ku(e)?"checked":"value";e._valueTracker=Bg(e,t,""+e[t])}}function Du(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=ku(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Vr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Lg=/[\n"\\]/g;function It(e){return e.replace(Lg,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Sl(e,t,s,l,c,d,p,b){e.name="",p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"?e.type=p:e.removeAttribute("type"),t!=null?p==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Ht(t)):e.value!==""+Ht(t)&&(e.value=""+Ht(t)):p!=="submit"&&p!=="reset"||e.removeAttribute("value"),t!=null?Tl(e,p,Ht(t)):s!=null?Tl(e,p,Ht(s)):l!=null&&e.removeAttribute("value"),c==null&&d!=null&&(e.defaultChecked=!!d),c!=null&&(e.checked=c&&typeof c!="function"&&typeof c!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.name=""+Ht(b):e.removeAttribute("name")}function Ru(e,t,s,l,c,d,p,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),t!=null||s!=null){if(!(d!=="submit"&&d!=="reset"||t!=null)){Nl(e);return}s=s!=null?""+Ht(s):"",t=t!=null?""+Ht(t):s,b||t===e.value||(e.value=t),e.defaultValue=t}l=l??c,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=b?e.checked:!!l,e.defaultChecked=!!l,p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(e.name=p),Nl(e)}function Tl(e,t,s){t==="number"&&Vr(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ms(e,t,s,l){if(e=e.options,t){t={};for(var c=0;c<s.length;c++)t["$"+s[c]]=!0;for(s=0;s<e.length;s++)c=t.hasOwnProperty("$"+e[s].value),e[s].selected!==c&&(e[s].selected=c),c&&l&&(e[s].defaultSelected=!0)}else{for(s=""+Ht(s),t=null,c=0;c<e.length;c++){if(e[c].value===s){e[c].selected=!0,l&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Uu(e,t,s){if(t!=null&&(t=""+Ht(t),t!==e.value&&(e.value=t),s==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=s!=null?""+Ht(s):""}function zu(e,t,s,l){if(t==null){if(l!=null){if(s!=null)throw Error(o(92));if(q(l)){if(1<l.length)throw Error(o(93));l=l[0]}s=l}s==null&&(s=""),t=s}s=Ht(t),e.defaultValue=s,l=e.textContent,l===s&&l!==""&&l!==null&&(e.value=l),Nl(e)}function Bs(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var $g=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(e,t,s){var l=t.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?l?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":l?e.setProperty(t,s):typeof s!="number"||s===0||$g.has(t)?t==="float"?e.cssFloat=s:e[t]=(""+s).trim():e[t]=s+"px"}function Bu(e,t,s){if(t!=null&&typeof t!="object")throw Error(o(62));if(e=e.style,s!=null){for(var l in s)!s.hasOwnProperty(l)||t!=null&&t.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var c in t)l=t[c],t.hasOwnProperty(c)&&s[c]!==l&&Mu(e,c,l)}else for(var d in t)t.hasOwnProperty(d)&&Mu(e,d,t[d])}function El(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var qg=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(e){return Vg.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ha(){}var Cl=null;function Al(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ls=null,$s=null;function Lu(e){var t=Rs(e);if(t&&(e=t.stateNode)){var s=e[_t]||null;e:switch(e=t.stateNode,t.type){case"input":if(Sl(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+It(""+t)+'"][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var c=l[_t]||null;if(!c)throw Error(o(90));Sl(l,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name)}}for(t=0;t<s.length;t++)l=s[t],l.form===e.form&&Du(l)}break e;case"textarea":Uu(e,s.value,s.defaultValue);break e;case"select":t=s.value,t!=null&&Ms(e,!!s.multiple,t,!1)}}}var Ol=!1;function $u(e,t,s){if(Ol)return e(t,s);Ol=!0;try{var l=e(t);return l}finally{if(Ol=!1,(Ls!==null||$s!==null)&&(Ai(),Ls&&(t=Ls,e=$s,$s=Ls=null,Lu(t),e)))for(t=0;t<e.length;t++)Lu(e[t])}}function Un(e,t){var s=e.stateNode;if(s===null)return null;var l=s[_t]||null;if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(o(231,t,typeof s));return s}var fa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),kl=!1;if(fa)try{var zn={};Object.defineProperty(zn,"passive",{get:function(){kl=!0}}),window.addEventListener("test",zn,zn),window.removeEventListener("test",zn,zn)}catch{kl=!1}var za=null,Dl=null,Ir=null;function qu(){if(Ir)return Ir;var e,t=Dl,s=t.length,l,c="value"in za?za.value:za.textContent,d=c.length;for(e=0;e<s&&t[e]===c[e];e++);var p=s-e;for(l=1;l<=p&&t[s-l]===c[d-l];l++);return Ir=c.slice(e,1<l?1-l:void 0)}function Gr(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Pr(){return!0}function Vu(){return!1}function jt(e){function t(s,l,c,d,p){this._reactName=s,this._targetInst=c,this.type=l,this.nativeEvent=d,this.target=p,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(s=e[b],this[b]=s?s(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Pr:Vu,this.isPropagationStopped=Vu,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),t}var cs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yr=jt(cs),Mn=w({},cs,{view:0,detail:0}),Hg=jt(Mn),Rl,Ul,Bn,Kr=w({},Mn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ml,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Bn&&(Bn&&e.type==="mousemove"?(Rl=e.screenX-Bn.screenX,Ul=e.screenY-Bn.screenY):Ul=Rl=0,Bn=e),Rl)},movementY:function(e){return"movementY"in e?e.movementY:Ul}}),Hu=jt(Kr),Ig=w({},Kr,{dataTransfer:0}),Gg=jt(Ig),Pg=w({},Mn,{relatedTarget:0}),zl=jt(Pg),Yg=w({},cs,{animationName:0,elapsedTime:0,pseudoElement:0}),Kg=jt(Yg),Qg=w({},cs,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Xg=jt(Qg),Jg=w({},cs,{data:0}),Iu=jt(Jg),Zg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Fg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ep(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wg[e])?!!t[e]:!1}function Ml(){return ep}var tp=w({},Mn,{key:function(e){if(e.key){var t=Zg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Gr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Fg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ml,charCode:function(e){return e.type==="keypress"?Gr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Gr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ap=jt(tp),sp=w({},Kr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gu=jt(sp),np=w({},Mn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ml}),rp=jt(np),ip=w({},cs,{propertyName:0,elapsedTime:0,pseudoElement:0}),lp=jt(ip),op=w({},Kr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cp=jt(op),up=w({},cs,{newState:0,oldState:0}),dp=jt(up),hp=[9,13,27,32],Bl=fa&&"CompositionEvent"in window,Ln=null;fa&&"documentMode"in document&&(Ln=document.documentMode);var fp=fa&&"TextEvent"in window&&!Ln,Pu=fa&&(!Bl||Ln&&8<Ln&&11>=Ln),Yu=" ",Ku=!1;function Qu(e,t){switch(e){case"keyup":return hp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xu(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qs=!1;function mp(e,t){switch(e){case"compositionend":return Xu(t);case"keypress":return t.which!==32?null:(Ku=!0,Yu);case"textInput":return e=t.data,e===Yu&&Ku?null:e;default:return null}}function gp(e,t){if(qs)return e==="compositionend"||!Bl&&Qu(e,t)?(e=qu(),Ir=Dl=za=null,qs=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pu&&t.locale!=="ko"?null:t.data;default:return null}}var pp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ju(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pp[e.type]:t==="textarea"}function Zu(e,t,s,l){Ls?$s?$s.push(l):$s=[l]:Ls=l,t=Mi(t,"onChange"),0<t.length&&(s=new Yr("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var $n=null,qn=null;function yp(e){Uf(e,0)}function Qr(e){var t=Rn(e);if(Du(t))return e}function Fu(e,t){if(e==="change")return t}var Wu=!1;if(fa){var Ll;if(fa){var $l="oninput"in document;if(!$l){var ed=document.createElement("div");ed.setAttribute("oninput","return;"),$l=typeof ed.oninput=="function"}Ll=$l}else Ll=!1;Wu=Ll&&(!document.documentMode||9<document.documentMode)}function td(){$n&&($n.detachEvent("onpropertychange",ad),qn=$n=null)}function ad(e){if(e.propertyName==="value"&&Qr(qn)){var t=[];Zu(t,qn,e,Al(e)),$u(yp,t)}}function xp(e,t,s){e==="focusin"?(td(),$n=t,qn=s,$n.attachEvent("onpropertychange",ad)):e==="focusout"&&td()}function vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Qr(qn)}function bp(e,t){if(e==="click")return Qr(t)}function _p(e,t){if(e==="input"||e==="change")return Qr(t)}function jp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var kt=typeof Object.is=="function"?Object.is:jp;function Vn(e,t){if(kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var c=s[l];if(!pl.call(t,c)||!kt(e[c],t[c]))return!1}return!0}function sd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,t){var s=sd(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=sd(s)}}function rd(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rd(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function id(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Vr(e.document);t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Vr(e.document)}return t}function ql(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var wp=fa&&"documentMode"in document&&11>=document.documentMode,Vs=null,Vl=null,Hn=null,Hl=!1;function ld(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Hl||Vs==null||Vs!==Vr(l)||(l=Vs,"selectionStart"in l&&ql(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),Hn&&Vn(Hn,l)||(Hn=l,l=Mi(Vl,"onSelect"),0<l.length&&(t=new Yr("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=Vs)))}function us(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Hs={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},Il={},od={};fa&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Hs.animationend.animation,delete Hs.animationiteration.animation,delete Hs.animationstart.animation),"TransitionEvent"in window||delete Hs.transitionend.transition);function ds(e){if(Il[e])return Il[e];if(!Hs[e])return e;var t=Hs[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in od)return Il[e]=t[s];return e}var cd=ds("animationend"),ud=ds("animationiteration"),dd=ds("animationstart"),Np=ds("transitionrun"),Sp=ds("transitionstart"),Tp=ds("transitioncancel"),hd=ds("transitionend"),fd=new Map,Gl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gl.push("scrollEnd");function ea(e,t){fd.set(e,t),os(t,[e])}var Xr=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Gt=[],Is=0,Pl=0;function Jr(){for(var e=Is,t=Pl=Is=0;t<e;){var s=Gt[t];Gt[t++]=null;var l=Gt[t];Gt[t++]=null;var c=Gt[t];Gt[t++]=null;var d=Gt[t];if(Gt[t++]=null,l!==null&&c!==null){var p=l.pending;p===null?c.next=c:(c.next=p.next,p.next=c),l.pending=c}d!==0&&md(s,c,d)}}function Zr(e,t,s,l){Gt[Is++]=e,Gt[Is++]=t,Gt[Is++]=s,Gt[Is++]=l,Pl|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function Yl(e,t,s,l){return Zr(e,t,s,l),Fr(e)}function hs(e,t){return Zr(e,null,null,t),Fr(e)}function md(e,t,s){e.lanes|=s;var l=e.alternate;l!==null&&(l.lanes|=s);for(var c=!1,d=e.return;d!==null;)d.childLanes|=s,l=d.alternate,l!==null&&(l.childLanes|=s),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(c=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,c&&t!==null&&(c=31-Ot(s),e=d.hiddenUpdates,l=e[c],l===null?e[c]=[t]:l.push(t),t.lane=s|536870912),d):null}function Fr(e){if(50<ur)throw ur=0,ac=null,Error(o(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Gs={};function Ep(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,s,l){return new Ep(e,t,s,l)}function Kl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ma(e,t){var s=e.alternate;return s===null?(s=Dt(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function gd(e,t){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,t=s.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Wr(e,t,s,l,c,d){var p=0;if(l=e,typeof e=="function")Kl(e)&&(p=1);else if(typeof e=="string")p=D0(e,s,te.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ae:return e=Dt(31,s,t,c),e.elementType=ae,e.lanes=d,e;case N:return fs(s.children,c,d,t);case O:p=8,c|=24;break;case D:return e=Dt(12,s,t,c|2),e.elementType=D,e.lanes=d,e;case G:return e=Dt(13,s,t,c),e.elementType=G,e.lanes=d,e;case W:return e=Dt(19,s,t,c),e.elementType=W,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:p=10;break e;case z:p=9;break e;case E:p=11;break e;case K:p=14;break e;case R:p=16,l=null;break e}p=29,s=Error(o(130,e===null?"null":typeof e,"")),l=null}return t=Dt(p,s,t,c),t.elementType=e,t.type=l,t.lanes=d,t}function fs(e,t,s,l){return e=Dt(7,e,l,t),e.lanes=s,e}function Ql(e,t,s){return e=Dt(6,e,null,t),e.lanes=s,e}function pd(e){var t=Dt(18,null,null,0);return t.stateNode=e,t}function Xl(e,t,s){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var yd=new WeakMap;function Pt(e,t){if(typeof e=="object"&&e!==null){var s=yd.get(e);return s!==void 0?s:(t={value:e,source:t,stack:pu(t)},yd.set(e,t),t)}return{value:e,source:t,stack:pu(t)}}var Ps=[],Ys=0,ei=null,In=0,Yt=[],Kt=0,Ma=null,la=1,oa="";function ga(e,t){Ps[Ys++]=In,Ps[Ys++]=ei,ei=e,In=t}function xd(e,t,s){Yt[Kt++]=la,Yt[Kt++]=oa,Yt[Kt++]=Ma,Ma=e;var l=la;e=oa;var c=32-Ot(l)-1;l&=~(1<<c),s+=1;var d=32-Ot(t)+c;if(30<d){var p=c-c%5;d=(l&(1<<p)-1).toString(32),l>>=p,c-=p,la=1<<32-Ot(t)+c|s<<c|l,oa=d+e}else la=1<<d|s<<c|l,oa=e}function Jl(e){e.return!==null&&(ga(e,1),xd(e,1,0))}function Zl(e){for(;e===ei;)ei=Ps[--Ys],Ps[Ys]=null,In=Ps[--Ys],Ps[Ys]=null;for(;e===Ma;)Ma=Yt[--Kt],Yt[Kt]=null,oa=Yt[--Kt],Yt[Kt]=null,la=Yt[--Kt],Yt[Kt]=null}function vd(e,t){Yt[Kt++]=la,Yt[Kt++]=oa,Yt[Kt++]=Ma,la=t.id,oa=t.overflow,Ma=e}var dt=null,He=null,Ee=!1,Ba=null,Qt=!1,Fl=Error(o(519));function La(e){var t=Error(o(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Gn(Pt(t,e)),Fl}function bd(e){var t=e.stateNode,s=e.type,l=e.memoizedProps;switch(t[ut]=e,t[_t]=l,s){case"dialog":Ne("cancel",t),Ne("close",t);break;case"iframe":case"object":case"embed":Ne("load",t);break;case"video":case"audio":for(s=0;s<hr.length;s++)Ne(hr[s],t);break;case"source":Ne("error",t);break;case"img":case"image":case"link":Ne("error",t),Ne("load",t);break;case"details":Ne("toggle",t);break;case"input":Ne("invalid",t),Ru(t,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Ne("invalid",t);break;case"textarea":Ne("invalid",t),zu(t,l.value,l.defaultValue,l.children)}s=l.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||t.textContent===""+s||l.suppressHydrationWarning===!0||Lf(t.textContent,s)?(l.popover!=null&&(Ne("beforetoggle",t),Ne("toggle",t)),l.onScroll!=null&&Ne("scroll",t),l.onScrollEnd!=null&&Ne("scrollend",t),l.onClick!=null&&(t.onclick=ha),t=!0):t=!1,t||La(e,!0)}function _d(e){for(dt=e.return;dt;)switch(dt.tag){case 5:case 31:case 13:Qt=!1;return;case 27:case 3:Qt=!0;return;default:dt=dt.return}}function Ks(e){if(e!==dt)return!1;if(!Ee)return _d(e),Ee=!0,!1;var t=e.tag,s;if((s=t!==3&&t!==27)&&((s=t===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||yc(e.type,e.memoizedProps)),s=!s),s&&He&&La(e),_d(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));He=Kf(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));He=Kf(e)}else t===27?(t=He,Fa(e.type)?(e=jc,jc=null,He=e):He=t):He=dt?Jt(e.stateNode.nextSibling):null;return!0}function ms(){He=dt=null,Ee=!1}function Wl(){var e=Ba;return e!==null&&(Tt===null?Tt=e:Tt.push.apply(Tt,e),Ba=null),e}function Gn(e){Ba===null?Ba=[e]:Ba.push(e)}var eo=T(null),gs=null,pa=null;function $a(e,t,s){B(eo,t._currentValue),t._currentValue=s}function ya(e){e._currentValue=eo.current,Q(eo)}function to(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function ao(e,t,s,l){var c=e.child;for(c!==null&&(c.return=e);c!==null;){var d=c.dependencies;if(d!==null){var p=c.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=c;for(var C=0;C<t.length;C++)if(b.context===t[C]){d.lanes|=s,b=d.alternate,b!==null&&(b.lanes|=s),to(d.return,s,e),l||(p=null);break e}d=b.next}}else if(c.tag===18){if(p=c.return,p===null)throw Error(o(341));p.lanes|=s,d=p.alternate,d!==null&&(d.lanes|=s),to(p,s,e),p=null}else p=c.child;if(p!==null)p.return=c;else for(p=c;p!==null;){if(p===e){p=null;break}if(c=p.sibling,c!==null){c.return=p.return,p=c;break}p=p.return}c=p}}function Qs(e,t,s,l){e=null;for(var c=t,d=!1;c!==null;){if(!d){if((c.flags&524288)!==0)d=!0;else if((c.flags&262144)!==0)break}if(c.tag===10){var p=c.alternate;if(p===null)throw Error(o(387));if(p=p.memoizedProps,p!==null){var b=c.type;kt(c.pendingProps.value,p.value)||(e!==null?e.push(b):e=[b])}}else if(c===je.current){if(p=c.alternate,p===null)throw Error(o(387));p.memoizedState.memoizedState!==c.memoizedState.memoizedState&&(e!==null?e.push(yr):e=[yr])}c=c.return}e!==null&&ao(t,e,s,l),t.flags|=262144}function ti(e){for(e=e.firstContext;e!==null;){if(!kt(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ps(e){gs=e,pa=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function ht(e){return jd(gs,e)}function ai(e,t){return gs===null&&ps(e),jd(e,t)}function jd(e,t){var s=t._currentValue;if(t={context:t,memoizedValue:s,next:null},pa===null){if(e===null)throw Error(o(308));pa=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else pa=pa.next=t;return s}var Cp=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(s,l){e.push(l)}};this.abort=function(){t.aborted=!0,e.forEach(function(s){return s()})}},Ap=n.unstable_scheduleCallback,Op=n.unstable_NormalPriority,We={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function so(){return{controller:new Cp,data:new Map,refCount:0}}function Pn(e){e.refCount--,e.refCount===0&&Ap(Op,function(){e.controller.abort()})}var Yn=null,no=0,Xs=0,Js=null;function kp(e,t){if(Yn===null){var s=Yn=[];no=0,Xs=oc(),Js={status:"pending",value:void 0,then:function(l){s.push(l)}}}return no++,t.then(wd,wd),t}function wd(){if(--no===0&&Yn!==null){Js!==null&&(Js.status="fulfilled");var e=Yn;Yn=null,Xs=0,Js=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function Dp(e,t){var s=[],l={status:"pending",value:null,reason:null,then:function(c){s.push(c)}};return e.then(function(){l.status="fulfilled",l.value=t;for(var c=0;c<s.length;c++)(0,s[c])(t)},function(c){for(l.status="rejected",l.reason=c,c=0;c<s.length;c++)(0,s[c])(void 0)}),l}var Nd=S.S;S.S=function(e,t){of=Ct(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&kp(e,t),Nd!==null&&Nd(e,t)};var ys=T(null);function ro(){var e=ys.current;return e!==null?e:$e.pooledCache}function si(e,t){t===null?B(ys,ys.current):B(ys,t.pool)}function Sd(){var e=ro();return e===null?null:{parent:We._currentValue,pool:e}}var Zs=Error(o(460)),io=Error(o(474)),ni=Error(o(542)),ri={then:function(){}};function Td(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ed(e,t,s){switch(s=e[s],s===void 0?e.push(t):s!==t&&(t.then(ha,ha),t=s),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ad(e),e;default:if(typeof t.status=="string")t.then(ha,ha);else{if(e=$e,e!==null&&100<e.shellSuspendCounter)throw Error(o(482));e=t,e.status="pending",e.then(function(l){if(t.status==="pending"){var c=t;c.status="fulfilled",c.value=l}},function(l){if(t.status==="pending"){var c=t;c.status="rejected",c.reason=l}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Ad(e),e}throw vs=t,Zs}}function xs(e){try{var t=e._init;return t(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(vs=s,Zs):s}}var vs=null;function Cd(){if(vs===null)throw Error(o(459));var e=vs;return vs=null,e}function Ad(e){if(e===Zs||e===ni)throw Error(o(483))}var Fs=null,Kn=0;function ii(e){var t=Kn;return Kn+=1,Fs===null&&(Fs=[]),Ed(Fs,e,t)}function Qn(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function li(e,t){throw t.$$typeof===j?Error(o(525)):(e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Od(e){function t(M,k){if(e){var L=M.deletions;L===null?(M.deletions=[k],M.flags|=16):L.push(k)}}function s(M,k){if(!e)return null;for(;k!==null;)t(M,k),k=k.sibling;return null}function l(M){for(var k=new Map;M!==null;)M.key!==null?k.set(M.key,M):k.set(M.index,M),M=M.sibling;return k}function c(M,k){return M=ma(M,k),M.index=0,M.sibling=null,M}function d(M,k,L){return M.index=L,e?(L=M.alternate,L!==null?(L=L.index,L<k?(M.flags|=67108866,k):L):(M.flags|=67108866,k)):(M.flags|=1048576,k)}function p(M){return e&&M.alternate===null&&(M.flags|=67108866),M}function b(M,k,L,X){return k===null||k.tag!==6?(k=Ql(L,M.mode,X),k.return=M,k):(k=c(k,L),k.return=M,k)}function C(M,k,L,X){var ce=L.type;return ce===N?Y(M,k,L.props.children,X,L.key):k!==null&&(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===R&&xs(ce)===k.type)?(k=c(k,L.props),Qn(k,L),k.return=M,k):(k=Wr(L.type,L.key,L.props,null,M.mode,X),Qn(k,L),k.return=M,k)}function $(M,k,L,X){return k===null||k.tag!==4||k.stateNode.containerInfo!==L.containerInfo||k.stateNode.implementation!==L.implementation?(k=Xl(L,M.mode,X),k.return=M,k):(k=c(k,L.children||[]),k.return=M,k)}function Y(M,k,L,X,ce){return k===null||k.tag!==7?(k=fs(L,M.mode,X,ce),k.return=M,k):(k=c(k,L),k.return=M,k)}function J(M,k,L){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Ql(""+k,M.mode,L),k.return=M,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case _:return L=Wr(k.type,k.key,k.props,null,M.mode,L),Qn(L,k),L.return=M,L;case y:return k=Xl(k,M.mode,L),k.return=M,k;case R:return k=xs(k),J(M,k,L)}if(q(k)||ge(k))return k=fs(k,M.mode,L,null),k.return=M,k;if(typeof k.then=="function")return J(M,ii(k),L);if(k.$$typeof===U)return J(M,ai(M,k),L);li(M,k)}return null}function V(M,k,L,X){var ce=k!==null?k.key:null;if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return ce!==null?null:b(M,k,""+L,X);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case _:return L.key===ce?C(M,k,L,X):null;case y:return L.key===ce?$(M,k,L,X):null;case R:return L=xs(L),V(M,k,L,X)}if(q(L)||ge(L))return ce!==null?null:Y(M,k,L,X,null);if(typeof L.then=="function")return V(M,k,ii(L),X);if(L.$$typeof===U)return V(M,k,ai(M,L),X);li(M,L)}return null}function I(M,k,L,X,ce){if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return M=M.get(L)||null,b(k,M,""+X,ce);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case _:return M=M.get(X.key===null?L:X.key)||null,C(k,M,X,ce);case y:return M=M.get(X.key===null?L:X.key)||null,$(k,M,X,ce);case R:return X=xs(X),I(M,k,L,X,ce)}if(q(X)||ge(X))return M=M.get(L)||null,Y(k,M,X,ce,null);if(typeof X.then=="function")return I(M,k,L,ii(X),ce);if(X.$$typeof===U)return I(M,k,L,ai(k,X),ce);li(k,X)}return null}function ne(M,k,L,X){for(var ce=null,Ae=null,re=k,ve=k=0,Te=null;re!==null&&ve<L.length;ve++){re.index>ve?(Te=re,re=null):Te=re.sibling;var Oe=V(M,re,L[ve],X);if(Oe===null){re===null&&(re=Te);break}e&&re&&Oe.alternate===null&&t(M,re),k=d(Oe,k,ve),Ae===null?ce=Oe:Ae.sibling=Oe,Ae=Oe,re=Te}if(ve===L.length)return s(M,re),Ee&&ga(M,ve),ce;if(re===null){for(;ve<L.length;ve++)re=J(M,L[ve],X),re!==null&&(k=d(re,k,ve),Ae===null?ce=re:Ae.sibling=re,Ae=re);return Ee&&ga(M,ve),ce}for(re=l(re);ve<L.length;ve++)Te=I(re,M,ve,L[ve],X),Te!==null&&(e&&Te.alternate!==null&&re.delete(Te.key===null?ve:Te.key),k=d(Te,k,ve),Ae===null?ce=Te:Ae.sibling=Te,Ae=Te);return e&&re.forEach(function(ss){return t(M,ss)}),Ee&&ga(M,ve),ce}function he(M,k,L,X){if(L==null)throw Error(o(151));for(var ce=null,Ae=null,re=k,ve=k=0,Te=null,Oe=L.next();re!==null&&!Oe.done;ve++,Oe=L.next()){re.index>ve?(Te=re,re=null):Te=re.sibling;var ss=V(M,re,Oe.value,X);if(ss===null){re===null&&(re=Te);break}e&&re&&ss.alternate===null&&t(M,re),k=d(ss,k,ve),Ae===null?ce=ss:Ae.sibling=ss,Ae=ss,re=Te}if(Oe.done)return s(M,re),Ee&&ga(M,ve),ce;if(re===null){for(;!Oe.done;ve++,Oe=L.next())Oe=J(M,Oe.value,X),Oe!==null&&(k=d(Oe,k,ve),Ae===null?ce=Oe:Ae.sibling=Oe,Ae=Oe);return Ee&&ga(M,ve),ce}for(re=l(re);!Oe.done;ve++,Oe=L.next())Oe=I(re,M,ve,Oe.value,X),Oe!==null&&(e&&Oe.alternate!==null&&re.delete(Oe.key===null?ve:Oe.key),k=d(Oe,k,ve),Ae===null?ce=Oe:Ae.sibling=Oe,Ae=Oe);return e&&re.forEach(function(I0){return t(M,I0)}),Ee&&ga(M,ve),ce}function Le(M,k,L,X){if(typeof L=="object"&&L!==null&&L.type===N&&L.key===null&&(L=L.props.children),typeof L=="object"&&L!==null){switch(L.$$typeof){case _:e:{for(var ce=L.key;k!==null;){if(k.key===ce){if(ce=L.type,ce===N){if(k.tag===7){s(M,k.sibling),X=c(k,L.props.children),X.return=M,M=X;break e}}else if(k.elementType===ce||typeof ce=="object"&&ce!==null&&ce.$$typeof===R&&xs(ce)===k.type){s(M,k.sibling),X=c(k,L.props),Qn(X,L),X.return=M,M=X;break e}s(M,k);break}else t(M,k);k=k.sibling}L.type===N?(X=fs(L.props.children,M.mode,X,L.key),X.return=M,M=X):(X=Wr(L.type,L.key,L.props,null,M.mode,X),Qn(X,L),X.return=M,M=X)}return p(M);case y:e:{for(ce=L.key;k!==null;){if(k.key===ce)if(k.tag===4&&k.stateNode.containerInfo===L.containerInfo&&k.stateNode.implementation===L.implementation){s(M,k.sibling),X=c(k,L.children||[]),X.return=M,M=X;break e}else{s(M,k);break}else t(M,k);k=k.sibling}X=Xl(L,M.mode,X),X.return=M,M=X}return p(M);case R:return L=xs(L),Le(M,k,L,X)}if(q(L))return ne(M,k,L,X);if(ge(L)){if(ce=ge(L),typeof ce!="function")throw Error(o(150));return L=ce.call(L),he(M,k,L,X)}if(typeof L.then=="function")return Le(M,k,ii(L),X);if(L.$$typeof===U)return Le(M,k,ai(M,L),X);li(M,L)}return typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint"?(L=""+L,k!==null&&k.tag===6?(s(M,k.sibling),X=c(k,L),X.return=M,M=X):(s(M,k),X=Ql(L,M.mode,X),X.return=M,M=X),p(M)):s(M,k)}return function(M,k,L,X){try{Kn=0;var ce=Le(M,k,L,X);return Fs=null,ce}catch(re){if(re===Zs||re===ni)throw re;var Ae=Dt(29,re,null,M.mode);return Ae.lanes=X,Ae.return=M,Ae}finally{}}}var bs=Od(!0),kd=Od(!1),qa=!1;function lo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function oo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Va(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Ha(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(De&2)!==0){var c=l.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),l.pending=t,t=Fr(e),md(e,null,s),t}return Zr(e,l,t,s),Fr(e)}function Xn(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194048)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,ju(e,s)}}function co(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var c=null,d=null;if(s=s.firstBaseUpdate,s!==null){do{var p={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};d===null?c=d=p:d=d.next=p,s=s.next}while(s!==null);d===null?c=d=t:d=d.next=t}else c=d=t;s={baseState:l.baseState,firstBaseUpdate:c,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}var uo=!1;function Jn(){if(uo){var e=Js;if(e!==null)throw e}}function Zn(e,t,s,l){uo=!1;var c=e.updateQueue;qa=!1;var d=c.firstBaseUpdate,p=c.lastBaseUpdate,b=c.shared.pending;if(b!==null){c.shared.pending=null;var C=b,$=C.next;C.next=null,p===null?d=$:p.next=$,p=C;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==p&&(b===null?Y.firstBaseUpdate=$:b.next=$,Y.lastBaseUpdate=C))}if(d!==null){var J=c.baseState;p=0,Y=$=C=null,b=d;do{var V=b.lane&-536870913,I=V!==b.lane;if(I?(Se&V)===V:(l&V)===V){V!==0&&V===Xs&&(uo=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var ne=e,he=b;V=t;var Le=s;switch(he.tag){case 1:if(ne=he.payload,typeof ne=="function"){J=ne.call(Le,J,V);break e}J=ne;break e;case 3:ne.flags=ne.flags&-65537|128;case 0:if(ne=he.payload,V=typeof ne=="function"?ne.call(Le,J,V):ne,V==null)break e;J=w({},J,V);break e;case 2:qa=!0}}V=b.callback,V!==null&&(e.flags|=64,I&&(e.flags|=8192),I=c.callbacks,I===null?c.callbacks=[V]:I.push(V))}else I={lane:V,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?($=Y=I,C=J):Y=Y.next=I,p|=V;if(b=b.next,b===null){if(b=c.shared.pending,b===null)break;I=b,b=I.next,I.next=null,c.lastBaseUpdate=I,c.shared.pending=null}}while(!0);Y===null&&(C=J),c.baseState=C,c.firstBaseUpdate=$,c.lastBaseUpdate=Y,d===null&&(c.shared.lanes=0),Ka|=p,e.lanes=p,e.memoizedState=J}}function Dd(e,t){if(typeof e!="function")throw Error(o(191,e));e.call(t)}function Rd(e,t){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Dd(s[e],t)}var Ws=T(null),oi=T(0);function Ud(e,t){e=Ta,B(oi,e),B(Ws,t),Ta=e|t.baseLanes}function ho(){B(oi,Ta),B(Ws,Ws.current)}function fo(){Ta=oi.current,Q(Ws),Q(oi)}var Rt=T(null),Xt=null;function Ia(e){var t=e.alternate;B(Ze,Ze.current&1),B(Rt,e),Xt===null&&(t===null||Ws.current!==null||t.memoizedState!==null)&&(Xt=e)}function mo(e){B(Ze,Ze.current),B(Rt,e),Xt===null&&(Xt=e)}function zd(e){e.tag===22?(B(Ze,Ze.current),B(Rt,e),Xt===null&&(Xt=e)):Ga()}function Ga(){B(Ze,Ze.current),B(Rt,Rt.current)}function Ut(e){Q(Rt),Xt===e&&(Xt=null),Q(Ze)}var Ze=T(0);function ci(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||bc(s)||_c(s)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var xa=0,xe=null,Me=null,et=null,ui=!1,en=!1,_s=!1,di=0,Fn=0,tn=null,Rp=0;function Qe(){throw Error(o(321))}function go(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!kt(e[s],t[s]))return!1;return!0}function po(e,t,s,l,c,d){return xa=d,xe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,S.H=e===null||e.memoizedState===null?xh:ko,_s=!1,d=s(l,c),_s=!1,en&&(d=Bd(t,s,l,c)),Md(e),d}function Md(e){S.H=tr;var t=Me!==null&&Me.next!==null;if(xa=0,et=Me=xe=null,ui=!1,Fn=0,tn=null,t)throw Error(o(300));e===null||tt||(e=e.dependencies,e!==null&&ti(e)&&(tt=!0))}function Bd(e,t,s,l){xe=e;var c=0;do{if(en&&(tn=null),Fn=0,en=!1,25<=c)throw Error(o(301));if(c+=1,et=Me=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}S.H=vh,d=t(s,l)}while(en);return d}function Up(){var e=S.H,t=e.useState()[0];return t=typeof t.then=="function"?Wn(t):t,e=e.useState()[0],(Me!==null?Me.memoizedState:null)!==e&&(xe.flags|=1024),t}function yo(){var e=di!==0;return di=0,e}function xo(e,t,s){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s}function vo(e){if(ui){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}ui=!1}xa=0,et=Me=xe=null,en=!1,Fn=di=0,tn=null}function vt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?xe.memoizedState=et=e:et=et.next=e,et}function Fe(){if(Me===null){var e=xe.alternate;e=e!==null?e.memoizedState:null}else e=Me.next;var t=et===null?xe.memoizedState:et.next;if(t!==null)et=t,Me=e;else{if(e===null)throw xe.alternate===null?Error(o(467)):Error(o(310));Me=e,e={memoizedState:Me.memoizedState,baseState:Me.baseState,baseQueue:Me.baseQueue,queue:Me.queue,next:null},et===null?xe.memoizedState=et=e:et=et.next=e}return et}function hi(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Wn(e){var t=Fn;return Fn+=1,tn===null&&(tn=[]),e=Ed(tn,e,t),t=xe,(et===null?t.memoizedState:et.next)===null&&(t=t.alternate,S.H=t===null||t.memoizedState===null?xh:ko),e}function fi(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Wn(e);if(e.$$typeof===U)return ht(e)}throw Error(o(438,String(e)))}function bo(e){var t=null,s=xe.updateQueue;if(s!==null&&(t=s.memoCache),t==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(t={data:l.data.map(function(c){return c.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),s===null&&(s=hi(),xe.updateQueue=s),s.memoCache=t,s=t.data[t.index],s===void 0)for(s=t.data[t.index]=Array(e),l=0;l<e;l++)s[l]=de;return t.index++,s}function va(e,t){return typeof t=="function"?t(e):t}function mi(e){var t=Fe();return _o(t,Me,e)}function _o(e,t,s){var l=e.queue;if(l===null)throw Error(o(311));l.lastRenderedReducer=s;var c=e.baseQueue,d=l.pending;if(d!==null){if(c!==null){var p=c.next;c.next=d.next,d.next=p}t.baseQueue=c=d,l.pending=null}if(d=e.baseState,c===null)e.memoizedState=d;else{t=c.next;var b=p=null,C=null,$=t,Y=!1;do{var J=$.lane&-536870913;if(J!==$.lane?(Se&J)===J:(xa&J)===J){var V=$.revertLane;if(V===0)C!==null&&(C=C.next={lane:0,revertLane:0,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null}),J===Xs&&(Y=!0);else if((xa&V)===V){$=$.next,V===Xs&&(Y=!0);continue}else J={lane:0,revertLane:$.revertLane,gesture:null,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},C===null?(b=C=J,p=d):C=C.next=J,xe.lanes|=V,Ka|=V;J=$.action,_s&&s(d,J),d=$.hasEagerState?$.eagerState:s(d,J)}else V={lane:J,revertLane:$.revertLane,gesture:$.gesture,action:$.action,hasEagerState:$.hasEagerState,eagerState:$.eagerState,next:null},C===null?(b=C=V,p=d):C=C.next=V,xe.lanes|=J,Ka|=J;$=$.next}while($!==null&&$!==t);if(C===null?p=d:C.next=b,!kt(d,e.memoizedState)&&(tt=!0,Y&&(s=Js,s!==null)))throw s;e.memoizedState=d,e.baseState=p,e.baseQueue=C,l.lastRenderedState=d}return c===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function jo(e){var t=Fe(),s=t.queue;if(s===null)throw Error(o(311));s.lastRenderedReducer=e;var l=s.dispatch,c=s.pending,d=t.memoizedState;if(c!==null){s.pending=null;var p=c=c.next;do d=e(d,p.action),p=p.next;while(p!==c);kt(d,t.memoizedState)||(tt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),s.lastRenderedState=d}return[d,l]}function Ld(e,t,s){var l=xe,c=Fe(),d=Ee;if(d){if(s===void 0)throw Error(o(407));s=s()}else s=t();var p=!kt((Me||c).memoizedState,s);if(p&&(c.memoizedState=s,tt=!0),c=c.queue,So(Vd.bind(null,l,c,e),[e]),c.getSnapshot!==t||p||et!==null&&et.memoizedState.tag&1){if(l.flags|=2048,an(9,{destroy:void 0},qd.bind(null,l,c,s,t),null),$e===null)throw Error(o(349));d||(xa&127)!==0||$d(l,t,s)}return s}function $d(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=xe.updateQueue,t===null?(t=hi(),xe.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function qd(e,t,s,l){t.value=s,t.getSnapshot=l,Hd(t)&&Id(e)}function Vd(e,t,s){return s(function(){Hd(t)&&Id(e)})}function Hd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!kt(e,s)}catch{return!0}}function Id(e){var t=hs(e,2);t!==null&&Et(t,e,2)}function wo(e){var t=vt();if(typeof e=="function"){var s=e;if(e=s(),_s){Ra(!0);try{s()}finally{Ra(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:e},t}function Gd(e,t,s,l){return e.baseState=s,_o(e,Me,typeof l=="function"?l:va)}function zp(e,t,s,l,c){if(yi(e))throw Error(o(485));if(e=t.action,e!==null){var d={payload:c,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(p){d.listeners.push(p)}};S.T!==null?s(!0):d.isTransition=!1,l(d),s=t.pending,s===null?(d.next=t.pending=d,Pd(t,d)):(d.next=s.next,t.pending=s.next=d)}}function Pd(e,t){var s=t.action,l=t.payload,c=e.state;if(t.isTransition){var d=S.T,p={};S.T=p;try{var b=s(c,l),C=S.S;C!==null&&C(p,b),Yd(e,t,b)}catch($){No(e,t,$)}finally{d!==null&&p.types!==null&&(d.types=p.types),S.T=d}}else try{d=s(c,l),Yd(e,t,d)}catch($){No(e,t,$)}}function Yd(e,t,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(l){Kd(e,t,l)},function(l){return No(e,t,l)}):Kd(e,t,s)}function Kd(e,t,s){t.status="fulfilled",t.value=s,Qd(t),e.state=s,t=e.pending,t!==null&&(s=t.next,s===t?e.pending=null:(s=s.next,t.next=s,Pd(e,s)))}function No(e,t,s){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do t.status="rejected",t.reason=s,Qd(t),t=t.next;while(t!==l)}e.action=null}function Qd(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Xd(e,t){return t}function Jd(e,t){if(Ee){var s=$e.formState;if(s!==null){e:{var l=xe;if(Ee){if(He){t:{for(var c=He,d=Qt;c.nodeType!==8;){if(!d){c=null;break t}if(c=Jt(c.nextSibling),c===null){c=null;break t}}d=c.data,c=d==="F!"||d==="F"?c:null}if(c){He=Jt(c.nextSibling),l=c.data==="F!";break e}}La(l)}l=!1}l&&(t=s[0])}}return s=vt(),s.memoizedState=s.baseState=t,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Xd,lastRenderedState:t},s.queue=l,s=gh.bind(null,xe,l),l.dispatch=s,l=wo(!1),d=Oo.bind(null,xe,!1,l.queue),l=vt(),c={state:t,dispatch:null,action:e,pending:null},l.queue=c,s=zp.bind(null,xe,c,d,s),c.dispatch=s,l.memoizedState=e,[t,s,!1]}function Zd(e){var t=Fe();return Fd(t,Me,e)}function Fd(e,t,s){if(t=_o(e,t,Xd)[0],e=mi(va)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var l=Wn(t)}catch(p){throw p===Zs?ni:p}else l=t;t=Fe();var c=t.queue,d=c.dispatch;return s!==t.memoizedState&&(xe.flags|=2048,an(9,{destroy:void 0},Mp.bind(null,c,s),null)),[l,d,e]}function Mp(e,t){e.action=t}function Wd(e){var t=Fe(),s=Me;if(s!==null)return Fd(t,s,e);Fe(),t=t.memoizedState,s=Fe();var l=s.queue.dispatch;return s.memoizedState=e,[t,l,!1]}function an(e,t,s,l){return e={tag:e,create:s,deps:l,inst:t,next:null},t=xe.updateQueue,t===null&&(t=hi(),xe.updateQueue=t),s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e),e}function eh(){return Fe().memoizedState}function gi(e,t,s,l){var c=vt();xe.flags|=e,c.memoizedState=an(1|t,{destroy:void 0},s,l===void 0?null:l)}function pi(e,t,s,l){var c=Fe();l=l===void 0?null:l;var d=c.memoizedState.inst;Me!==null&&l!==null&&go(l,Me.memoizedState.deps)?c.memoizedState=an(t,d,s,l):(xe.flags|=e,c.memoizedState=an(1|t,d,s,l))}function th(e,t){gi(8390656,8,e,t)}function So(e,t){pi(2048,8,e,t)}function Bp(e){xe.flags|=4;var t=xe.updateQueue;if(t===null)t=hi(),xe.updateQueue=t,t.events=[e];else{var s=t.events;s===null?t.events=[e]:s.push(e)}}function ah(e){var t=Fe().memoizedState;return Bp({ref:t,nextImpl:e}),function(){if((De&2)!==0)throw Error(o(440));return t.impl.apply(void 0,arguments)}}function sh(e,t){return pi(4,2,e,t)}function nh(e,t){return pi(4,4,e,t)}function rh(e,t){if(typeof t=="function"){e=e();var s=t(e);return function(){typeof s=="function"?s():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ih(e,t,s){s=s!=null?s.concat([e]):null,pi(4,4,rh.bind(null,t,e),s)}function To(){}function lh(e,t){var s=Fe();t=t===void 0?null:t;var l=s.memoizedState;return t!==null&&go(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function oh(e,t){var s=Fe();t=t===void 0?null:t;var l=s.memoizedState;if(t!==null&&go(t,l[1]))return l[0];if(l=e(),_s){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[l,t],l}function Eo(e,t,s){return s===void 0||(xa&1073741824)!==0&&(Se&261930)===0?e.memoizedState=t:(e.memoizedState=s,e=uf(),xe.lanes|=e,Ka|=e,s)}function ch(e,t,s,l){return kt(s,t)?s:Ws.current!==null?(e=Eo(e,s,l),kt(e,t)||(tt=!0),e):(xa&42)===0||(xa&1073741824)!==0&&(Se&261930)===0?(tt=!0,e.memoizedState=s):(e=uf(),xe.lanes|=e,Ka|=e,t)}function uh(e,t,s,l,c){var d=F.p;F.p=d!==0&&8>d?d:8;var p=S.T,b={};S.T=b,Oo(e,!1,t,s);try{var C=c(),$=S.S;if($!==null&&$(b,C),C!==null&&typeof C=="object"&&typeof C.then=="function"){var Y=Dp(C,l);er(e,t,Y,Bt(e))}else er(e,t,l,Bt(e))}catch(J){er(e,t,{then:function(){},status:"rejected",reason:J},Bt())}finally{F.p=d,p!==null&&b.types!==null&&(p.types=b.types),S.T=p}}function Lp(){}function Co(e,t,s,l){if(e.tag!==5)throw Error(o(476));var c=dh(e).queue;uh(e,c,t,se,s===null?Lp:function(){return hh(e),s(l)})}function dh(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:se},next:null};var s={};return t.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:va,lastRenderedState:s},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function hh(e){var t=dh(e);t.next===null&&(t=e.alternate.memoizedState),er(e,t.next.queue,{},Bt())}function Ao(){return ht(yr)}function fh(){return Fe().memoizedState}function mh(){return Fe().memoizedState}function $p(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var s=Bt();e=Va(s);var l=Ha(t,e,s);l!==null&&(Et(l,t,s),Xn(l,t,s)),t={cache:so()},e.payload=t;return}t=t.return}}function qp(e,t,s){var l=Bt();s={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},yi(e)?ph(t,s):(s=Yl(e,t,s,l),s!==null&&(Et(s,e,l),yh(s,t,l)))}function gh(e,t,s){var l=Bt();er(e,t,s,l)}function er(e,t,s,l){var c={lane:l,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(yi(e))ph(t,c);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var p=t.lastRenderedState,b=d(p,s);if(c.hasEagerState=!0,c.eagerState=b,kt(b,p))return Zr(e,t,c,0),$e===null&&Jr(),!1}catch{}finally{}if(s=Yl(e,t,c,l),s!==null)return Et(s,e,l),yh(s,t,l),!0}return!1}function Oo(e,t,s,l){if(l={lane:2,revertLane:oc(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},yi(e)){if(t)throw Error(o(479))}else t=Yl(e,s,l,2),t!==null&&Et(t,e,2)}function yi(e){var t=e.alternate;return e===xe||t!==null&&t===xe}function ph(e,t){en=ui=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function yh(e,t,s){if((s&4194048)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,ju(e,s)}}var tr={readContext:ht,use:fi,useCallback:Qe,useContext:Qe,useEffect:Qe,useImperativeHandle:Qe,useLayoutEffect:Qe,useInsertionEffect:Qe,useMemo:Qe,useReducer:Qe,useRef:Qe,useState:Qe,useDebugValue:Qe,useDeferredValue:Qe,useTransition:Qe,useSyncExternalStore:Qe,useId:Qe,useHostTransitionStatus:Qe,useFormState:Qe,useActionState:Qe,useOptimistic:Qe,useMemoCache:Qe,useCacheRefresh:Qe};tr.useEffectEvent=Qe;var xh={readContext:ht,use:fi,useCallback:function(e,t){return vt().memoizedState=[e,t===void 0?null:t],e},useContext:ht,useEffect:th,useImperativeHandle:function(e,t,s){s=s!=null?s.concat([e]):null,gi(4194308,4,rh.bind(null,t,e),s)},useLayoutEffect:function(e,t){return gi(4194308,4,e,t)},useInsertionEffect:function(e,t){gi(4,2,e,t)},useMemo:function(e,t){var s=vt();t=t===void 0?null:t;var l=e();if(_s){Ra(!0);try{e()}finally{Ra(!1)}}return s.memoizedState=[l,t],l},useReducer:function(e,t,s){var l=vt();if(s!==void 0){var c=s(t);if(_s){Ra(!0);try{s(t)}finally{Ra(!1)}}}else c=t;return l.memoizedState=l.baseState=c,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:c},l.queue=e,e=e.dispatch=qp.bind(null,xe,e),[l.memoizedState,e]},useRef:function(e){var t=vt();return e={current:e},t.memoizedState=e},useState:function(e){e=wo(e);var t=e.queue,s=gh.bind(null,xe,t);return t.dispatch=s,[e.memoizedState,s]},useDebugValue:To,useDeferredValue:function(e,t){var s=vt();return Eo(s,e,t)},useTransition:function(){var e=wo(!1);return e=uh.bind(null,xe,e.queue,!0,!1),vt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,s){var l=xe,c=vt();if(Ee){if(s===void 0)throw Error(o(407));s=s()}else{if(s=t(),$e===null)throw Error(o(349));(Se&127)!==0||$d(l,t,s)}c.memoizedState=s;var d={value:s,getSnapshot:t};return c.queue=d,th(Vd.bind(null,l,d,e),[e]),l.flags|=2048,an(9,{destroy:void 0},qd.bind(null,l,d,s,t),null),s},useId:function(){var e=vt(),t=$e.identifierPrefix;if(Ee){var s=oa,l=la;s=(l&~(1<<32-Ot(l)-1)).toString(32)+s,t="_"+t+"R_"+s,s=di++,0<s&&(t+="H"+s.toString(32)),t+="_"}else s=Rp++,t="_"+t+"r_"+s.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Ao,useFormState:Jd,useActionState:Jd,useOptimistic:function(e){var t=vt();t.memoizedState=t.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=s,t=Oo.bind(null,xe,!0,s),s.dispatch=t,[e,t]},useMemoCache:bo,useCacheRefresh:function(){return vt().memoizedState=$p.bind(null,xe)},useEffectEvent:function(e){var t=vt(),s={impl:e};return t.memoizedState=s,function(){if((De&2)!==0)throw Error(o(440));return s.impl.apply(void 0,arguments)}}},ko={readContext:ht,use:fi,useCallback:lh,useContext:ht,useEffect:So,useImperativeHandle:ih,useInsertionEffect:sh,useLayoutEffect:nh,useMemo:oh,useReducer:mi,useRef:eh,useState:function(){return mi(va)},useDebugValue:To,useDeferredValue:function(e,t){var s=Fe();return ch(s,Me.memoizedState,e,t)},useTransition:function(){var e=mi(va)[0],t=Fe().memoizedState;return[typeof e=="boolean"?e:Wn(e),t]},useSyncExternalStore:Ld,useId:fh,useHostTransitionStatus:Ao,useFormState:Zd,useActionState:Zd,useOptimistic:function(e,t){var s=Fe();return Gd(s,Me,e,t)},useMemoCache:bo,useCacheRefresh:mh};ko.useEffectEvent=ah;var vh={readContext:ht,use:fi,useCallback:lh,useContext:ht,useEffect:So,useImperativeHandle:ih,useInsertionEffect:sh,useLayoutEffect:nh,useMemo:oh,useReducer:jo,useRef:eh,useState:function(){return jo(va)},useDebugValue:To,useDeferredValue:function(e,t){var s=Fe();return Me===null?Eo(s,e,t):ch(s,Me.memoizedState,e,t)},useTransition:function(){var e=jo(va)[0],t=Fe().memoizedState;return[typeof e=="boolean"?e:Wn(e),t]},useSyncExternalStore:Ld,useId:fh,useHostTransitionStatus:Ao,useFormState:Wd,useActionState:Wd,useOptimistic:function(e,t){var s=Fe();return Me!==null?Gd(s,Me,e,t):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:bo,useCacheRefresh:mh};vh.useEffectEvent=ah;function Do(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:w({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Ro={enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Bt(),c=Va(l);c.payload=t,s!=null&&(c.callback=s),t=Ha(e,c,l),t!==null&&(Et(t,e,l),Xn(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Bt(),c=Va(l);c.tag=1,c.payload=t,s!=null&&(c.callback=s),t=Ha(e,c,l),t!==null&&(Et(t,e,l),Xn(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Bt(),l=Va(s);l.tag=2,t!=null&&(l.callback=t),t=Ha(e,l,s),t!==null&&(Et(t,e,s),Xn(t,e,s))}};function bh(e,t,s,l,c,d,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,p):t.prototype&&t.prototype.isPureReactComponent?!Vn(s,l)||!Vn(c,d):!0}function _h(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&Ro.enqueueReplaceState(t,t.state,null)}function js(e,t){var s=t;if("ref"in t){s={};for(var l in t)l!=="ref"&&(s[l]=t[l])}if(e=e.defaultProps){s===t&&(s=w({},s));for(var c in e)s[c]===void 0&&(s[c]=e[c])}return s}function jh(e){Xr(e)}function wh(e){console.error(e)}function Nh(e){Xr(e)}function xi(e,t){try{var s=e.onUncaughtError;s(t.value,{componentStack:t.stack})}catch(l){setTimeout(function(){throw l})}}function Sh(e,t,s){try{var l=e.onCaughtError;l(s.value,{componentStack:s.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(c){setTimeout(function(){throw c})}}function Uo(e,t,s){return s=Va(s),s.tag=3,s.payload={element:null},s.callback=function(){xi(e,t)},s}function Th(e){return e=Va(e),e.tag=3,e}function Eh(e,t,s,l){var c=s.type.getDerivedStateFromError;if(typeof c=="function"){var d=l.value;e.payload=function(){return c(d)},e.callback=function(){Sh(t,s,l)}}var p=s.stateNode;p!==null&&typeof p.componentDidCatch=="function"&&(e.callback=function(){Sh(t,s,l),typeof c!="function"&&(Qa===null?Qa=new Set([this]):Qa.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function Vp(e,t,s,l,c){if(s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(t=s.alternate,t!==null&&Qs(t,s,c,!0),s=Rt.current,s!==null){switch(s.tag){case 31:case 13:return Xt===null?Oi():s.alternate===null&&Xe===0&&(Xe=3),s.flags&=-257,s.flags|=65536,s.lanes=c,l===ri?s.flags|=16384:(t=s.updateQueue,t===null?s.updateQueue=new Set([l]):t.add(l),rc(e,l,c)),!1;case 22:return s.flags|=65536,l===ri?s.flags|=16384:(t=s.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([l])},s.updateQueue=t):(s=t.retryQueue,s===null?t.retryQueue=new Set([l]):s.add(l)),rc(e,l,c)),!1}throw Error(o(435,s.tag))}return rc(e,l,c),Oi(),!1}if(Ee)return t=Rt.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=c,l!==Fl&&(e=Error(o(422),{cause:l}),Gn(Pt(e,s)))):(l!==Fl&&(t=Error(o(423),{cause:l}),Gn(Pt(t,s))),e=e.current.alternate,e.flags|=65536,c&=-c,e.lanes|=c,l=Pt(l,s),c=Uo(e.stateNode,l,c),co(e,c),Xe!==4&&(Xe=2)),!1;var d=Error(o(520),{cause:l});if(d=Pt(d,s),cr===null?cr=[d]:cr.push(d),Xe!==4&&(Xe=2),t===null)return!0;l=Pt(l,s),s=t;do{switch(s.tag){case 3:return s.flags|=65536,e=c&-c,s.lanes|=e,e=Uo(s.stateNode,l,e),co(s,e),!1;case 1:if(t=s.type,d=s.stateNode,(s.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Qa===null||!Qa.has(d))))return s.flags|=65536,c&=-c,s.lanes|=c,c=Th(c),Eh(c,e,s,l),co(s,c),!1}s=s.return}while(s!==null);return!1}var zo=Error(o(461)),tt=!1;function ft(e,t,s,l){t.child=e===null?kd(t,null,s,l):bs(t,e.child,s,l)}function Ch(e,t,s,l,c){s=s.render;var d=t.ref;if("ref"in l){var p={};for(var b in l)b!=="ref"&&(p[b]=l[b])}else p=l;return ps(t),l=po(e,t,s,p,d,c),b=yo(),e!==null&&!tt?(xo(e,t,c),ba(e,t,c)):(Ee&&b&&Jl(t),t.flags|=1,ft(e,t,l,c),t.child)}function Ah(e,t,s,l,c){if(e===null){var d=s.type;return typeof d=="function"&&!Kl(d)&&d.defaultProps===void 0&&s.compare===null?(t.tag=15,t.type=d,Oh(e,t,d,l,c)):(e=Wr(s.type,null,l,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!Io(e,c)){var p=d.memoizedProps;if(s=s.compare,s=s!==null?s:Vn,s(p,l)&&e.ref===t.ref)return ba(e,t,c)}return t.flags|=1,e=ma(d,l),e.ref=t.ref,e.return=t,t.child=e}function Oh(e,t,s,l,c){if(e!==null){var d=e.memoizedProps;if(Vn(d,l)&&e.ref===t.ref)if(tt=!1,t.pendingProps=l=d,Io(e,c))(e.flags&131072)!==0&&(tt=!0);else return t.lanes=e.lanes,ba(e,t,c)}return Mo(e,t,s,l,c)}function kh(e,t,s,l){var c=l.children,d=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((t.flags&128)!==0){if(d=d!==null?d.baseLanes|s:s,e!==null){for(l=t.child=e.child,c=0;l!==null;)c=c|l.lanes|l.childLanes,l=l.sibling;l=c&~d}else l=0,t.child=null;return Dh(e,t,d,s,l)}if((s&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&si(t,d!==null?d.cachePool:null),d!==null?Ud(t,d):ho(),zd(t);else return l=t.lanes=536870912,Dh(e,t,d!==null?d.baseLanes|s:s,s,l)}else d!==null?(si(t,d.cachePool),Ud(t,d),Ga(),t.memoizedState=null):(e!==null&&si(t,null),ho(),Ga());return ft(e,t,c,s),t.child}function ar(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Dh(e,t,s,l,c){var d=ro();return d=d===null?null:{parent:We._currentValue,pool:d},t.memoizedState={baseLanes:s,cachePool:d},e!==null&&si(t,null),ho(),zd(t),e!==null&&Qs(e,t,l,!0),t.childLanes=c,null}function vi(e,t){return t=_i({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Rh(e,t,s){return bs(t,e.child,null,s),e=vi(t,t.pendingProps),e.flags|=2,Ut(t),t.memoizedState=null,e}function Hp(e,t,s){var l=t.pendingProps,c=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ee){if(l.mode==="hidden")return e=vi(t,l),t.lanes=536870912,ar(null,e);if(mo(t),(e=He)?(e=Yf(e,Qt),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ma!==null?{id:la,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},s=pd(e),s.return=t,t.child=s,dt=t,He=null)):e=null,e===null)throw La(t);return t.lanes=536870912,null}return vi(t,l)}var d=e.memoizedState;if(d!==null){var p=d.dehydrated;if(mo(t),c)if(t.flags&256)t.flags&=-257,t=Rh(e,t,s);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(o(558));else if(tt||Qs(e,t,s,!1),c=(s&e.childLanes)!==0,tt||c){if(l=$e,l!==null&&(p=wu(l,s),p!==0&&p!==d.retryLane))throw d.retryLane=p,hs(e,p),Et(l,e,p),zo;Oi(),t=Rh(e,t,s)}else e=d.treeContext,He=Jt(p.nextSibling),dt=t,Ee=!0,Ba=null,Qt=!1,e!==null&&vd(t,e),t=vi(t,l),t.flags|=4096;return t}return e=ma(e.child,{mode:l.mode,children:l.children}),e.ref=t.ref,t.child=e,e.return=t,e}function bi(e,t){var s=t.ref;if(s===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(o(284));(e===null||e.ref!==s)&&(t.flags|=4194816)}}function Mo(e,t,s,l,c){return ps(t),s=po(e,t,s,l,void 0,c),l=yo(),e!==null&&!tt?(xo(e,t,c),ba(e,t,c)):(Ee&&l&&Jl(t),t.flags|=1,ft(e,t,s,c),t.child)}function Uh(e,t,s,l,c,d){return ps(t),t.updateQueue=null,s=Bd(t,l,s,c),Md(e),l=yo(),e!==null&&!tt?(xo(e,t,d),ba(e,t,d)):(Ee&&l&&Jl(t),t.flags|=1,ft(e,t,s,d),t.child)}function zh(e,t,s,l,c){if(ps(t),t.stateNode===null){var d=Gs,p=s.contextType;typeof p=="object"&&p!==null&&(d=ht(p)),d=new s(l,d),t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Ro,t.stateNode=d,d._reactInternals=t,d=t.stateNode,d.props=l,d.state=t.memoizedState,d.refs={},lo(t),p=s.contextType,d.context=typeof p=="object"&&p!==null?ht(p):Gs,d.state=t.memoizedState,p=s.getDerivedStateFromProps,typeof p=="function"&&(Do(t,s,p,l),d.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(p=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),p!==d.state&&Ro.enqueueReplaceState(d,d.state,null),Zn(t,l,d,c),Jn(),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!0}else if(e===null){d=t.stateNode;var b=t.memoizedProps,C=js(s,b);d.props=C;var $=d.context,Y=s.contextType;p=Gs,typeof Y=="object"&&Y!==null&&(p=ht(Y));var J=s.getDerivedStateFromProps;Y=typeof J=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=t.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||$!==p)&&_h(t,d,l,p),qa=!1;var V=t.memoizedState;d.state=V,Zn(t,l,d,c),Jn(),$=t.memoizedState,b||V!==$||qa?(typeof J=="function"&&(Do(t,s,J,l),$=t.memoizedState),(C=qa||bh(t,s,C,l,V,$,p))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(t.flags|=4194308)):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=$),d.props=l,d.state=$,d.context=p,l=C):(typeof d.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{d=t.stateNode,oo(e,t),p=t.memoizedProps,Y=js(s,p),d.props=Y,J=t.pendingProps,V=d.context,$=s.contextType,C=Gs,typeof $=="object"&&$!==null&&(C=ht($)),b=s.getDerivedStateFromProps,($=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(p!==J||V!==C)&&_h(t,d,l,C),qa=!1,V=t.memoizedState,d.state=V,Zn(t,l,d,c),Jn();var I=t.memoizedState;p!==J||V!==I||qa||e!==null&&e.dependencies!==null&&ti(e.dependencies)?(typeof b=="function"&&(Do(t,s,b,l),I=t.memoizedState),(Y=qa||bh(t,s,Y,l,V,I,C)||e!==null&&e.dependencies!==null&&ti(e.dependencies))?($||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,I,C),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,I,C)),typeof d.componentDidUpdate=="function"&&(t.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=I),d.props=l,d.state=I,d.context=C,l=Y):(typeof d.componentDidUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||p===e.memoizedProps&&V===e.memoizedState||(t.flags|=1024),l=!1)}return d=l,bi(e,t),l=(t.flags&128)!==0,d||l?(d=t.stateNode,s=l&&typeof s.getDerivedStateFromError!="function"?null:d.render(),t.flags|=1,e!==null&&l?(t.child=bs(t,e.child,null,c),t.child=bs(t,null,s,c)):ft(e,t,s,c),t.memoizedState=d.state,e=t.child):e=ba(e,t,c),e}function Mh(e,t,s,l){return ms(),t.flags|=256,ft(e,t,s,l),t.child}var Bo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Lo(e){return{baseLanes:e,cachePool:Sd()}}function $o(e,t,s){return e=e!==null?e.childLanes&~s:0,t&&(e|=Mt),e}function Bh(e,t,s){var l=t.pendingProps,c=!1,d=(t.flags&128)!==0,p;if((p=d)||(p=e!==null&&e.memoizedState===null?!1:(Ze.current&2)!==0),p&&(c=!0,t.flags&=-129),p=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ee){if(c?Ia(t):Ga(),(e=He)?(e=Yf(e,Qt),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:Ma!==null?{id:la,overflow:oa}:null,retryLane:536870912,hydrationErrors:null},s=pd(e),s.return=t,t.child=s,dt=t,He=null)):e=null,e===null)throw La(t);return _c(e)?t.lanes=32:t.lanes=536870912,null}var b=l.children;return l=l.fallback,c?(Ga(),c=t.mode,b=_i({mode:"hidden",children:b},c),l=fs(l,c,s,null),b.return=t,l.return=t,b.sibling=l,t.child=b,l=t.child,l.memoizedState=Lo(s),l.childLanes=$o(e,p,s),t.memoizedState=Bo,ar(null,l)):(Ia(t),qo(t,b))}var C=e.memoizedState;if(C!==null&&(b=C.dehydrated,b!==null)){if(d)t.flags&256?(Ia(t),t.flags&=-257,t=Vo(e,t,s)):t.memoizedState!==null?(Ga(),t.child=e.child,t.flags|=128,t=null):(Ga(),b=l.fallback,c=t.mode,l=_i({mode:"visible",children:l.children},c),b=fs(b,c,s,null),b.flags|=2,l.return=t,b.return=t,l.sibling=b,t.child=l,bs(t,e.child,null,s),l=t.child,l.memoizedState=Lo(s),l.childLanes=$o(e,p,s),t.memoizedState=Bo,t=ar(null,l));else if(Ia(t),_c(b)){if(p=b.nextSibling&&b.nextSibling.dataset,p)var $=p.dgst;p=$,l=Error(o(419)),l.stack="",l.digest=p,Gn({value:l,source:null,stack:null}),t=Vo(e,t,s)}else if(tt||Qs(e,t,s,!1),p=(s&e.childLanes)!==0,tt||p){if(p=$e,p!==null&&(l=wu(p,s),l!==0&&l!==C.retryLane))throw C.retryLane=l,hs(e,l),Et(p,e,l),zo;bc(b)||Oi(),t=Vo(e,t,s)}else bc(b)?(t.flags|=192,t.child=e.child,t=null):(e=C.treeContext,He=Jt(b.nextSibling),dt=t,Ee=!0,Ba=null,Qt=!1,e!==null&&vd(t,e),t=qo(t,l.children),t.flags|=4096);return t}return c?(Ga(),b=l.fallback,c=t.mode,C=e.child,$=C.sibling,l=ma(C,{mode:"hidden",children:l.children}),l.subtreeFlags=C.subtreeFlags&65011712,$!==null?b=ma($,b):(b=fs(b,c,s,null),b.flags|=2),b.return=t,l.return=t,l.sibling=b,t.child=l,ar(null,l),l=t.child,b=e.child.memoizedState,b===null?b=Lo(s):(c=b.cachePool,c!==null?(C=We._currentValue,c=c.parent!==C?{parent:C,pool:C}:c):c=Sd(),b={baseLanes:b.baseLanes|s,cachePool:c}),l.memoizedState=b,l.childLanes=$o(e,p,s),t.memoizedState=Bo,ar(e.child,l)):(Ia(t),s=e.child,e=s.sibling,s=ma(s,{mode:"visible",children:l.children}),s.return=t,s.sibling=null,e!==null&&(p=t.deletions,p===null?(t.deletions=[e],t.flags|=16):p.push(e)),t.child=s,t.memoizedState=null,s)}function qo(e,t){return t=_i({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function _i(e,t){return e=Dt(22,e,null,t),e.lanes=0,e}function Vo(e,t,s){return bs(t,e.child,null,s),e=qo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lh(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),to(e.return,t,s)}function Ho(e,t,s,l,c,d){var p=e.memoizedState;p===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:c,treeForkCount:d}:(p.isBackwards=t,p.rendering=null,p.renderingStartTime=0,p.last=l,p.tail=s,p.tailMode=c,p.treeForkCount=d)}function $h(e,t,s){var l=t.pendingProps,c=l.revealOrder,d=l.tail;l=l.children;var p=Ze.current,b=(p&2)!==0;if(b?(p=p&1|2,t.flags|=128):p&=1,B(Ze,p),ft(e,t,l,s),l=Ee?In:0,!b&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lh(e,s,t);else if(e.tag===19)Lh(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(c){case"forwards":for(s=t.child,c=null;s!==null;)e=s.alternate,e!==null&&ci(e)===null&&(c=s),s=s.sibling;s=c,s===null?(c=t.child,t.child=null):(c=s.sibling,s.sibling=null),Ho(t,!1,c,s,d,l);break;case"backwards":case"unstable_legacy-backwards":for(s=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&ci(e)===null){t.child=c;break}e=c.sibling,c.sibling=s,s=c,c=e}Ho(t,!0,s,null,d,l);break;case"together":Ho(t,!1,null,null,void 0,l);break;default:t.memoizedState=null}return t.child}function ba(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ka|=t.lanes,(s&t.childLanes)===0)if(e!==null){if(Qs(e,t,s,!1),(s&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,s=ma(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=ma(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function Io(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&ti(e)))}function Ip(e,t,s){switch(t.tag){case 3:lt(t,t.stateNode.containerInfo),$a(t,We,e.memoizedState.cache),ms();break;case 27:case 5:Da(t);break;case 4:lt(t,t.stateNode.containerInfo);break;case 10:$a(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,mo(t),null;break;case 13:var l=t.memoizedState;if(l!==null)return l.dehydrated!==null?(Ia(t),t.flags|=128,null):(s&t.child.childLanes)!==0?Bh(e,t,s):(Ia(t),e=ba(e,t,s),e!==null?e.sibling:null);Ia(t);break;case 19:var c=(e.flags&128)!==0;if(l=(s&t.childLanes)!==0,l||(Qs(e,t,s,!1),l=(s&t.childLanes)!==0),c){if(l)return $h(e,t,s);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),B(Ze,Ze.current),l)break;return null;case 22:return t.lanes=0,kh(e,t,s,t.pendingProps);case 24:$a(t,We,e.memoizedState.cache)}return ba(e,t,s)}function qh(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps)tt=!0;else{if(!Io(e,s)&&(t.flags&128)===0)return tt=!1,Ip(e,t,s);tt=(e.flags&131072)!==0}else tt=!1,Ee&&(t.flags&1048576)!==0&&xd(t,In,t.index);switch(t.lanes=0,t.tag){case 16:e:{var l=t.pendingProps;if(e=xs(t.elementType),t.type=e,typeof e=="function")Kl(e)?(l=js(e,l),t.tag=1,t=zh(null,t,e,l,s)):(t.tag=0,t=Mo(null,t,e,l,s));else{if(e!=null){var c=e.$$typeof;if(c===E){t.tag=11,t=Ch(null,t,e,l,s);break e}else if(c===K){t.tag=14,t=Ah(null,t,e,l,s);break e}}throw t=be(e)||e,Error(o(306,t,""))}}return t;case 0:return Mo(e,t,t.type,t.pendingProps,s);case 1:return l=t.type,c=js(l,t.pendingProps),zh(e,t,l,c,s);case 3:e:{if(lt(t,t.stateNode.containerInfo),e===null)throw Error(o(387));l=t.pendingProps;var d=t.memoizedState;c=d.element,oo(e,t),Zn(t,l,null,s);var p=t.memoizedState;if(l=p.cache,$a(t,We,l),l!==d.cache&&ao(t,[We],s,!0),Jn(),l=p.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:p.cache},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){t=Mh(e,t,l,s);break e}else if(l!==c){c=Pt(Error(o(424)),t),Gn(c),t=Mh(e,t,l,s);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(He=Jt(e.firstChild),dt=t,Ee=!0,Ba=null,Qt=!0,s=kd(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling}else{if(ms(),l===c){t=ba(e,t,s);break e}ft(e,t,l,s)}t=t.child}return t;case 26:return bi(e,t),e===null?(s=Ff(t.type,null,t.pendingProps,null))?t.memoizedState=s:Ee||(s=t.type,e=t.pendingProps,l=Bi(ue.current).createElement(s),l[ut]=t,l[_t]=e,mt(l,s,e),ot(l),t.stateNode=l):t.memoizedState=Ff(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Da(t),e===null&&Ee&&(l=t.stateNode=Xf(t.type,t.pendingProps,ue.current),dt=t,Qt=!0,c=He,Fa(t.type)?(jc=c,He=Jt(l.firstChild)):He=c),ft(e,t,t.pendingProps.children,s),bi(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ee&&((c=l=He)&&(l=v0(l,t.type,t.pendingProps,Qt),l!==null?(t.stateNode=l,dt=t,He=Jt(l.firstChild),Qt=!1,c=!0):c=!1),c||La(t)),Da(t),c=t.type,d=t.pendingProps,p=e!==null?e.memoizedProps:null,l=d.children,yc(c,d)?l=null:p!==null&&yc(c,p)&&(t.flags|=32),t.memoizedState!==null&&(c=po(e,t,Up,null,null,s),yr._currentValue=c),bi(e,t),ft(e,t,l,s),t.child;case 6:return e===null&&Ee&&((e=s=He)&&(s=b0(s,t.pendingProps,Qt),s!==null?(t.stateNode=s,dt=t,He=null,e=!0):e=!1),e||La(t)),null;case 13:return Bh(e,t,s);case 4:return lt(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=bs(t,null,l,s):ft(e,t,l,s),t.child;case 11:return Ch(e,t,t.type,t.pendingProps,s);case 7:return ft(e,t,t.pendingProps,s),t.child;case 8:return ft(e,t,t.pendingProps.children,s),t.child;case 12:return ft(e,t,t.pendingProps.children,s),t.child;case 10:return l=t.pendingProps,$a(t,t.type,l.value),ft(e,t,l.children,s),t.child;case 9:return c=t.type._context,l=t.pendingProps.children,ps(t),c=ht(c),l=l(c),t.flags|=1,ft(e,t,l,s),t.child;case 14:return Ah(e,t,t.type,t.pendingProps,s);case 15:return Oh(e,t,t.type,t.pendingProps,s);case 19:return $h(e,t,s);case 31:return Hp(e,t,s);case 22:return kh(e,t,s,t.pendingProps);case 24:return ps(t),l=ht(We),e===null?(c=ro(),c===null&&(c=$e,d=so(),c.pooledCache=d,d.refCount++,d!==null&&(c.pooledCacheLanes|=s),c=d),t.memoizedState={parent:l,cache:c},lo(t),$a(t,We,c)):((e.lanes&s)!==0&&(oo(e,t),Zn(t,null,null,s),Jn()),c=e.memoizedState,d=t.memoizedState,c.parent!==l?(c={parent:l,cache:l},t.memoizedState=c,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=c),$a(t,We,l)):(l=d.cache,$a(t,We,l),l!==c.cache&&ao(t,[We],s,!0))),ft(e,t,t.pendingProps.children,s),t.child;case 29:throw t.pendingProps}throw Error(o(156,t.tag))}function _a(e){e.flags|=4}function Go(e,t,s,l,c){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(c&335544128)===c)if(e.stateNode.complete)e.flags|=8192;else if(mf())e.flags|=8192;else throw vs=ri,io}else e.flags&=-16777217}function Vh(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!sm(t))if(mf())e.flags|=8192;else throw vs=ri,io}function ji(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?bu():536870912,e.lanes|=t,ln|=t)}function sr(e,t){if(!Ee)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ie(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags&65011712,l|=c.flags&65011712,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)s|=c.lanes|c.childLanes,l|=c.subtreeFlags,l|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function Gp(e,t,s){var l=t.pendingProps;switch(Zl(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ie(t),null;case 1:return Ie(t),null;case 3:return s=t.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),t.memoizedState.cache!==l&&(t.flags|=2048),ya(We),Ge(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ks(t)?_a(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Wl())),Ie(t),null;case 26:var c=t.type,d=t.memoizedState;return e===null?(_a(t),d!==null?(Ie(t),Vh(t,d)):(Ie(t),Go(t,c,null,l,s))):d?d!==e.memoizedState?(_a(t),Ie(t),Vh(t,d)):(Ie(t),t.flags&=-16777217):(e=e.memoizedProps,e!==l&&_a(t),Ie(t),Go(t,c,e,l,s)),null;case 27:if(Rr(t),s=ue.current,c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Ie(t),null}e=te.current,Ks(t)?bd(t):(e=Xf(c,l,s),t.stateNode=e,_a(t))}return Ie(t),null;case 5:if(Rr(t),c=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(!l){if(t.stateNode===null)throw Error(o(166));return Ie(t),null}if(d=te.current,Ks(t))bd(t);else{var p=Bi(ue.current);switch(d){case 1:d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":d=p.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":d=p.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":d=p.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?p.createElement("select",{is:l.is}):p.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?p.createElement(c,{is:l.is}):p.createElement(c)}}d[ut]=t,d[_t]=l;e:for(p=t.child;p!==null;){if(p.tag===5||p.tag===6)d.appendChild(p.stateNode);else if(p.tag!==4&&p.tag!==27&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}t.stateNode=d;e:switch(mt(d,c,l),c){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&_a(t)}}return Ie(t),Go(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,s),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==l&&_a(t);else{if(typeof l!="string"&&t.stateNode===null)throw Error(o(166));if(e=ue.current,Ks(t)){if(e=t.stateNode,s=t.memoizedProps,l=null,c=dt,c!==null)switch(c.tag){case 27:case 5:l=c.memoizedProps}e[ut]=t,e=!!(e.nodeValue===s||l!==null&&l.suppressHydrationWarning===!0||Lf(e.nodeValue,s)),e||La(t,!0)}else e=Bi(e).createTextNode(l),e[ut]=t,t.stateNode=e}return Ie(t),null;case 31:if(s=t.memoizedState,e===null||e.memoizedState!==null){if(l=Ks(t),s!==null){if(e===null){if(!l)throw Error(o(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(557));e[ut]=t}else ms(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ie(t),e=!1}else s=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return t.flags&256?(Ut(t),t):(Ut(t),null);if((t.flags&128)!==0)throw Error(o(558))}return Ie(t),null;case 13:if(l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(c=Ks(t),l!==null&&l.dehydrated!==null){if(e===null){if(!c)throw Error(o(318));if(c=t.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(o(317));c[ut]=t}else ms(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Ie(t),c=!1}else c=Wl(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=c),c=!0;if(!c)return t.flags&256?(Ut(t),t):(Ut(t),null)}return Ut(t),(t.flags&128)!==0?(t.lanes=s,t):(s=l!==null,e=e!==null&&e.memoizedState!==null,s&&(l=t.child,c=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(c=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==c&&(l.flags|=2048)),s!==e&&s&&(t.child.flags|=8192),ji(t,t.updateQueue),Ie(t),null);case 4:return Ge(),e===null&&hc(t.stateNode.containerInfo),Ie(t),null;case 10:return ya(t.type),Ie(t),null;case 19:if(Q(Ze),l=t.memoizedState,l===null)return Ie(t),null;if(c=(t.flags&128)!==0,d=l.rendering,d===null)if(c)sr(l,!1);else{if(Xe!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(d=ci(e),d!==null){for(t.flags|=128,sr(l,!1),e=d.updateQueue,t.updateQueue=e,ji(t,e),t.subtreeFlags=0,e=s,s=t.child;s!==null;)gd(s,e),s=s.sibling;return B(Ze,Ze.current&1|2),Ee&&ga(t,l.treeForkCount),t.child}e=e.sibling}l.tail!==null&&Ct()>Ei&&(t.flags|=128,c=!0,sr(l,!1),t.lanes=4194304)}else{if(!c)if(e=ci(d),e!==null){if(t.flags|=128,c=!0,e=e.updateQueue,t.updateQueue=e,ji(t,e),sr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ee)return Ie(t),null}else 2*Ct()-l.renderingStartTime>Ei&&s!==536870912&&(t.flags|=128,c=!0,sr(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=Ct(),e.sibling=null,s=Ze.current,B(Ze,c?s&1|2:s&1),Ee&&ga(t,l.treeForkCount),e):(Ie(t),null);case 22:case 23:return Ut(t),fo(),l=t.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(t.flags|=8192):l&&(t.flags|=8192),l?(s&536870912)!==0&&(t.flags&128)===0&&(Ie(t),t.subtreeFlags&6&&(t.flags|=8192)):Ie(t),s=t.updateQueue,s!==null&&ji(t,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),l=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(l=t.memoizedState.cachePool.pool),l!==s&&(t.flags|=2048),e!==null&&Q(ys),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),ya(We),Ie(t),null;case 25:return null;case 30:return null}throw Error(o(156,t.tag))}function Pp(e,t){switch(Zl(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ya(We),Ge(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Rr(t),null;case 31:if(t.memoizedState!==null){if(Ut(t),t.alternate===null)throw Error(o(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(Ut(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ms()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Q(Ze),null;case 4:return Ge(),null;case 10:return ya(t.type),null;case 22:case 23:return Ut(t),fo(),e!==null&&Q(ys),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return ya(We),null;case 25:return null;default:return null}}function Hh(e,t){switch(Zl(t),t.tag){case 3:ya(We),Ge();break;case 26:case 27:case 5:Rr(t);break;case 4:Ge();break;case 31:t.memoizedState!==null&&Ut(t);break;case 13:Ut(t);break;case 19:Q(Ze);break;case 10:ya(t.type);break;case 22:case 23:Ut(t),fo(),e!==null&&Q(ys);break;case 24:ya(We)}}function nr(e,t){try{var s=t.updateQueue,l=s!==null?s.lastEffect:null;if(l!==null){var c=l.next;s=c;do{if((s.tag&e)===e){l=void 0;var d=s.create,p=s.inst;l=d(),p.destroy=l}s=s.next}while(s!==c)}}catch(b){Ue(t,t.return,b)}}function Pa(e,t,s){try{var l=t.updateQueue,c=l!==null?l.lastEffect:null;if(c!==null){var d=c.next;l=d;do{if((l.tag&e)===e){var p=l.inst,b=p.destroy;if(b!==void 0){p.destroy=void 0,c=t;var C=s,$=b;try{$()}catch(Y){Ue(c,C,Y)}}}l=l.next}while(l!==d)}}catch(Y){Ue(t,t.return,Y)}}function Ih(e){var t=e.updateQueue;if(t!==null){var s=e.stateNode;try{Rd(t,s)}catch(l){Ue(e,e.return,l)}}}function Gh(e,t,s){s.props=js(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(l){Ue(e,t,l)}}function rr(e,t){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof s=="function"?e.refCleanup=s(l):s.current=l}}catch(c){Ue(e,t,c)}}function ca(e,t){var s=e.ref,l=e.refCleanup;if(s!==null)if(typeof l=="function")try{l()}catch(c){Ue(e,t,c)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(c){Ue(e,t,c)}else s.current=null}function Ph(e){var t=e.type,s=e.memoizedProps,l=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":s.autoFocus&&l.focus();break e;case"img":s.src?l.src=s.src:s.srcSet&&(l.srcset=s.srcSet)}}catch(c){Ue(e,e.return,c)}}function Po(e,t,s){try{var l=e.stateNode;f0(l,e.type,s,t),l[_t]=t}catch(c){Ue(e,e.return,c)}}function Yh(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Fa(e.type)||e.tag===4}function Yo(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Yh(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ko(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,t):(t=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,t.appendChild(e),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ha));else if(l!==4&&(l===27&&Fa(e.type)&&(s=e.stateNode,t=null),e=e.child,e!==null))for(Ko(e,t,s),e=e.sibling;e!==null;)Ko(e,t,s),e=e.sibling}function wi(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(l===27&&Fa(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(wi(e,t,s),e=e.sibling;e!==null;)wi(e,t,s),e=e.sibling}function Kh(e){var t=e.stateNode,s=e.memoizedProps;try{for(var l=e.type,c=t.attributes;c.length;)t.removeAttributeNode(c[0]);mt(t,l,s),t[ut]=e,t[_t]=s}catch(d){Ue(e,e.return,d)}}var ja=!1,at=!1,Qo=!1,Qh=typeof WeakSet=="function"?WeakSet:Set,ct=null;function Yp(e,t){if(e=e.containerInfo,gc=Gi,e=id(e),ql(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var c=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{s.nodeType,d.nodeType}catch{s=null;break e}var p=0,b=-1,C=-1,$=0,Y=0,J=e,V=null;t:for(;;){for(var I;J!==s||c!==0&&J.nodeType!==3||(b=p+c),J!==d||l!==0&&J.nodeType!==3||(C=p+l),J.nodeType===3&&(p+=J.nodeValue.length),(I=J.firstChild)!==null;)V=J,J=I;for(;;){if(J===e)break t;if(V===s&&++$===c&&(b=p),V===d&&++Y===l&&(C=p),(I=J.nextSibling)!==null)break;J=V,V=J.parentNode}J=I}s=b===-1||C===-1?null:{start:b,end:C}}else s=null}s=s||{start:0,end:0}}else s=null;for(pc={focusedElem:e,selectionRange:s},Gi=!1,ct=t;ct!==null;)if(t=ct,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ct=e;else for(;ct!==null;){switch(t=ct,d=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)c=e[s],c.ref.impl=c.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,s=t,c=d.memoizedProps,d=d.memoizedState,l=s.stateNode;try{var ne=js(s.type,c);e=l.getSnapshotBeforeUpdate(ne,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(he){Ue(s,s.return,he)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,s=e.nodeType,s===9)vc(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vc(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(o(163))}if(e=t.sibling,e!==null){e.return=t.return,ct=e;break}ct=t.return}}function Xh(e,t,s){var l=s.flags;switch(s.tag){case 0:case 11:case 15:Na(e,s),l&4&&nr(5,s);break;case 1:if(Na(e,s),l&4)if(e=s.stateNode,t===null)try{e.componentDidMount()}catch(p){Ue(s,s.return,p)}else{var c=js(s.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(c,t,e.__reactInternalSnapshotBeforeUpdate)}catch(p){Ue(s,s.return,p)}}l&64&&Ih(s),l&512&&rr(s,s.return);break;case 3:if(Na(e,s),l&64&&(e=s.updateQueue,e!==null)){if(t=null,s.child!==null)switch(s.child.tag){case 27:case 5:t=s.child.stateNode;break;case 1:t=s.child.stateNode}try{Rd(e,t)}catch(p){Ue(s,s.return,p)}}break;case 27:t===null&&l&4&&Kh(s);case 26:case 5:Na(e,s),t===null&&l&4&&Ph(s),l&512&&rr(s,s.return);break;case 12:Na(e,s);break;case 31:Na(e,s),l&4&&Fh(e,s);break;case 13:Na(e,s),l&4&&Wh(e,s),l&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=t0.bind(null,s),_0(e,s))));break;case 22:if(l=s.memoizedState!==null||ja,!l){t=t!==null&&t.memoizedState!==null||at,c=ja;var d=at;ja=l,(at=t)&&!d?Sa(e,s,(s.subtreeFlags&8772)!==0):Na(e,s),ja=c,at=d}break;case 30:break;default:Na(e,s)}}function Jh(e){var t=e.alternate;t!==null&&(e.alternate=null,Jh(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&wl(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Pe=null,wt=!1;function wa(e,t,s){for(s=s.child;s!==null;)Zh(e,t,s),s=s.sibling}function Zh(e,t,s){if(At&&typeof At.onCommitFiberUnmount=="function")try{At.onCommitFiberUnmount(An,s)}catch{}switch(s.tag){case 26:at||ca(s,t),wa(e,t,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:at||ca(s,t);var l=Pe,c=wt;Fa(s.type)&&(Pe=s.stateNode,wt=!1),wa(e,t,s),mr(s.stateNode),Pe=l,wt=c;break;case 5:at||ca(s,t);case 6:if(l=Pe,c=wt,Pe=null,wa(e,t,s),Pe=l,wt=c,Pe!==null)if(wt)try{(Pe.nodeType===9?Pe.body:Pe.nodeName==="HTML"?Pe.ownerDocument.body:Pe).removeChild(s.stateNode)}catch(d){Ue(s,t,d)}else try{Pe.removeChild(s.stateNode)}catch(d){Ue(s,t,d)}break;case 18:Pe!==null&&(wt?(e=Pe,Gf(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),gn(e)):Gf(Pe,s.stateNode));break;case 4:l=Pe,c=wt,Pe=s.stateNode.containerInfo,wt=!0,wa(e,t,s),Pe=l,wt=c;break;case 0:case 11:case 14:case 15:Pa(2,s,t),at||Pa(4,s,t),wa(e,t,s);break;case 1:at||(ca(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"&&Gh(s,t,l)),wa(e,t,s);break;case 21:wa(e,t,s);break;case 22:at=(l=at)||s.memoizedState!==null,wa(e,t,s),at=l;break;default:wa(e,t,s)}}function Fh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{gn(e)}catch(s){Ue(t,t.return,s)}}}function Wh(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{gn(e)}catch(s){Ue(t,t.return,s)}}function Kp(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new Qh),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new Qh),t;default:throw Error(o(435,e.tag))}}function Ni(e,t){var s=Kp(e);t.forEach(function(l){if(!s.has(l)){s.add(l);var c=a0.bind(null,e,l);l.then(c,c)}})}function Nt(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var c=s[l],d=e,p=t,b=p;e:for(;b!==null;){switch(b.tag){case 27:if(Fa(b.type)){Pe=b.stateNode,wt=!1;break e}break;case 5:Pe=b.stateNode,wt=!1;break e;case 3:case 4:Pe=b.stateNode.containerInfo,wt=!0;break e}b=b.return}if(Pe===null)throw Error(o(160));Zh(d,p,c),Pe=null,wt=!1,d=c.alternate,d!==null&&(d.return=null),c.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)ef(t,e),t=t.sibling}var ta=null;function ef(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Nt(t,e),St(e),l&4&&(Pa(3,e,e.return),nr(3,e),Pa(5,e,e.return));break;case 1:Nt(t,e),St(e),l&512&&(at||s===null||ca(s,s.return)),l&64&&ja&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?l:s.concat(l))));break;case 26:var c=ta;if(Nt(t,e),St(e),l&512&&(at||s===null||ca(s,s.return)),l&4){var d=s!==null?s.memoizedState:null;if(l=e.memoizedState,s===null)if(l===null)if(e.stateNode===null){e:{l=e.type,s=e.memoizedProps,c=c.ownerDocument||c;t:switch(l){case"title":d=c.getElementsByTagName("title")[0],(!d||d[Dn]||d[ut]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=c.createElement(l),c.head.insertBefore(d,c.querySelector("head > title"))),mt(d,l,s),d[ut]=e,ot(d),l=d;break e;case"link":var p=tm("link","href",c).get(l+(s.href||""));if(p){for(var b=0;b<p.length;b++)if(d=p[b],d.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&d.getAttribute("rel")===(s.rel==null?null:s.rel)&&d.getAttribute("title")===(s.title==null?null:s.title)&&d.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){p.splice(b,1);break t}}d=c.createElement(l),mt(d,l,s),c.head.appendChild(d);break;case"meta":if(p=tm("meta","content",c).get(l+(s.content||""))){for(b=0;b<p.length;b++)if(d=p[b],d.getAttribute("content")===(s.content==null?null:""+s.content)&&d.getAttribute("name")===(s.name==null?null:s.name)&&d.getAttribute("property")===(s.property==null?null:s.property)&&d.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&d.getAttribute("charset")===(s.charSet==null?null:s.charSet)){p.splice(b,1);break t}}d=c.createElement(l),mt(d,l,s),c.head.appendChild(d);break;default:throw Error(o(468,l))}d[ut]=e,ot(d),l=d}e.stateNode=l}else am(c,e.type,e.stateNode);else e.stateNode=em(c,l,e.memoizedProps);else d!==l?(d===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):d.count--,l===null?am(c,e.type,e.stateNode):em(c,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Po(e,e.memoizedProps,s.memoizedProps)}break;case 27:Nt(t,e),St(e),l&512&&(at||s===null||ca(s,s.return)),s!==null&&l&4&&Po(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Nt(t,e),St(e),l&512&&(at||s===null||ca(s,s.return)),e.flags&32){c=e.stateNode;try{Bs(c,"")}catch(ne){Ue(e,e.return,ne)}}l&4&&e.stateNode!=null&&(c=e.memoizedProps,Po(e,c,s!==null?s.memoizedProps:c)),l&1024&&(Qo=!0);break;case 6:if(Nt(t,e),St(e),l&4){if(e.stateNode===null)throw Error(o(162));l=e.memoizedProps,s=e.stateNode;try{s.nodeValue=l}catch(ne){Ue(e,e.return,ne)}}break;case 3:if(qi=null,c=ta,ta=Li(t.containerInfo),Nt(t,e),ta=c,St(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{gn(t.containerInfo)}catch(ne){Ue(e,e.return,ne)}Qo&&(Qo=!1,tf(e));break;case 4:l=ta,ta=Li(e.stateNode.containerInfo),Nt(t,e),St(e),ta=l;break;case 12:Nt(t,e),St(e);break;case 31:Nt(t,e),St(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ni(e,l)));break;case 13:Nt(t,e),St(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Ti=Ct()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ni(e,l)));break;case 22:c=e.memoizedState!==null;var C=s!==null&&s.memoizedState!==null,$=ja,Y=at;if(ja=$||c,at=Y||C,Nt(t,e),at=Y,ja=$,St(e),l&8192)e:for(t=e.stateNode,t._visibility=c?t._visibility&-2:t._visibility|1,c&&(s===null||C||ja||at||ws(e)),s=null,t=e;;){if(t.tag===5||t.tag===26){if(s===null){C=s=t;try{if(d=C.stateNode,c)p=d.style,typeof p.setProperty=="function"?p.setProperty("display","none","important"):p.display="none";else{b=C.stateNode;var J=C.memoizedProps.style,V=J!=null&&J.hasOwnProperty("display")?J.display:null;b.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(ne){Ue(C,C.return,ne)}}}else if(t.tag===6){if(s===null){C=t;try{C.stateNode.nodeValue=c?"":C.memoizedProps}catch(ne){Ue(C,C.return,ne)}}}else if(t.tag===18){if(s===null){C=t;try{var I=C.stateNode;c?Pf(I,!0):Pf(C.stateNode,!1)}catch(ne){Ue(C,C.return,ne)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;s===t&&(s=null),t=t.return}s===t&&(s=null),t.sibling.return=t.return,t=t.sibling}l&4&&(l=e.updateQueue,l!==null&&(s=l.retryQueue,s!==null&&(l.retryQueue=null,Ni(e,s))));break;case 19:Nt(t,e),St(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Ni(e,l)));break;case 30:break;case 21:break;default:Nt(t,e),St(e)}}function St(e){var t=e.flags;if(t&2){try{for(var s,l=e.return;l!==null;){if(Yh(l)){s=l;break}l=l.return}if(s==null)throw Error(o(160));switch(s.tag){case 27:var c=s.stateNode,d=Yo(e);wi(e,d,c);break;case 5:var p=s.stateNode;s.flags&32&&(Bs(p,""),s.flags&=-33);var b=Yo(e);wi(e,b,p);break;case 3:case 4:var C=s.stateNode.containerInfo,$=Yo(e);Ko(e,$,C);break;default:throw Error(o(161))}}catch(Y){Ue(e,e.return,Y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tf(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;tf(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Na(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Xh(e,t.alternate,t),t=t.sibling}function ws(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:Pa(4,t,t.return),ws(t);break;case 1:ca(t,t.return);var s=t.stateNode;typeof s.componentWillUnmount=="function"&&Gh(t,t.return,s),ws(t);break;case 27:mr(t.stateNode);case 26:case 5:ca(t,t.return),ws(t);break;case 22:t.memoizedState===null&&ws(t);break;case 30:ws(t);break;default:ws(t)}e=e.sibling}}function Sa(e,t,s){for(s=s&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var l=t.alternate,c=e,d=t,p=d.flags;switch(d.tag){case 0:case 11:case 15:Sa(c,d,s),nr(4,d);break;case 1:if(Sa(c,d,s),l=d,c=l.stateNode,typeof c.componentDidMount=="function")try{c.componentDidMount()}catch($){Ue(l,l.return,$)}if(l=d,c=l.updateQueue,c!==null){var b=l.stateNode;try{var C=c.shared.hiddenCallbacks;if(C!==null)for(c.shared.hiddenCallbacks=null,c=0;c<C.length;c++)Dd(C[c],b)}catch($){Ue(l,l.return,$)}}s&&p&64&&Ih(d),rr(d,d.return);break;case 27:Kh(d);case 26:case 5:Sa(c,d,s),s&&l===null&&p&4&&Ph(d),rr(d,d.return);break;case 12:Sa(c,d,s);break;case 31:Sa(c,d,s),s&&p&4&&Fh(c,d);break;case 13:Sa(c,d,s),s&&p&4&&Wh(c,d);break;case 22:d.memoizedState===null&&Sa(c,d,s),rr(d,d.return);break;case 30:break;default:Sa(c,d,s)}t=t.sibling}}function Xo(e,t){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&Pn(s))}function Jo(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Pn(e))}function aa(e,t,s,l){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)af(e,t,s,l),t=t.sibling}function af(e,t,s,l){var c=t.flags;switch(t.tag){case 0:case 11:case 15:aa(e,t,s,l),c&2048&&nr(9,t);break;case 1:aa(e,t,s,l);break;case 3:aa(e,t,s,l),c&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Pn(e)));break;case 12:if(c&2048){aa(e,t,s,l),e=t.stateNode;try{var d=t.memoizedProps,p=d.id,b=d.onPostCommit;typeof b=="function"&&b(p,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(C){Ue(t,t.return,C)}}else aa(e,t,s,l);break;case 31:aa(e,t,s,l);break;case 13:aa(e,t,s,l);break;case 23:break;case 22:d=t.stateNode,p=t.alternate,t.memoizedState!==null?d._visibility&2?aa(e,t,s,l):ir(e,t):d._visibility&2?aa(e,t,s,l):(d._visibility|=2,sn(e,t,s,l,(t.subtreeFlags&10256)!==0||!1)),c&2048&&Xo(p,t);break;case 24:aa(e,t,s,l),c&2048&&Jo(t.alternate,t);break;default:aa(e,t,s,l)}}function sn(e,t,s,l,c){for(c=c&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var d=e,p=t,b=s,C=l,$=p.flags;switch(p.tag){case 0:case 11:case 15:sn(d,p,b,C,c),nr(8,p);break;case 23:break;case 22:var Y=p.stateNode;p.memoizedState!==null?Y._visibility&2?sn(d,p,b,C,c):ir(d,p):(Y._visibility|=2,sn(d,p,b,C,c)),c&&$&2048&&Xo(p.alternate,p);break;case 24:sn(d,p,b,C,c),c&&$&2048&&Jo(p.alternate,p);break;default:sn(d,p,b,C,c)}t=t.sibling}}function ir(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var s=e,l=t,c=l.flags;switch(l.tag){case 22:ir(s,l),c&2048&&Xo(l.alternate,l);break;case 24:ir(s,l),c&2048&&Jo(l.alternate,l);break;default:ir(s,l)}t=t.sibling}}var lr=8192;function nn(e,t,s){if(e.subtreeFlags&lr)for(e=e.child;e!==null;)sf(e,t,s),e=e.sibling}function sf(e,t,s){switch(e.tag){case 26:nn(e,t,s),e.flags&lr&&e.memoizedState!==null&&R0(s,ta,e.memoizedState,e.memoizedProps);break;case 5:nn(e,t,s);break;case 3:case 4:var l=ta;ta=Li(e.stateNode.containerInfo),nn(e,t,s),ta=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=lr,lr=16777216,nn(e,t,s),lr=l):nn(e,t,s));break;default:nn(e,t,s)}}function nf(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function or(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];ct=l,lf(l,e)}nf(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rf(e),e=e.sibling}function rf(e){switch(e.tag){case 0:case 11:case 15:or(e),e.flags&2048&&Pa(9,e,e.return);break;case 3:or(e);break;case 12:or(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Si(e)):or(e);break;default:or(e)}}function Si(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var s=0;s<t.length;s++){var l=t[s];ct=l,lf(l,e)}nf(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:Pa(8,t,t.return),Si(t);break;case 22:s=t.stateNode,s._visibility&2&&(s._visibility&=-3,Si(t));break;default:Si(t)}e=e.sibling}}function lf(e,t){for(;ct!==null;){var s=ct;switch(s.tag){case 0:case 11:case 15:Pa(8,s,t);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var l=s.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Pn(s.memoizedState.cache)}if(l=s.child,l!==null)l.return=s,ct=l;else e:for(s=e;ct!==null;){l=ct;var c=l.sibling,d=l.return;if(Jh(l),l===s){ct=null;break e}if(c!==null){c.return=d,ct=c;break e}ct=d}}}var Qp={getCacheForType:function(e){var t=ht(We),s=t.data.get(e);return s===void 0&&(s=e(),t.data.set(e,s)),s},cacheSignal:function(){return ht(We).controller.signal}},Xp=typeof WeakMap=="function"?WeakMap:Map,De=0,$e=null,we=null,Se=0,Re=0,zt=null,Ya=!1,rn=!1,Zo=!1,Ta=0,Xe=0,Ka=0,Ns=0,Fo=0,Mt=0,ln=0,cr=null,Tt=null,Wo=!1,Ti=0,of=0,Ei=1/0,Ci=null,Qa=null,rt=0,Xa=null,on=null,Ea=0,ec=0,tc=null,cf=null,ur=0,ac=null;function Bt(){return(De&2)!==0&&Se!==0?Se&-Se:S.T!==null?oc():Nu()}function uf(){if(Mt===0)if((Se&536870912)===0||Ee){var e=Mr;Mr<<=1,(Mr&3932160)===0&&(Mr=262144),Mt=e}else Mt=536870912;return e=Rt.current,e!==null&&(e.flags|=32),Mt}function Et(e,t,s){(e===$e&&(Re===2||Re===9)||e.cancelPendingCommit!==null)&&(cn(e,0),Ja(e,Se,Mt,!1)),kn(e,s),((De&2)===0||e!==$e)&&(e===$e&&((De&2)===0&&(Ns|=s),Xe===4&&Ja(e,Se,Mt,!1)),ua(e))}function df(e,t,s){if((De&6)!==0)throw Error(o(327));var l=!s&&(t&127)===0&&(t&e.expiredLanes)===0||On(e,t),c=l?Fp(e,t):nc(e,t,!0),d=l;do{if(c===0){rn&&!l&&Ja(e,t,0,!1);break}else{if(s=e.current.alternate,d&&!Jp(s)){c=nc(e,t,!1),d=!1;continue}if(c===2){if(d=t,e.errorRecoveryDisabledLanes&d)var p=0;else p=e.pendingLanes&-536870913,p=p!==0?p:p&536870912?536870912:0;if(p!==0){t=p;e:{var b=e;c=cr;var C=b.current.memoizedState.isDehydrated;if(C&&(cn(b,p).flags|=256),p=nc(b,p,!1),p!==2){if(Zo&&!C){b.errorRecoveryDisabledLanes|=d,Ns|=d,c=4;break e}d=Tt,Tt=c,d!==null&&(Tt===null?Tt=d:Tt.push.apply(Tt,d))}c=p}if(d=!1,c!==2)continue}}if(c===1){cn(e,0),Ja(e,t,0,!0);break}e:{switch(l=e,d=c,d){case 0:case 1:throw Error(o(345));case 4:if((t&4194048)!==t)break;case 6:Ja(l,t,Mt,!Ya);break e;case 2:Tt=null;break;case 3:case 5:break;default:throw Error(o(329))}if((t&62914560)===t&&(c=Ti+300-Ct(),10<c)){if(Ja(l,t,Mt,!Ya),Lr(l,0,!0)!==0)break e;Ea=t,l.timeoutHandle=Hf(hf.bind(null,l,s,Tt,Ci,Wo,t,Mt,Ns,ln,Ya,d,"Throttled",-0,0),c);break e}hf(l,s,Tt,Ci,Wo,t,Mt,Ns,ln,Ya,d,null,-0,0)}}break}while(!0);ua(e)}function hf(e,t,s,l,c,d,p,b,C,$,Y,J,V,I){if(e.timeoutHandle=-1,J=t.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ha},sf(t,d,J);var ne=(d&62914560)===d?Ti-Ct():(d&4194048)===d?of-Ct():0;if(ne=U0(J,ne),ne!==null){Ea=d,e.cancelPendingCommit=ne(bf.bind(null,e,t,d,s,l,c,p,b,C,Y,J,null,V,I)),Ja(e,d,p,!$);return}}bf(e,t,d,s,l,c,p,b,C)}function Jp(e){for(var t=e;;){var s=t.tag;if((s===0||s===11||s===15)&&t.flags&16384&&(s=t.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var l=0;l<s.length;l++){var c=s[l],d=c.getSnapshot;c=c.value;try{if(!kt(d(),c))return!1}catch{return!1}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ja(e,t,s,l){t&=~Fo,t&=~Ns,e.suspendedLanes|=t,e.pingedLanes&=~t,l&&(e.warmLanes|=t),l=e.expirationTimes;for(var c=t;0<c;){var d=31-Ot(c),p=1<<d;l[d]=-1,c&=~p}s!==0&&_u(e,s,t)}function Ai(){return(De&6)===0?(dr(0),!1):!0}function sc(){if(we!==null){if(Re===0)var e=we.return;else e=we,pa=gs=null,vo(e),Fs=null,Kn=0,e=we;for(;e!==null;)Hh(e.alternate,e),e=e.return;we=null}}function cn(e,t){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,p0(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Ea=0,sc(),$e=e,we=s=ma(e.current,null),Se=t,Re=0,zt=null,Ya=!1,rn=On(e,t),Zo=!1,ln=Mt=Fo=Ns=Ka=Xe=0,Tt=cr=null,Wo=!1,(t&8)!==0&&(t|=t&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=t;0<l;){var c=31-Ot(l),d=1<<c;t|=e[c],l&=~d}return Ta=t,Jr(),s}function ff(e,t){xe=null,S.H=tr,t===Zs||t===ni?(t=Cd(),Re=3):t===io?(t=Cd(),Re=4):Re=t===zo?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,zt=t,we===null&&(Xe=1,xi(e,Pt(t,e.current)))}function mf(){var e=Rt.current;return e===null?!0:(Se&4194048)===Se?Xt===null:(Se&62914560)===Se||(Se&536870912)!==0?e===Xt:!1}function gf(){var e=S.H;return S.H=tr,e===null?tr:e}function pf(){var e=S.A;return S.A=Qp,e}function Oi(){Xe=4,Ya||(Se&4194048)!==Se&&Rt.current!==null||(rn=!0),(Ka&134217727)===0&&(Ns&134217727)===0||$e===null||Ja($e,Se,Mt,!1)}function nc(e,t,s){var l=De;De|=2;var c=gf(),d=pf();($e!==e||Se!==t)&&(Ci=null,cn(e,t)),t=!1;var p=Xe;e:do try{if(Re!==0&&we!==null){var b=we,C=zt;switch(Re){case 8:sc(),p=6;break e;case 3:case 2:case 9:case 6:Rt.current===null&&(t=!0);var $=Re;if(Re=0,zt=null,un(e,b,C,$),s&&rn){p=0;break e}break;default:$=Re,Re=0,zt=null,un(e,b,C,$)}}Zp(),p=Xe;break}catch(Y){ff(e,Y)}while(!0);return t&&e.shellSuspendCounter++,pa=gs=null,De=l,S.H=c,S.A=d,we===null&&($e=null,Se=0,Jr()),p}function Zp(){for(;we!==null;)yf(we)}function Fp(e,t){var s=De;De|=2;var l=gf(),c=pf();$e!==e||Se!==t?(Ci=null,Ei=Ct()+500,cn(e,t)):rn=On(e,t);e:do try{if(Re!==0&&we!==null){t=we;var d=zt;t:switch(Re){case 1:Re=0,zt=null,un(e,t,d,1);break;case 2:case 9:if(Td(d)){Re=0,zt=null,xf(t);break}t=function(){Re!==2&&Re!==9||$e!==e||(Re=7),ua(e)},d.then(t,t);break e;case 3:Re=7;break e;case 4:Re=5;break e;case 7:Td(d)?(Re=0,zt=null,xf(t)):(Re=0,zt=null,un(e,t,d,7));break;case 5:var p=null;switch(we.tag){case 26:p=we.memoizedState;case 5:case 27:var b=we;if(p?sm(p):b.stateNode.complete){Re=0,zt=null;var C=b.sibling;if(C!==null)we=C;else{var $=b.return;$!==null?(we=$,ki($)):we=null}break t}}Re=0,zt=null,un(e,t,d,5);break;case 6:Re=0,zt=null,un(e,t,d,6);break;case 8:sc(),Xe=6;break e;default:throw Error(o(462))}}Wp();break}catch(Y){ff(e,Y)}while(!0);return pa=gs=null,S.H=l,S.A=c,De=s,we!==null?0:($e=null,Se=0,Jr(),Xe)}function Wp(){for(;we!==null&&!jg();)yf(we)}function yf(e){var t=qh(e.alternate,e,Ta);e.memoizedProps=e.pendingProps,t===null?ki(e):we=t}function xf(e){var t=e,s=t.alternate;switch(t.tag){case 15:case 0:t=Uh(s,t,t.pendingProps,t.type,void 0,Se);break;case 11:t=Uh(s,t,t.pendingProps,t.type.render,t.ref,Se);break;case 5:vo(t);default:Hh(s,t),t=we=gd(t,Ta),t=qh(s,t,Ta)}e.memoizedProps=e.pendingProps,t===null?ki(e):we=t}function un(e,t,s,l){pa=gs=null,vo(t),Fs=null,Kn=0;var c=t.return;try{if(Vp(e,c,t,s,Se)){Xe=1,xi(e,Pt(s,e.current)),we=null;return}}catch(d){if(c!==null)throw we=c,d;Xe=1,xi(e,Pt(s,e.current)),we=null;return}t.flags&32768?(Ee||l===1?e=!0:rn||(Se&536870912)!==0?e=!1:(Ya=e=!0,(l===2||l===9||l===3||l===6)&&(l=Rt.current,l!==null&&l.tag===13&&(l.flags|=16384))),vf(t,e)):ki(t)}function ki(e){var t=e;do{if((t.flags&32768)!==0){vf(t,Ya);return}e=t.return;var s=Gp(t.alternate,t,Ta);if(s!==null){we=s;return}if(t=t.sibling,t!==null){we=t;return}we=t=e}while(t!==null);Xe===0&&(Xe=5)}function vf(e,t){do{var s=Pp(e.alternate,e);if(s!==null){s.flags&=32767,we=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!t&&(e=e.sibling,e!==null)){we=e;return}we=e=s}while(e!==null);Xe=6,we=null}function bf(e,t,s,l,c,d,p,b,C){e.cancelPendingCommit=null;do Di();while(rt!==0);if((De&6)!==0)throw Error(o(327));if(t!==null){if(t===e.current)throw Error(o(177));if(d=t.lanes|t.childLanes,d|=Pl,Dg(e,s,d,p,b,C),e===$e&&(we=$e=null,Se=0),on=t,Xa=e,Ea=s,ec=d,tc=c,cf=l,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,s0(Ur,function(){return Sf(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||l){l=S.T,S.T=null,c=F.p,F.p=2,p=De,De|=4;try{Yp(e,t,s)}finally{De=p,F.p=c,S.T=l}}rt=1,_f(),jf(),wf()}}function _f(){if(rt===1){rt=0;var e=Xa,t=on,s=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||s){s=S.T,S.T=null;var l=F.p;F.p=2;var c=De;De|=4;try{ef(t,e);var d=pc,p=id(e.containerInfo),b=d.focusedElem,C=d.selectionRange;if(p!==b&&b&&b.ownerDocument&&rd(b.ownerDocument.documentElement,b)){if(C!==null&&ql(b)){var $=C.start,Y=C.end;if(Y===void 0&&(Y=$),"selectionStart"in b)b.selectionStart=$,b.selectionEnd=Math.min(Y,b.value.length);else{var J=b.ownerDocument||document,V=J&&J.defaultView||window;if(V.getSelection){var I=V.getSelection(),ne=b.textContent.length,he=Math.min(C.start,ne),Le=C.end===void 0?he:Math.min(C.end,ne);!I.extend&&he>Le&&(p=Le,Le=he,he=p);var M=nd(b,he),k=nd(b,Le);if(M&&k&&(I.rangeCount!==1||I.anchorNode!==M.node||I.anchorOffset!==M.offset||I.focusNode!==k.node||I.focusOffset!==k.offset)){var L=J.createRange();L.setStart(M.node,M.offset),I.removeAllRanges(),he>Le?(I.addRange(L),I.extend(k.node,k.offset)):(L.setEnd(k.node,k.offset),I.addRange(L))}}}}for(J=[],I=b;I=I.parentNode;)I.nodeType===1&&J.push({element:I,left:I.scrollLeft,top:I.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<J.length;b++){var X=J[b];X.element.scrollLeft=X.left,X.element.scrollTop=X.top}}Gi=!!gc,pc=gc=null}finally{De=c,F.p=l,S.T=s}}e.current=t,rt=2}}function jf(){if(rt===2){rt=0;var e=Xa,t=on,s=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||s){s=S.T,S.T=null;var l=F.p;F.p=2;var c=De;De|=4;try{Xh(e,t.alternate,t)}finally{De=c,F.p=l,S.T=s}}rt=3}}function wf(){if(rt===4||rt===3){rt=0,wg();var e=Xa,t=on,s=Ea,l=cf;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?rt=5:(rt=0,on=Xa=null,Nf(e,e.pendingLanes));var c=e.pendingLanes;if(c===0&&(Qa=null),_l(s),t=t.stateNode,At&&typeof At.onCommitFiberRoot=="function")try{At.onCommitFiberRoot(An,t,void 0,(t.current.flags&128)===128)}catch{}if(l!==null){t=S.T,c=F.p,F.p=2,S.T=null;try{for(var d=e.onRecoverableError,p=0;p<l.length;p++){var b=l[p];d(b.value,{componentStack:b.stack})}}finally{S.T=t,F.p=c}}(Ea&3)!==0&&Di(),ua(e),c=e.pendingLanes,(s&261930)!==0&&(c&42)!==0?e===ac?ur++:(ur=0,ac=e):ur=0,dr(0)}}function Nf(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Pn(t)))}function Di(){return _f(),jf(),wf(),Sf()}function Sf(){if(rt!==5)return!1;var e=Xa,t=ec;ec=0;var s=_l(Ea),l=S.T,c=F.p;try{F.p=32>s?32:s,S.T=null,s=tc,tc=null;var d=Xa,p=Ea;if(rt=0,on=Xa=null,Ea=0,(De&6)!==0)throw Error(o(331));var b=De;if(De|=4,rf(d.current),af(d,d.current,p,s),De=b,dr(0,!1),At&&typeof At.onPostCommitFiberRoot=="function")try{At.onPostCommitFiberRoot(An,d)}catch{}return!0}finally{F.p=c,S.T=l,Nf(e,t)}}function Tf(e,t,s){t=Pt(s,t),t=Uo(e.stateNode,t,2),e=Ha(e,t,2),e!==null&&(kn(e,2),ua(e))}function Ue(e,t,s){if(e.tag===3)Tf(e,e,s);else for(;t!==null;){if(t.tag===3){Tf(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Qa===null||!Qa.has(l))){e=Pt(s,e),s=Th(2),l=Ha(t,s,2),l!==null&&(Eh(s,l,t,e),kn(l,2),ua(l));break}}t=t.return}}function rc(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new Xp;var c=new Set;l.set(t,c)}else c=l.get(t),c===void 0&&(c=new Set,l.set(t,c));c.has(s)||(Zo=!0,c.add(s),e=e0.bind(null,e,t,s),t.then(e,e))}function e0(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,$e===e&&(Se&s)===s&&(Xe===4||Xe===3&&(Se&62914560)===Se&&300>Ct()-Ti?(De&2)===0&&cn(e,0):Fo|=s,ln===Se&&(ln=0)),ua(e)}function Ef(e,t){t===0&&(t=bu()),e=hs(e,t),e!==null&&(kn(e,t),ua(e))}function t0(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),Ef(e,s)}function a0(e,t){var s=0;switch(e.tag){case 31:case 13:var l=e.stateNode,c=e.memoizedState;c!==null&&(s=c.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(o(314))}l!==null&&l.delete(t),Ef(e,s)}function s0(e,t){return yl(e,t)}var Ri=null,dn=null,ic=!1,Ui=!1,lc=!1,Za=0;function ua(e){e!==dn&&e.next===null&&(dn===null?Ri=dn=e:dn=dn.next=e),Ui=!0,ic||(ic=!0,r0())}function dr(e,t){if(!lc&&Ui){lc=!0;do for(var s=!1,l=Ri;l!==null;){if(e!==0){var c=l.pendingLanes;if(c===0)var d=0;else{var p=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-Ot(42|e)+1)-1,d&=c&~(p&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(s=!0,kf(l,d))}else d=Se,d=Lr(l,l===$e?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||On(l,d)||(s=!0,kf(l,d));l=l.next}while(s);lc=!1}}function n0(){Cf()}function Cf(){Ui=ic=!1;var e=0;Za!==0&&g0()&&(e=Za);for(var t=Ct(),s=null,l=Ri;l!==null;){var c=l.next,d=Af(l,t);d===0?(l.next=null,s===null?Ri=c:s.next=c,c===null&&(dn=s)):(s=l,(e!==0||(d&3)!==0)&&(Ui=!0)),l=c}rt!==0&&rt!==5||dr(e),Za!==0&&(Za=0)}function Af(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,c=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var p=31-Ot(d),b=1<<p,C=c[p];C===-1?((b&s)===0||(b&l)!==0)&&(c[p]=kg(b,t)):C<=t&&(e.expiredLanes|=b),d&=~b}if(t=$e,s=Se,s=Lr(e,e===t?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,s===0||e===t&&(Re===2||Re===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&xl(l),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||On(e,s)){if(t=s&-s,t===e.callbackPriority)return t;switch(l!==null&&xl(l),_l(s)){case 2:case 8:s=xu;break;case 32:s=Ur;break;case 268435456:s=vu;break;default:s=Ur}return l=Of.bind(null,e),s=yl(s,l),e.callbackPriority=t,e.callbackNode=s,t}return l!==null&&l!==null&&xl(l),e.callbackPriority=2,e.callbackNode=null,2}function Of(e,t){if(rt!==0&&rt!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(Di()&&e.callbackNode!==s)return null;var l=Se;return l=Lr(e,e===$e?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(df(e,l,t),Af(e,Ct()),e.callbackNode!=null&&e.callbackNode===s?Of.bind(null,e):null)}function kf(e,t){if(Di())return null;df(e,t,!0)}function r0(){y0(function(){(De&6)!==0?yl(yu,n0):Cf()})}function oc(){if(Za===0){var e=Xs;e===0&&(e=zr,zr<<=1,(zr&261888)===0&&(zr=256)),Za=e}return Za}function Df(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hr(""+e)}function Rf(e,t){var s=t.ownerDocument.createElement("input");return s.name=t.name,s.value=t.value,e.id&&s.setAttribute("form",e.id),t.parentNode.insertBefore(s,t),e=new FormData(e),s.parentNode.removeChild(s),e}function i0(e,t,s,l,c){if(t==="submit"&&s&&s.stateNode===c){var d=Df((c[_t]||null).action),p=l.submitter;p&&(t=(t=p[_t]||null)?Df(t.formAction):p.getAttribute("formAction"),t!==null&&(d=t,p=null));var b=new Yr("action","action",null,l,c);e.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Za!==0){var C=p?Rf(c,p):new FormData(c);Co(s,{pending:!0,data:C,method:c.method,action:d},null,C)}}else typeof d=="function"&&(b.preventDefault(),C=p?Rf(c,p):new FormData(c),Co(s,{pending:!0,data:C,method:c.method,action:d},d,C))},currentTarget:c}]})}}for(var cc=0;cc<Gl.length;cc++){var uc=Gl[cc],l0=uc.toLowerCase(),o0=uc[0].toUpperCase()+uc.slice(1);ea(l0,"on"+o0)}ea(cd,"onAnimationEnd"),ea(ud,"onAnimationIteration"),ea(dd,"onAnimationStart"),ea("dblclick","onDoubleClick"),ea("focusin","onFocus"),ea("focusout","onBlur"),ea(Np,"onTransitionRun"),ea(Sp,"onTransitionStart"),ea(Tp,"onTransitionCancel"),ea(hd,"onTransitionEnd"),zs("onMouseEnter",["mouseout","mouseover"]),zs("onMouseLeave",["mouseout","mouseover"]),zs("onPointerEnter",["pointerout","pointerover"]),zs("onPointerLeave",["pointerout","pointerover"]),os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),os("onBeforeInput",["compositionend","keypress","textInput","paste"]),os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var hr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c0=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(hr));function Uf(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],c=l.event;l=l.listeners;e:{var d=void 0;if(t)for(var p=l.length-1;0<=p;p--){var b=l[p],C=b.instance,$=b.currentTarget;if(b=b.listener,C!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=$;try{d(c)}catch(Y){Xr(Y)}c.currentTarget=null,d=C}else for(p=0;p<l.length;p++){if(b=l[p],C=b.instance,$=b.currentTarget,b=b.listener,C!==d&&c.isPropagationStopped())break e;d=b,c.currentTarget=$;try{d(c)}catch(Y){Xr(Y)}c.currentTarget=null,d=C}}}}function Ne(e,t){var s=t[jl];s===void 0&&(s=t[jl]=new Set);var l=e+"__bubble";s.has(l)||(zf(t,e,2,!1),s.add(l))}function dc(e,t,s){var l=0;t&&(l|=4),zf(s,e,l,t)}var zi="_reactListening"+Math.random().toString(36).slice(2);function hc(e){if(!e[zi]){e[zi]=!0,Eu.forEach(function(s){s!=="selectionchange"&&(c0.has(s)||dc(s,!1,e),dc(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[zi]||(t[zi]=!0,dc("selectionchange",!1,t))}}function zf(e,t,s,l){switch(um(t)){case 2:var c=B0;break;case 8:c=L0;break;default:c=Ec}s=c.bind(null,t,s,e),c=void 0,!kl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),l?c!==void 0?e.addEventListener(t,s,{capture:!0,passive:c}):e.addEventListener(t,s,!0):c!==void 0?e.addEventListener(t,s,{passive:c}):e.addEventListener(t,s,!1)}function fc(e,t,s,l,c){var d=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var p=l.tag;if(p===3||p===4){var b=l.stateNode.containerInfo;if(b===c)break;if(p===4)for(p=l.return;p!==null;){var C=p.tag;if((C===3||C===4)&&p.stateNode.containerInfo===c)return;p=p.return}for(;b!==null;){if(p=Ds(b),p===null)return;if(C=p.tag,C===5||C===6||C===26||C===27){l=d=p;continue e}b=b.parentNode}}l=l.return}$u(function(){var $=d,Y=Al(s),J=[];e:{var V=fd.get(e);if(V!==void 0){var I=Yr,ne=e;switch(e){case"keypress":if(Gr(s)===0)break e;case"keydown":case"keyup":I=ap;break;case"focusin":ne="focus",I=zl;break;case"focusout":ne="blur",I=zl;break;case"beforeblur":case"afterblur":I=zl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=Hu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=Gg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=rp;break;case cd:case ud:case dd:I=Kg;break;case hd:I=lp;break;case"scroll":case"scrollend":I=Hg;break;case"wheel":I=cp;break;case"copy":case"cut":case"paste":I=Xg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=Gu;break;case"toggle":case"beforetoggle":I=dp}var he=(t&4)!==0,Le=!he&&(e==="scroll"||e==="scrollend"),M=he?V!==null?V+"Capture":null:V;he=[];for(var k=$,L;k!==null;){var X=k;if(L=X.stateNode,X=X.tag,X!==5&&X!==26&&X!==27||L===null||M===null||(X=Un(k,M),X!=null&&he.push(fr(k,X,L))),Le)break;k=k.return}0<he.length&&(V=new I(V,ne,null,s,Y),J.push({event:V,listeners:he}))}}if((t&7)===0){e:{if(V=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",V&&s!==Cl&&(ne=s.relatedTarget||s.fromElement)&&(Ds(ne)||ne[ks]))break e;if((I||V)&&(V=Y.window===Y?Y:(V=Y.ownerDocument)?V.defaultView||V.parentWindow:window,I?(ne=s.relatedTarget||s.toElement,I=$,ne=ne?Ds(ne):null,ne!==null&&(Le=h(ne),he=ne.tag,ne!==Le||he!==5&&he!==27&&he!==6)&&(ne=null)):(I=null,ne=$),I!==ne)){if(he=Hu,X="onMouseLeave",M="onMouseEnter",k="mouse",(e==="pointerout"||e==="pointerover")&&(he=Gu,X="onPointerLeave",M="onPointerEnter",k="pointer"),Le=I==null?V:Rn(I),L=ne==null?V:Rn(ne),V=new he(X,k+"leave",I,s,Y),V.target=Le,V.relatedTarget=L,X=null,Ds(Y)===$&&(he=new he(M,k+"enter",ne,s,Y),he.target=L,he.relatedTarget=Le,X=he),Le=X,I&&ne)t:{for(he=u0,M=I,k=ne,L=0,X=M;X;X=he(X))L++;X=0;for(var ce=k;ce;ce=he(ce))X++;for(;0<L-X;)M=he(M),L--;for(;0<X-L;)k=he(k),X--;for(;L--;){if(M===k||k!==null&&M===k.alternate){he=M;break t}M=he(M),k=he(k)}he=null}else he=null;I!==null&&Mf(J,V,I,he,!1),ne!==null&&Le!==null&&Mf(J,Le,ne,he,!0)}}e:{if(V=$?Rn($):window,I=V.nodeName&&V.nodeName.toLowerCase(),I==="select"||I==="input"&&V.type==="file")var Ae=Fu;else if(Ju(V))if(Wu)Ae=_p;else{Ae=vp;var re=xp}else I=V.nodeName,!I||I.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?$&&El($.elementType)&&(Ae=Fu):Ae=bp;if(Ae&&(Ae=Ae(e,$))){Zu(J,Ae,s,Y);break e}re&&re(e,V,$),e==="focusout"&&$&&V.type==="number"&&$.memoizedProps.value!=null&&Tl(V,"number",V.value)}switch(re=$?Rn($):window,e){case"focusin":(Ju(re)||re.contentEditable==="true")&&(Vs=re,Vl=$,Hn=null);break;case"focusout":Hn=Vl=Vs=null;break;case"mousedown":Hl=!0;break;case"contextmenu":case"mouseup":case"dragend":Hl=!1,ld(J,s,Y);break;case"selectionchange":if(wp)break;case"keydown":case"keyup":ld(J,s,Y)}var ve;if(Bl)e:{switch(e){case"compositionstart":var Te="onCompositionStart";break e;case"compositionend":Te="onCompositionEnd";break e;case"compositionupdate":Te="onCompositionUpdate";break e}Te=void 0}else qs?Qu(e,s)&&(Te="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(Te="onCompositionStart");Te&&(Pu&&s.locale!=="ko"&&(qs||Te!=="onCompositionStart"?Te==="onCompositionEnd"&&qs&&(ve=qu()):(za=Y,Dl="value"in za?za.value:za.textContent,qs=!0)),re=Mi($,Te),0<re.length&&(Te=new Iu(Te,e,null,s,Y),J.push({event:Te,listeners:re}),ve?Te.data=ve:(ve=Xu(s),ve!==null&&(Te.data=ve)))),(ve=fp?mp(e,s):gp(e,s))&&(Te=Mi($,"onBeforeInput"),0<Te.length&&(re=new Iu("onBeforeInput","beforeinput",null,s,Y),J.push({event:re,listeners:Te}),re.data=ve)),i0(J,e,$,s,Y)}Uf(J,t)})}function fr(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Mi(e,t){for(var s=t+"Capture",l=[];e!==null;){var c=e,d=c.stateNode;if(c=c.tag,c!==5&&c!==26&&c!==27||d===null||(c=Un(e,s),c!=null&&l.unshift(fr(e,c,d)),c=Un(e,t),c!=null&&l.push(fr(e,c,d))),e.tag===3)return l;e=e.return}return[]}function u0(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Mf(e,t,s,l,c){for(var d=t._reactName,p=[];s!==null&&s!==l;){var b=s,C=b.alternate,$=b.stateNode;if(b=b.tag,C!==null&&C===l)break;b!==5&&b!==26&&b!==27||$===null||(C=$,c?($=Un(s,d),$!=null&&p.unshift(fr(s,$,C))):c||($=Un(s,d),$!=null&&p.push(fr(s,$,C)))),s=s.return}p.length!==0&&e.push({event:t,listeners:p})}var d0=/\r\n?/g,h0=/\u0000|\uFFFD/g;function Bf(e){return(typeof e=="string"?e:""+e).replace(d0,`
`).replace(h0,"")}function Lf(e,t){return t=Bf(t),Bf(e)===t}function Be(e,t,s,l,c,d){switch(s){case"children":typeof l=="string"?t==="body"||t==="textarea"&&l===""||Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&t!=="body"&&Bs(e,""+l);break;case"className":qr(e,"class",l);break;case"tabIndex":qr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(e,s,l);break;case"style":Bu(e,l,d);break;case"data":if(t!=="object"){qr(e,"data",l);break}case"src":case"href":if(l===""&&(t!=="a"||s!=="href")){e.removeAttribute(s);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Hr(""+l),e.setAttribute(s,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(s==="formAction"?(t!=="input"&&Be(e,t,"name",c.name,c,null),Be(e,t,"formEncType",c.formEncType,c,null),Be(e,t,"formMethod",c.formMethod,c,null),Be(e,t,"formTarget",c.formTarget,c,null)):(Be(e,t,"encType",c.encType,c,null),Be(e,t,"method",c.method,c,null),Be(e,t,"target",c.target,c,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(s);break}l=Hr(""+l),e.setAttribute(s,l);break;case"onClick":l!=null&&(e.onclick=ha);break;case"onScroll":l!=null&&Ne("scroll",e);break;case"onScrollEnd":l!=null&&Ne("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}s=Hr(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""+l):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":l===!0?e.setAttribute(s,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(s,l):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(s,l):e.removeAttribute(s);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(s):e.setAttribute(s,l);break;case"popover":Ne("beforetoggle",e),Ne("toggle",e),$r(e,"popover",l);break;case"xlinkActuate":da(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":da(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":da(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":da(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":da(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":da(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":da(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":da(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":da(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":$r(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=qg.get(s)||s,$r(e,s,l))}}function mc(e,t,s,l,c,d){switch(s){case"style":Bu(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(o(61));if(s=l.__html,s!=null){if(c.children!=null)throw Error(o(60));e.innerHTML=s}}break;case"children":typeof l=="string"?Bs(e,l):(typeof l=="number"||typeof l=="bigint")&&Bs(e,""+l);break;case"onScroll":l!=null&&Ne("scroll",e);break;case"onScrollEnd":l!=null&&Ne("scrollend",e);break;case"onClick":l!=null&&(e.onclick=ha);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cu.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(c=s.endsWith("Capture"),t=s.slice(2,c?s.length-7:void 0),d=e[_t]||null,d=d!=null?d[s]:null,typeof d=="function"&&e.removeEventListener(t,d,c),typeof l=="function")){typeof d!="function"&&d!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(t,l,c);break e}s in e?e[s]=l:l===!0?e.setAttribute(s,""):$r(e,s,l)}}}function mt(e,t,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ne("error",e),Ne("load",e);var l=!1,c=!1,d;for(d in s)if(s.hasOwnProperty(d)){var p=s[d];if(p!=null)switch(d){case"src":l=!0;break;case"srcSet":c=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,d,p,s,null)}}c&&Be(e,t,"srcSet",s.srcSet,s,null),l&&Be(e,t,"src",s.src,s,null);return;case"input":Ne("invalid",e);var b=d=p=c=null,C=null,$=null;for(l in s)if(s.hasOwnProperty(l)){var Y=s[l];if(Y!=null)switch(l){case"name":c=Y;break;case"type":p=Y;break;case"checked":C=Y;break;case"defaultChecked":$=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(o(137,t));break;default:Be(e,t,l,Y,s,null)}}Ru(e,d,b,C,$,p,c,!1);return;case"select":Ne("invalid",e),l=p=d=null;for(c in s)if(s.hasOwnProperty(c)&&(b=s[c],b!=null))switch(c){case"value":d=b;break;case"defaultValue":p=b;break;case"multiple":l=b;default:Be(e,t,c,b,s,null)}t=d,s=p,e.multiple=!!l,t!=null?Ms(e,!!l,t,!1):s!=null&&Ms(e,!!l,s,!0);return;case"textarea":Ne("invalid",e),d=c=l=null;for(p in s)if(s.hasOwnProperty(p)&&(b=s[p],b!=null))switch(p){case"value":l=b;break;case"defaultValue":c=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(o(91));break;default:Be(e,t,p,b,s,null)}zu(e,l,c,d);return;case"option":for(C in s)if(s.hasOwnProperty(C)&&(l=s[C],l!=null))switch(C){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Be(e,t,C,l,s,null)}return;case"dialog":Ne("beforetoggle",e),Ne("toggle",e),Ne("cancel",e),Ne("close",e);break;case"iframe":case"object":Ne("load",e);break;case"video":case"audio":for(l=0;l<hr.length;l++)Ne(hr[l],e);break;case"image":Ne("error",e),Ne("load",e);break;case"details":Ne("toggle",e);break;case"embed":case"source":case"link":Ne("error",e),Ne("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($ in s)if(s.hasOwnProperty($)&&(l=s[$],l!=null))switch($){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,t));default:Be(e,t,$,l,s,null)}return;default:if(El(t)){for(Y in s)s.hasOwnProperty(Y)&&(l=s[Y],l!==void 0&&mc(e,t,Y,l,s,void 0));return}}for(b in s)s.hasOwnProperty(b)&&(l=s[b],l!=null&&Be(e,t,b,l,s,null))}function f0(e,t,s,l){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var c=null,d=null,p=null,b=null,C=null,$=null,Y=null;for(I in s){var J=s[I];if(s.hasOwnProperty(I)&&J!=null)switch(I){case"checked":break;case"value":break;case"defaultValue":C=J;default:l.hasOwnProperty(I)||Be(e,t,I,null,l,J)}}for(var V in l){var I=l[V];if(J=s[V],l.hasOwnProperty(V)&&(I!=null||J!=null))switch(V){case"type":d=I;break;case"name":c=I;break;case"checked":$=I;break;case"defaultChecked":Y=I;break;case"value":p=I;break;case"defaultValue":b=I;break;case"children":case"dangerouslySetInnerHTML":if(I!=null)throw Error(o(137,t));break;default:I!==J&&Be(e,t,V,I,l,J)}}Sl(e,p,b,C,$,Y,d,c);return;case"select":I=p=b=V=null;for(d in s)if(C=s[d],s.hasOwnProperty(d)&&C!=null)switch(d){case"value":break;case"multiple":I=C;default:l.hasOwnProperty(d)||Be(e,t,d,null,l,C)}for(c in l)if(d=l[c],C=s[c],l.hasOwnProperty(c)&&(d!=null||C!=null))switch(c){case"value":V=d;break;case"defaultValue":b=d;break;case"multiple":p=d;default:d!==C&&Be(e,t,c,d,l,C)}t=b,s=p,l=I,V!=null?Ms(e,!!s,V,!1):!!l!=!!s&&(t!=null?Ms(e,!!s,t,!0):Ms(e,!!s,s?[]:"",!1));return;case"textarea":I=V=null;for(b in s)if(c=s[b],s.hasOwnProperty(b)&&c!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:Be(e,t,b,null,l,c)}for(p in l)if(c=l[p],d=s[p],l.hasOwnProperty(p)&&(c!=null||d!=null))switch(p){case"value":V=c;break;case"defaultValue":I=c;break;case"children":break;case"dangerouslySetInnerHTML":if(c!=null)throw Error(o(91));break;default:c!==d&&Be(e,t,p,c,l,d)}Uu(e,V,I);return;case"option":for(var ne in s)if(V=s[ne],s.hasOwnProperty(ne)&&V!=null&&!l.hasOwnProperty(ne))switch(ne){case"selected":e.selected=!1;break;default:Be(e,t,ne,null,l,V)}for(C in l)if(V=l[C],I=s[C],l.hasOwnProperty(C)&&V!==I&&(V!=null||I!=null))switch(C){case"selected":e.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:Be(e,t,C,V,l,I)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var he in s)V=s[he],s.hasOwnProperty(he)&&V!=null&&!l.hasOwnProperty(he)&&Be(e,t,he,null,l,V);for($ in l)if(V=l[$],I=s[$],l.hasOwnProperty($)&&V!==I&&(V!=null||I!=null))switch($){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(o(137,t));break;default:Be(e,t,$,V,l,I)}return;default:if(El(t)){for(var Le in s)V=s[Le],s.hasOwnProperty(Le)&&V!==void 0&&!l.hasOwnProperty(Le)&&mc(e,t,Le,void 0,l,V);for(Y in l)V=l[Y],I=s[Y],!l.hasOwnProperty(Y)||V===I||V===void 0&&I===void 0||mc(e,t,Y,V,l,I);return}}for(var M in s)V=s[M],s.hasOwnProperty(M)&&V!=null&&!l.hasOwnProperty(M)&&Be(e,t,M,null,l,V);for(J in l)V=l[J],I=s[J],!l.hasOwnProperty(J)||V===I||V==null&&I==null||Be(e,t,J,V,l,I)}function $f(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function m0(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,s=performance.getEntriesByType("resource"),l=0;l<s.length;l++){var c=s[l],d=c.transferSize,p=c.initiatorType,b=c.duration;if(d&&b&&$f(p)){for(p=0,b=c.responseEnd,l+=1;l<s.length;l++){var C=s[l],$=C.startTime;if($>b)break;var Y=C.transferSize,J=C.initiatorType;Y&&$f(J)&&(C=C.responseEnd,p+=Y*(C<b?1:(b-$)/(C-$)))}if(--l,t+=8*(d+p)/(c.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var gc=null,pc=null;function Bi(e){return e.nodeType===9?e:e.ownerDocument}function qf(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vf(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function yc(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var xc=null;function g0(){var e=window.event;return e&&e.type==="popstate"?e===xc?!1:(xc=e,!0):(xc=null,!1)}var Hf=typeof setTimeout=="function"?setTimeout:void 0,p0=typeof clearTimeout=="function"?clearTimeout:void 0,If=typeof Promise=="function"?Promise:void 0,y0=typeof queueMicrotask=="function"?queueMicrotask:typeof If<"u"?function(e){return If.resolve(null).then(e).catch(x0)}:Hf;function x0(e){setTimeout(function(){throw e})}function Fa(e){return e==="head"}function Gf(e,t){var s=t,l=0;do{var c=s.nextSibling;if(e.removeChild(s),c&&c.nodeType===8)if(s=c.data,s==="/$"||s==="/&"){if(l===0){e.removeChild(c),gn(t);return}l--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")l++;else if(s==="html")mr(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,mr(s);for(var d=s.firstChild;d;){var p=d.nextSibling,b=d.nodeName;d[Dn]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||s.removeChild(d),d=p}}else s==="body"&&mr(e.ownerDocument.body);s=c}while(s);gn(t)}function Pf(e,t){var s=e;e=0;do{var l=s.nextSibling;if(s.nodeType===1?t?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(t?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),l&&l.nodeType===8)if(s=l.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=l}while(s)}function vc(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var s=t;switch(t=t.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":vc(s),wl(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function v0(e,t,s,l){for(;e.nodeType===1;){var c=s;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Dn])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==c.rel||e.getAttribute("href")!==(c.href==null||c.href===""?null:c.href)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin)||e.getAttribute("title")!==(c.title==null?null:c.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(c.src==null?null:c.src)||e.getAttribute("type")!==(c.type==null?null:c.type)||e.getAttribute("crossorigin")!==(c.crossOrigin==null?null:c.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var d=c.name==null?null:""+c.name;if(c.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Jt(e.nextSibling),e===null)break}return null}function b0(e,t,s){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Jt(e.nextSibling),e===null))return null;return e}function Yf(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Jt(e.nextSibling),e===null))return null;return e}function bc(e){return e.data==="$?"||e.data==="$~"}function _c(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function _0(e,t){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||s.readyState!=="loading")t();else{var l=function(){t(),s.removeEventListener("DOMContentLoaded",l)};s.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Jt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var jc=null;function Kf(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(t===0)return Jt(e.nextSibling);t--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||t++}e=e.nextSibling}return null}function Qf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(t===0)return e;t--}else s!=="/$"&&s!=="/&"||t++}e=e.previousSibling}return null}function Xf(e,t,s){switch(t=Bi(s),e){case"html":if(e=t.documentElement,!e)throw Error(o(452));return e;case"head":if(e=t.head,!e)throw Error(o(453));return e;case"body":if(e=t.body,!e)throw Error(o(454));return e;default:throw Error(o(451))}}function mr(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);wl(e)}var Zt=new Map,Jf=new Set;function Li(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ca=F.d;F.d={f:j0,r:w0,D:N0,C:S0,L:T0,m:E0,X:A0,S:C0,M:O0};function j0(){var e=Ca.f(),t=Ai();return e||t}function w0(e){var t=Rs(e);t!==null&&t.tag===5&&t.type==="form"?hh(t):Ca.r(e)}var hn=typeof document>"u"?null:document;function Zf(e,t,s){var l=hn;if(l&&typeof t=="string"&&t){var c=It(t);c='link[rel="'+e+'"][href="'+c+'"]',typeof s=="string"&&(c+='[crossorigin="'+s+'"]'),Jf.has(c)||(Jf.add(c),e={rel:e,crossOrigin:s,href:t},l.querySelector(c)===null&&(t=l.createElement("link"),mt(t,"link",e),ot(t),l.head.appendChild(t)))}}function N0(e){Ca.D(e),Zf("dns-prefetch",e,null)}function S0(e,t){Ca.C(e,t),Zf("preconnect",e,t)}function T0(e,t,s){Ca.L(e,t,s);var l=hn;if(l&&e&&t){var c='link[rel="preload"][as="'+It(t)+'"]';t==="image"&&s&&s.imageSrcSet?(c+='[imagesrcset="'+It(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(c+='[imagesizes="'+It(s.imageSizes)+'"]')):c+='[href="'+It(e)+'"]';var d=c;switch(t){case"style":d=fn(e);break;case"script":d=mn(e)}Zt.has(d)||(e=w({rel:"preload",href:t==="image"&&s&&s.imageSrcSet?void 0:e,as:t},s),Zt.set(d,e),l.querySelector(c)!==null||t==="style"&&l.querySelector(gr(d))||t==="script"&&l.querySelector(pr(d))||(t=l.createElement("link"),mt(t,"link",e),ot(t),l.head.appendChild(t)))}}function E0(e,t){Ca.m(e,t);var s=hn;if(s&&e){var l=t&&typeof t.as=="string"?t.as:"script",c='link[rel="modulepreload"][as="'+It(l)+'"][href="'+It(e)+'"]',d=c;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=mn(e)}if(!Zt.has(d)&&(e=w({rel:"modulepreload",href:e},t),Zt.set(d,e),s.querySelector(c)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(pr(d)))return}l=s.createElement("link"),mt(l,"link",e),ot(l),s.head.appendChild(l)}}}function C0(e,t,s){Ca.S(e,t,s);var l=hn;if(l&&e){var c=Us(l).hoistableStyles,d=fn(e);t=t||"default";var p=c.get(d);if(!p){var b={loading:0,preload:null};if(p=l.querySelector(gr(d)))b.loading=5;else{e=w({rel:"stylesheet",href:e,"data-precedence":t},s),(s=Zt.get(d))&&wc(e,s);var C=p=l.createElement("link");ot(C),mt(C,"link",e),C._p=new Promise(function($,Y){C.onload=$,C.onerror=Y}),C.addEventListener("load",function(){b.loading|=1}),C.addEventListener("error",function(){b.loading|=2}),b.loading|=4,$i(p,t,l)}p={type:"stylesheet",instance:p,count:1,state:b},c.set(d,p)}}}function A0(e,t){Ca.X(e,t);var s=hn;if(s&&e){var l=Us(s).hoistableScripts,c=mn(e),d=l.get(c);d||(d=s.querySelector(pr(c)),d||(e=w({src:e,async:!0},t),(t=Zt.get(c))&&Nc(e,t),d=s.createElement("script"),ot(d),mt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function O0(e,t){Ca.M(e,t);var s=hn;if(s&&e){var l=Us(s).hoistableScripts,c=mn(e),d=l.get(c);d||(d=s.querySelector(pr(c)),d||(e=w({src:e,async:!0,type:"module"},t),(t=Zt.get(c))&&Nc(e,t),d=s.createElement("script"),ot(d),mt(d,"link",e),s.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(c,d))}}function Ff(e,t,s,l){var c=(c=ue.current)?Li(c):null;if(!c)throw Error(o(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(t=fn(s.href),s=Us(c).hoistableStyles,l=s.get(t),l||(l={type:"style",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=fn(s.href);var d=Us(c).hoistableStyles,p=d.get(e);if(p||(c=c.ownerDocument||c,p={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,p),(d=c.querySelector(gr(e)))&&!d._p&&(p.instance=d,p.state.loading=5),Zt.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Zt.set(e,s),d||k0(c,e,s,p.state))),t&&l===null)throw Error(o(528,""));return p}if(t&&l!==null)throw Error(o(529,""));return null;case"script":return t=s.async,s=s.src,typeof s=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=mn(s),s=Us(c).hoistableScripts,l=s.get(t),l||(l={type:"script",instance:null,count:0,state:null},s.set(t,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,e))}}function fn(e){return'href="'+It(e)+'"'}function gr(e){return'link[rel="stylesheet"]['+e+"]"}function Wf(e){return w({},e,{"data-precedence":e.precedence,precedence:null})}function k0(e,t,s,l){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?l.loading=1:(t=e.createElement("link"),l.preload=t,t.addEventListener("load",function(){return l.loading|=1}),t.addEventListener("error",function(){return l.loading|=2}),mt(t,"link",s),ot(t),e.head.appendChild(t))}function mn(e){return'[src="'+It(e)+'"]'}function pr(e){return"script[async]"+e}function em(e,t,s){if(t.count++,t.instance===null)switch(t.type){case"style":var l=e.querySelector('style[data-href~="'+It(s.href)+'"]');if(l)return t.instance=l,ot(l),l;var c=w({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),ot(l),mt(l,"style",c),$i(l,s.precedence,e),t.instance=l;case"stylesheet":c=fn(s.href);var d=e.querySelector(gr(c));if(d)return t.state.loading|=4,t.instance=d,ot(d),d;l=Wf(s),(c=Zt.get(c))&&wc(l,c),d=(e.ownerDocument||e).createElement("link"),ot(d);var p=d;return p._p=new Promise(function(b,C){p.onload=b,p.onerror=C}),mt(d,"link",l),t.state.loading|=4,$i(d,s.precedence,e),t.instance=d;case"script":return d=mn(s.src),(c=e.querySelector(pr(d)))?(t.instance=c,ot(c),c):(l=s,(c=Zt.get(d))&&(l=w({},s),Nc(l,c)),e=e.ownerDocument||e,c=e.createElement("script"),ot(c),mt(c,"link",l),e.head.appendChild(c),t.instance=c);case"void":return null;default:throw Error(o(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(l=t.instance,t.state.loading|=4,$i(l,s.precedence,e));return t.instance}function $i(e,t,s){for(var l=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),c=l.length?l[l.length-1]:null,d=c,p=0;p<l.length;p++){var b=l[p];if(b.dataset.precedence===t)d=b;else if(d!==c)break}d?d.parentNode.insertBefore(e,d.nextSibling):(t=s.nodeType===9?s.head:s,t.insertBefore(e,t.firstChild))}function wc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Nc(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var qi=null;function tm(e,t,s){if(qi===null){var l=new Map,c=qi=new Map;c.set(s,l)}else c=qi,l=c.get(s),l||(l=new Map,c.set(s,l));if(l.has(e))return l;for(l.set(e,null),s=s.getElementsByTagName(e),c=0;c<s.length;c++){var d=s[c];if(!(d[Dn]||d[ut]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var p=d.getAttribute(t)||"";p=e+p;var b=l.get(p);b?b.push(d):l.set(p,[d])}}return l}function am(e,t,s){e=e.ownerDocument||e,e.head.insertBefore(s,t==="title"?e.querySelector("head > title"):null)}function D0(e,t,s){if(s===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function sm(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function R0(e,t,s,l){if(s.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var c=fn(l.href),d=t.querySelector(gr(c));if(d){t=d._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Vi.bind(e),t.then(e,e)),s.state.loading|=4,s.instance=d,ot(d);return}d=t.ownerDocument||t,l=Wf(l),(c=Zt.get(c))&&wc(l,c),d=d.createElement("link"),ot(d);var p=d;p._p=new Promise(function(b,C){p.onload=b,p.onerror=C}),mt(d,"link",l),s.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,t),(t=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=Vi.bind(e),t.addEventListener("load",s),t.addEventListener("error",s))}}var Sc=0;function U0(e,t){return e.stylesheets&&e.count===0&&Ii(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var l=setTimeout(function(){if(e.stylesheets&&Ii(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+t);0<e.imgBytes&&Sc===0&&(Sc=62500*m0());var c=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Ii(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>Sc?50:800)+t);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(c)}}:null}function Vi(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ii(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Hi=null;function Ii(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Hi=new Map,t.forEach(z0,e),Hi=null,Vi.call(e))}function z0(e,t){if(!(t.state.loading&4)){var s=Hi.get(e);if(s)var l=s.get(null);else{s=new Map,Hi.set(e,s);for(var c=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<c.length;d++){var p=c[d];(p.nodeName==="LINK"||p.getAttribute("media")!=="not all")&&(s.set(p.dataset.precedence,p),l=p)}l&&s.set(null,l)}c=t.instance,p=c.getAttribute("data-precedence"),d=s.get(p)||l,d===l&&s.set(null,c),s.set(p,c),this.count++,l=Vi.bind(this),c.addEventListener("load",l),c.addEventListener("error",l),d?d.parentNode.insertBefore(c,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(c,e.firstChild)),t.state.loading|=4}}var yr={$$typeof:U,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function M0(e,t,s,l,c,d,p,b,C){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.hiddenUpdates=vl(null),this.identifierPrefix=l,this.onUncaughtError=c,this.onCaughtError=d,this.onRecoverableError=p,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=C,this.incompleteTransitions=new Map}function nm(e,t,s,l,c,d,p,b,C,$,Y,J){return e=new M0(e,t,s,p,C,$,Y,J,b),t=1,d===!0&&(t|=24),d=Dt(3,null,null,t),e.current=d,d.stateNode=e,t=so(),t.refCount++,e.pooledCache=t,t.refCount++,d.memoizedState={element:l,isDehydrated:s,cache:t},lo(d),e}function rm(e){return e?(e=Gs,e):Gs}function im(e,t,s,l,c,d){c=rm(c),l.context===null?l.context=c:l.pendingContext=c,l=Va(t),l.payload={element:s},d=d===void 0?null:d,d!==null&&(l.callback=d),s=Ha(e,l,t),s!==null&&(Et(s,e,t),Xn(s,e,t))}function lm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function Tc(e,t){lm(e,t),(e=e.alternate)&&lm(e,t)}function om(e){if(e.tag===13||e.tag===31){var t=hs(e,67108864);t!==null&&Et(t,e,67108864),Tc(e,67108864)}}function cm(e){if(e.tag===13||e.tag===31){var t=Bt();t=bl(t);var s=hs(e,t);s!==null&&Et(s,e,t),Tc(e,t)}}var Gi=!0;function B0(e,t,s,l){var c=S.T;S.T=null;var d=F.p;try{F.p=2,Ec(e,t,s,l)}finally{F.p=d,S.T=c}}function L0(e,t,s,l){var c=S.T;S.T=null;var d=F.p;try{F.p=8,Ec(e,t,s,l)}finally{F.p=d,S.T=c}}function Ec(e,t,s,l){if(Gi){var c=Cc(l);if(c===null)fc(e,t,l,Pi,s),dm(e,l);else if(q0(c,e,t,s,l))l.stopPropagation();else if(dm(e,l),t&4&&-1<$0.indexOf(e)){for(;c!==null;){var d=Rs(c);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var p=ls(d.pendingLanes);if(p!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;p;){var C=1<<31-Ot(p);b.entanglements[1]|=C,p&=~C}ua(d),(De&6)===0&&(Ei=Ct()+500,dr(0))}}break;case 31:case 13:b=hs(d,2),b!==null&&Et(b,d,2),Ai(),Tc(d,2)}if(d=Cc(l),d===null&&fc(e,t,l,Pi,s),d===c)break;c=d}c!==null&&l.stopPropagation()}else fc(e,t,l,null,s)}}function Cc(e){return e=Al(e),Ac(e)}var Pi=null;function Ac(e){if(Pi=null,e=Ds(e),e!==null){var t=h(e);if(t===null)e=null;else{var s=t.tag;if(s===13){if(e=f(t),e!==null)return e;e=null}else if(s===31){if(e=m(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Pi=e,null}function um(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ng()){case yu:return 2;case xu:return 8;case Ur:case Sg:return 32;case vu:return 268435456;default:return 32}default:return 32}}var Oc=!1,Wa=null,es=null,ts=null,xr=new Map,vr=new Map,as=[],$0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function dm(e,t){switch(e){case"focusin":case"focusout":Wa=null;break;case"dragenter":case"dragleave":es=null;break;case"mouseover":case"mouseout":ts=null;break;case"pointerover":case"pointerout":xr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":vr.delete(t.pointerId)}}function br(e,t,s,l,c,d){return e===null||e.nativeEvent!==d?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:d,targetContainers:[c]},t!==null&&(t=Rs(t),t!==null&&om(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function q0(e,t,s,l,c){switch(t){case"focusin":return Wa=br(Wa,e,t,s,l,c),!0;case"dragenter":return es=br(es,e,t,s,l,c),!0;case"mouseover":return ts=br(ts,e,t,s,l,c),!0;case"pointerover":var d=c.pointerId;return xr.set(d,br(xr.get(d)||null,e,t,s,l,c)),!0;case"gotpointercapture":return d=c.pointerId,vr.set(d,br(vr.get(d)||null,e,t,s,l,c)),!0}return!1}function hm(e){var t=Ds(e.target);if(t!==null){var s=h(t);if(s!==null){if(t=s.tag,t===13){if(t=f(s),t!==null){e.blockedOn=t,Su(e.priority,function(){cm(s)});return}}else if(t===31){if(t=m(s),t!==null){e.blockedOn=t,Su(e.priority,function(){cm(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Yi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Cc(e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Cl=l,s.target.dispatchEvent(l),Cl=null}else return t=Rs(s),t!==null&&om(t),e.blockedOn=s,!1;t.shift()}return!0}function fm(e,t,s){Yi(e)&&s.delete(t)}function V0(){Oc=!1,Wa!==null&&Yi(Wa)&&(Wa=null),es!==null&&Yi(es)&&(es=null),ts!==null&&Yi(ts)&&(ts=null),xr.forEach(fm),vr.forEach(fm)}function Ki(e,t){e.blockedOn===t&&(e.blockedOn=null,Oc||(Oc=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,V0)))}var Qi=null;function mm(e){Qi!==e&&(Qi=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Qi===e&&(Qi=null);for(var t=0;t<e.length;t+=3){var s=e[t],l=e[t+1],c=e[t+2];if(typeof l!="function"){if(Ac(l||s)===null)continue;break}var d=Rs(s);d!==null&&(e.splice(t,3),t-=3,Co(d,{pending:!0,data:c,method:s.method,action:l},l,c))}}))}function gn(e){function t(C){return Ki(C,e)}Wa!==null&&Ki(Wa,e),es!==null&&Ki(es,e),ts!==null&&Ki(ts,e),xr.forEach(t),vr.forEach(t);for(var s=0;s<as.length;s++){var l=as[s];l.blockedOn===e&&(l.blockedOn=null)}for(;0<as.length&&(s=as[0],s.blockedOn===null);)hm(s),s.blockedOn===null&&as.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(l=0;l<s.length;l+=3){var c=s[l],d=s[l+1],p=c[_t]||null;if(typeof d=="function")p||mm(s);else if(p){var b=null;if(d&&d.hasAttribute("formAction")){if(c=d,p=d[_t]||null)b=p.formAction;else if(Ac(c)!==null)continue}else b=p.action;typeof b=="function"?s[l+1]=b:(s.splice(l,3),l-=3),mm(s)}}}function gm(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(p){return c=p})},focusReset:"manual",scroll:"manual"})}function t(){c!==null&&(c(),c=null),l||setTimeout(s,20)}function s(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,c=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(s,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),c!==null&&(c(),c=null)}}}function kc(e){this._internalRoot=e}Xi.prototype.render=kc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));var s=t.current,l=Bt();im(s,l,e,t,null,null)},Xi.prototype.unmount=kc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;im(e.current,2,null,e,null,null),Ai(),t[ks]=null}};function Xi(e){this._internalRoot=e}Xi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nu();e={blockedOn:null,target:e,priority:t};for(var s=0;s<as.length&&t!==0&&t<as[s].priority;s++);as.splice(s,0,e),s===0&&hm(e)}};var pm=a.version;if(pm!=="19.2.3")throw Error(o(527,pm,"19.2.3"));F.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=x(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var H0={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:S,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ji=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ji.isDisabled&&Ji.supportsFiber)try{An=Ji.inject(H0),At=Ji}catch{}}return jr.createRoot=function(e,t){if(!u(e))throw Error(o(299));var s=!1,l="",c=jh,d=wh,p=Nh;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onUncaughtError!==void 0&&(c=t.onUncaughtError),t.onCaughtError!==void 0&&(d=t.onCaughtError),t.onRecoverableError!==void 0&&(p=t.onRecoverableError)),t=nm(e,1,!1,null,null,s,l,null,c,d,p,gm),e[ks]=t.current,hc(e),new kc(t)},jr.hydrateRoot=function(e,t,s){if(!u(e))throw Error(o(299));var l=!1,c="",d=jh,p=wh,b=Nh,C=null;return s!=null&&(s.unstable_strictMode===!0&&(l=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(b=s.onRecoverableError),s.formState!==void 0&&(C=s.formState)),t=nm(e,1,!0,t,s??null,l,c,C,d,p,b,gm),t.context=rm(null),s=t.current,l=Bt(),l=bl(l),c=Va(l),c.callback=null,Ha(s,c,l),s=l,t.current.lanes=s,kn(t,s),ua(t),e[ks]=t.current,hc(e),new Xi(t)},jr.version="19.2.3",jr}var Tm;function F0(){if(Tm)return Uc.exports;Tm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Uc.exports=Z0(),Uc.exports}var W0=F0();const ey=Fm(W0);function ul(n,a){var i={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&a.indexOf(o)<0&&(i[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,o=Object.getOwnPropertySymbols(n);u<o.length;u++)a.indexOf(o[u])<0&&Object.prototype.propertyIsEnumerable.call(n,o[u])&&(i[o[u]]=n[o[u]]);return i}function ty(n,a,i,o){function u(h){return h instanceof i?h:new i(function(f){f(h)})}return new(i||(i=Promise))(function(h,f){function m(v){try{x(o.next(v))}catch(w){f(w)}}function g(v){try{x(o.throw(v))}catch(w){f(w)}}function x(v){v.done?h(v.value):u(v.value).then(m,g)}x((o=o.apply(n,a||[])).next())})}const ay=n=>n?(...a)=>n(...a):(...a)=>fetch(...a);class cu extends Error{constructor(a,i="FunctionsError",o){super(a),this.name=i,this.context=o}}class sy extends cu{constructor(a){super("Failed to send a request to the Edge Function","FunctionsFetchError",a)}}class Em extends cu{constructor(a){super("Relay Error invoking the Edge Function","FunctionsRelayError",a)}}class Cm extends cu{constructor(a){super("Edge Function returned a non-2xx status code","FunctionsHttpError",a)}}var Jc;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(Jc||(Jc={}));class ny{constructor(a,{headers:i={},customFetch:o,region:u=Jc.Any}={}){this.url=a,this.headers=i,this.region=u,this.fetch=ay(o)}setAuth(a){this.headers.Authorization=`Bearer ${a}`}invoke(a){return ty(this,arguments,void 0,function*(i,o={}){var u;let h,f;try{const{headers:m,method:g,body:x,signal:v,timeout:w}=o;let j={},{region:_}=o;_||(_=this.region);const y=new URL(`${this.url}/${i}`);_&&_!=="any"&&(j["x-region"]=_,y.searchParams.set("forceFunctionRegion",_));let N;x&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&x instanceof Blob||x instanceof ArrayBuffer?(j["Content-Type"]="application/octet-stream",N=x):typeof x=="string"?(j["Content-Type"]="text/plain",N=x):typeof FormData<"u"&&x instanceof FormData?N=x:(j["Content-Type"]="application/json",N=JSON.stringify(x)):x&&typeof x!="string"&&!(typeof Blob<"u"&&x instanceof Blob)&&!(x instanceof ArrayBuffer)&&!(typeof FormData<"u"&&x instanceof FormData)?N=JSON.stringify(x):N=x;let O=v;w&&(f=new AbortController,h=setTimeout(()=>f.abort(),w),v?(O=f.signal,v.addEventListener("abort",()=>f.abort())):O=f.signal);const D=yield this.fetch(y.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},j),this.headers),m),body:N,signal:O}).catch(G=>{throw new sy(G)}),z=D.headers.get("x-relay-error");if(z&&z==="true")throw new Em(D);if(!D.ok)throw new Cm(D);let U=((u=D.headers.get("Content-Type"))!==null&&u!==void 0?u:"text/plain").split(";")[0].trim(),E;return U==="application/json"?E=yield D.json():U==="application/octet-stream"||U==="application/pdf"?E=yield D.blob():U==="text/event-stream"?E=D:U==="multipart/form-data"?E=yield D.formData():E=yield D.text(),{data:E,error:null,response:D}}catch(m){return{data:null,error:m,response:m instanceof Cm||m instanceof Em?m.context:void 0}}finally{h&&clearTimeout(h)}})}}var ry=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},iy=class{constructor(n){var a,i;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(a=n.shouldThrowOnError)!==null&&a!==void 0?a:!1,this.signal=n.signal,this.isMaybeSingle=(i=n.isMaybeSingle)!==null&&i!==void 0?i:!1,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,a){return this.headers=new Headers(this.headers),this.headers.set(n,a),this}then(n,a){var i=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let u=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async h=>{let f=null,m=null,g=null,x=h.status,v=h.statusText;if(h.ok){var w,j;if(i.method!=="HEAD"){var _;const D=await h.text();D===""||(i.headers.get("Accept")==="text/csv"||i.headers.get("Accept")&&(!((_=i.headers.get("Accept"))===null||_===void 0)&&_.includes("application/vnd.pgrst.plan+text"))?m=D:m=JSON.parse(D))}const N=(w=i.headers.get("Prefer"))===null||w===void 0?void 0:w.match(/count=(exact|planned|estimated)/),O=(j=h.headers.get("content-range"))===null||j===void 0?void 0:j.split("/");N&&O&&O.length>1&&(g=parseInt(O[1])),i.isMaybeSingle&&i.method==="GET"&&Array.isArray(m)&&(m.length>1?(f={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,g=null,x=406,v="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var y;const N=await h.text();try{f=JSON.parse(N),Array.isArray(f)&&h.status===404&&(m=[],f=null,x=200,v="OK")}catch{h.status===404&&N===""?(x=204,v="No Content"):f={message:N}}if(f&&i.isMaybeSingle&&(!(f==null||(y=f.details)===null||y===void 0)&&y.includes("0 rows"))&&(f=null,x=200,v="OK"),f&&i.shouldThrowOnError)throw new ry(f)}return{error:f,data:m,count:g,status:x,statusText:v}});return this.shouldThrowOnError||(u=u.catch(h=>{var f;let m="";const g=h==null?void 0:h.cause;if(g){var x,v,w,j;const y=(x=g==null?void 0:g.message)!==null&&x!==void 0?x:"",N=(v=g==null?void 0:g.code)!==null&&v!==void 0?v:"";m=`${(w=h==null?void 0:h.name)!==null&&w!==void 0?w:"FetchError"}: ${h==null?void 0:h.message}`,m+=`

Caused by: ${(j=g==null?void 0:g.name)!==null&&j!==void 0?j:"Error"}: ${y}`,N&&(m+=` (${N})`),g!=null&&g.stack&&(m+=`
${g.stack}`)}else{var _;m=(_=h==null?void 0:h.stack)!==null&&_!==void 0?_:""}return{error:{message:`${(f=h==null?void 0:h.name)!==null&&f!==void 0?f:"FetchError"}: ${h==null?void 0:h.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),u.then(n,a)}returns(){return this}overrideTypes(){return this}},ly=class extends iy{select(n){let a=!1;const i=(n??"*").split("").map(o=>/\s/.test(o)&&!a?"":(o==='"'&&(a=!a),o)).join("");return this.url.searchParams.set("select",i),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:a=!0,nullsFirst:i,foreignTable:o,referencedTable:u=o}={}){const h=u?`${u}.order`:"order",f=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${f?`${f},`:""}${n}.${a?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:a,referencedTable:i=a}={}){const o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${n}`),this}range(n,a,{foreignTable:i,referencedTable:o=i}={}){const u=typeof o>"u"?"offset":`${o}.offset`,h=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(u,`${n}`),this.url.searchParams.set(h,`${a-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:a=!1,settings:i=!1,buffers:o=!1,wal:u=!1,format:h="text"}={}){var f;const m=[n?"analyze":null,a?"verbose":null,i?"settings":null,o?"buffers":null,u?"wal":null].filter(Boolean).join("|"),g=(f=this.headers.get("Accept"))!==null&&f!==void 0?f:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${h}; for="${g}"; options=${m};`),h==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}};const Am=new RegExp("[,()]");var wn=class extends ly{eq(n,a){return this.url.searchParams.append(n,`eq.${a}`),this}neq(n,a){return this.url.searchParams.append(n,`neq.${a}`),this}gt(n,a){return this.url.searchParams.append(n,`gt.${a}`),this}gte(n,a){return this.url.searchParams.append(n,`gte.${a}`),this}lt(n,a){return this.url.searchParams.append(n,`lt.${a}`),this}lte(n,a){return this.url.searchParams.append(n,`lte.${a}`),this}like(n,a){return this.url.searchParams.append(n,`like.${a}`),this}likeAllOf(n,a){return this.url.searchParams.append(n,`like(all).{${a.join(",")}}`),this}likeAnyOf(n,a){return this.url.searchParams.append(n,`like(any).{${a.join(",")}}`),this}ilike(n,a){return this.url.searchParams.append(n,`ilike.${a}`),this}ilikeAllOf(n,a){return this.url.searchParams.append(n,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(n,a){return this.url.searchParams.append(n,`ilike(any).{${a.join(",")}}`),this}regexMatch(n,a){return this.url.searchParams.append(n,`match.${a}`),this}regexIMatch(n,a){return this.url.searchParams.append(n,`imatch.${a}`),this}is(n,a){return this.url.searchParams.append(n,`is.${a}`),this}isDistinct(n,a){return this.url.searchParams.append(n,`isdistinct.${a}`),this}in(n,a){const i=Array.from(new Set(a)).map(o=>typeof o=="string"&&Am.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`in.(${i})`),this}notIn(n,a){const i=Array.from(new Set(a)).map(o=>typeof o=="string"&&Am.test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(n,`not.in.(${i})`),this}contains(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cs.{${a.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(a)}`),this}containedBy(n,a){return typeof a=="string"?this.url.searchParams.append(n,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(n,`cd.{${a.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(a)}`),this}rangeGt(n,a){return this.url.searchParams.append(n,`sr.${a}`),this}rangeGte(n,a){return this.url.searchParams.append(n,`nxl.${a}`),this}rangeLt(n,a){return this.url.searchParams.append(n,`sl.${a}`),this}rangeLte(n,a){return this.url.searchParams.append(n,`nxr.${a}`),this}rangeAdjacent(n,a){return this.url.searchParams.append(n,`adj.${a}`),this}overlaps(n,a){return typeof a=="string"?this.url.searchParams.append(n,`ov.${a}`):this.url.searchParams.append(n,`ov.{${a.join(",")}}`),this}textSearch(n,a,{config:i,type:o}={}){let u="";o==="plain"?u="pl":o==="phrase"?u="ph":o==="websearch"&&(u="w");const h=i===void 0?"":`(${i})`;return this.url.searchParams.append(n,`${u}fts${h}.${a}`),this}match(n){return Object.entries(n).forEach(([a,i])=>{this.url.searchParams.append(a,`eq.${i}`)}),this}not(n,a,i){return this.url.searchParams.append(n,`not.${a}.${i}`),this}or(n,{foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.or`:"or";return this.url.searchParams.append(o,`(${n})`),this}filter(n,a,i){return this.url.searchParams.append(n,`${a}.${i}`),this}},oy=class{constructor(n,{headers:a={},schema:i,fetch:o}){this.url=n,this.headers=new Headers(a),this.schema=i,this.fetch=o}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,a){const{head:i=!1,count:o}=a??{},u=i?"HEAD":"GET";let h=!1;const f=(n??"*").split("").map(x=>/\s/.test(x)&&!h?"":(x==='"'&&(h=!h),x)).join(""),{url:m,headers:g}=this.cloneRequestState();return m.searchParams.set("select",f),o&&g.append("Prefer",`count=${o}`),new wn({method:u,url:m,headers:g,schema:this.schema,fetch:this.fetch})}insert(n,{count:a,defaultToNull:i=!0}={}){var o;const u="POST",{url:h,headers:f}=this.cloneRequestState();if(a&&f.append("Prefer",`count=${a}`),i||f.append("Prefer","missing=default"),Array.isArray(n)){const m=n.reduce((g,x)=>g.concat(Object.keys(x)),[]);if(m.length>0){const g=[...new Set(m)].map(x=>`"${x}"`);h.searchParams.set("columns",g.join(","))}}return new wn({method:u,url:h,headers:f,schema:this.schema,body:n,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}upsert(n,{onConflict:a,ignoreDuplicates:i=!1,count:o,defaultToNull:u=!0}={}){var h;const f="POST",{url:m,headers:g}=this.cloneRequestState();if(g.append("Prefer",`resolution=${i?"ignore":"merge"}-duplicates`),a!==void 0&&m.searchParams.set("on_conflict",a),o&&g.append("Prefer",`count=${o}`),u||g.append("Prefer","missing=default"),Array.isArray(n)){const x=n.reduce((v,w)=>v.concat(Object.keys(w)),[]);if(x.length>0){const v=[...new Set(x)].map(w=>`"${w}"`);m.searchParams.set("columns",v.join(","))}}return new wn({method:f,url:m,headers:g,schema:this.schema,body:n,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}update(n,{count:a}={}){var i;const o="PATCH",{url:u,headers:h}=this.cloneRequestState();return a&&h.append("Prefer",`count=${a}`),new wn({method:o,url:u,headers:h,schema:this.schema,body:n,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}delete({count:n}={}){var a;const i="DELETE",{url:o,headers:u}=this.cloneRequestState();return n&&u.append("Prefer",`count=${n}`),new wn({method:i,url:o,headers:u,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}},cy=class Wm{constructor(a,{headers:i={},schema:o,fetch:u}={}){this.url=a,this.headers=new Headers(i),this.schemaName=o,this.fetch=u}from(a){if(!a||typeof a!="string"||a.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new oy(new URL(`${this.url}/${a}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new Wm(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,i={},{head:o=!1,get:u=!1,count:h}={}){var f;let m;const g=new URL(`${this.url}/rpc/${a}`);let x;const v=_=>_!==null&&typeof _=="object"&&(!Array.isArray(_)||_.some(v)),w=o&&Object.values(i).some(v);w?(m="POST",x=i):o||u?(m=o?"HEAD":"GET",Object.entries(i).filter(([_,y])=>y!==void 0).map(([_,y])=>[_,Array.isArray(y)?`{${y.join(",")}}`:`${y}`]).forEach(([_,y])=>{g.searchParams.append(_,y)})):(m="POST",x=i);const j=new Headers(this.headers);return w?j.set("Prefer",h?`count=${h},return=minimal`:"return=minimal"):h&&j.set("Prefer",`count=${h}`),new wn({method:m,url:g,headers:j,schema:this.schemaName,body:x,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};class uy{constructor(){}static detectEnvironment(){var a;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((a=navigator.userAgent)===null||a===void 0)&&a.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const i=globalThis.process;if(i){const o=i.versions;if(o&&o.node){const u=o.node,h=parseInt(u.replace(/^v/,"").split(".")[0]);return h>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${h} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${h} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const a=this.detectEnvironment();if(a.constructor)return a.constructor;let i=a.error||"WebSocket not supported in this environment.";throw a.workaround&&(i+=`

Suggested solution: ${a.workaround}`),new Error(i)}static createWebSocket(a,i){const o=this.getWebSocketConstructor();return new o(a,i)}static isWebSocketSupported(){try{const a=this.detectEnvironment();return a.type==="native"||a.type==="ws"}catch{return!1}}}const dy="2.91.0",hy=`realtime-js/${dy}`,fy="1.0.0",eg="2.0.0",Om=eg,Zc=1e4,my=1e3,gy=100;var ns;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(ns||(ns={}));var it;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(it||(it={}));var ra;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(ra||(ra={}));var Fc;(function(n){n.websocket="websocket"})(Fc||(Fc={}));var Cs;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Cs||(Cs={}));class py{constructor(a){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=a??[]}encode(a,i){if(a.event===this.BROADCAST_EVENT&&!(a.payload instanceof ArrayBuffer)&&typeof a.payload.event=="string")return i(this._binaryEncodeUserBroadcastPush(a));let o=[a.join_ref,a.ref,a.topic,a.event,a.payload];return i(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(a){var i;return this._isArrayBuffer((i=a.payload)===null||i===void 0?void 0:i.payload)?this._encodeBinaryUserBroadcastPush(a):this._encodeJsonUserBroadcastPush(a)}_encodeBinaryUserBroadcastPush(a){var i,o;const u=(o=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(a,this.BINARY_ENCODING,u)}_encodeJsonUserBroadcastPush(a){var i,o;const u=(o=(i=a.payload)===null||i===void 0?void 0:i.payload)!==null&&o!==void 0?o:{},f=new TextEncoder().encode(JSON.stringify(u)).buffer;return this._encodeUserBroadcastPush(a,this.JSON_ENCODING,f)}_encodeUserBroadcastPush(a,i,o){var u,h;const f=a.topic,m=(u=a.ref)!==null&&u!==void 0?u:"",g=(h=a.join_ref)!==null&&h!==void 0?h:"",x=a.payload.event,v=this.allowedMetadataKeys?this._pick(a.payload,this.allowedMetadataKeys):{},w=Object.keys(v).length===0?"":JSON.stringify(v);if(g.length>255)throw new Error(`joinRef length ${g.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`topic length ${f.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`userEvent length ${x.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const j=this.USER_BROADCAST_PUSH_META_LENGTH+g.length+m.length+f.length+x.length+w.length,_=new ArrayBuffer(this.HEADER_LENGTH+j);let y=new DataView(_),N=0;y.setUint8(N++,this.KINDS.userBroadcastPush),y.setUint8(N++,g.length),y.setUint8(N++,m.length),y.setUint8(N++,f.length),y.setUint8(N++,x.length),y.setUint8(N++,w.length),y.setUint8(N++,i),Array.from(g,D=>y.setUint8(N++,D.charCodeAt(0))),Array.from(m,D=>y.setUint8(N++,D.charCodeAt(0))),Array.from(f,D=>y.setUint8(N++,D.charCodeAt(0))),Array.from(x,D=>y.setUint8(N++,D.charCodeAt(0))),Array.from(w,D=>y.setUint8(N++,D.charCodeAt(0)));var O=new Uint8Array(_.byteLength+o.byteLength);return O.set(new Uint8Array(_),0),O.set(new Uint8Array(o),_.byteLength),O.buffer}decode(a,i){if(this._isArrayBuffer(a)){let o=this._binaryDecode(a);return i(o)}if(typeof a=="string"){const o=JSON.parse(a),[u,h,f,m,g]=o;return i({join_ref:u,ref:h,topic:f,event:m,payload:g})}return i({})}_binaryDecode(a){const i=new DataView(a),o=i.getUint8(0),u=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(a,i,u)}}_decodeUserBroadcast(a,i,o){const u=i.getUint8(1),h=i.getUint8(2),f=i.getUint8(3),m=i.getUint8(4);let g=this.HEADER_LENGTH+4;const x=o.decode(a.slice(g,g+u));g=g+u;const v=o.decode(a.slice(g,g+h));g=g+h;const w=o.decode(a.slice(g,g+f));g=g+f;const j=a.slice(g,a.byteLength),_=m===this.JSON_ENCODING?JSON.parse(o.decode(j)):j,y={type:this.BROADCAST_EVENT,event:v,payload:_};return f>0&&(y.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:x,event:this.BROADCAST_EVENT,payload:y}}_isArrayBuffer(a){var i;return a instanceof ArrayBuffer||((i=a==null?void 0:a.constructor)===null||i===void 0?void 0:i.name)==="ArrayBuffer"}_pick(a,i){return!a||typeof a!="object"?{}:Object.fromEntries(Object.entries(a).filter(([o])=>i.includes(o)))}}class tg{constructor(a,i){this.callback=a,this.timerCalc=i,this.timer=void 0,this.tries=0,this.callback=a,this.timerCalc=i}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ve;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Ve||(Ve={}));const km=(n,a,i={})=>{var o;const u=(o=i.skipTypes)!==null&&o!==void 0?o:[];return a?Object.keys(a).reduce((h,f)=>(h[f]=yy(f,n,a,u),h),{}):{}},yy=(n,a,i,o)=>{const u=a.find(m=>m.name===n),h=u==null?void 0:u.type,f=i[n];return h&&!o.includes(h)?ag(h,f):Wc(f)},ag=(n,a)=>{if(n.charAt(0)==="_"){const i=n.slice(1,n.length);return _y(a,i)}switch(n){case Ve.bool:return xy(a);case Ve.float4:case Ve.float8:case Ve.int2:case Ve.int4:case Ve.int8:case Ve.numeric:case Ve.oid:return vy(a);case Ve.json:case Ve.jsonb:return by(a);case Ve.timestamp:return jy(a);case Ve.abstime:case Ve.date:case Ve.daterange:case Ve.int4range:case Ve.int8range:case Ve.money:case Ve.reltime:case Ve.text:case Ve.time:case Ve.timestamptz:case Ve.timetz:case Ve.tsrange:case Ve.tstzrange:return Wc(a);default:return Wc(a)}},Wc=n=>n,xy=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},vy=n=>{if(typeof n=="string"){const a=parseFloat(n);if(!Number.isNaN(a))return a}return n},by=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},_y=(n,a)=>{if(typeof n!="string")return n;const i=n.length-1,o=n[i];if(n[0]==="{"&&o==="}"){let h;const f=n.slice(1,i);try{h=JSON.parse("["+f+"]")}catch{h=f?f.split(","):[]}return h.map(m=>ag(a,m))}return n},jy=n=>typeof n=="string"?n.replace(" ","T"):n,sg=n=>{const a=new URL(n);return a.protocol=a.protocol.replace(/^ws/i,"http"),a.pathname=a.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),a.pathname===""||a.pathname==="/"?a.pathname="/api/broadcast":a.pathname=a.pathname+"/api/broadcast",a.href};class Lc{constructor(a,i,o={},u=Zc){this.channel=a,this.event=i,this.payload=o,this.timeout=u,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(a){this.timeout=a,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(a){this.payload=Object.assign(Object.assign({},this.payload),a)}receive(a,i){var o;return this._hasReceived(a)&&i((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:a,callback:i}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const a=i=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=i,this._matchReceive(i)};this.channel._on(this.refEvent,{},a),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(a,i){this.refEvent&&this.channel._trigger(this.refEvent,{status:a,response:i})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:a,response:i}){this.recHooks.filter(o=>o.status===a).forEach(o=>o.callback(i))}_hasReceived(a){return this.receivedResp&&this.receivedResp.status===a}}var Dm;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Dm||(Dm={}));class Nr{constructor(a,i){this.channel=a,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(i==null?void 0:i.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},u=>{const{onJoin:h,onLeave:f,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Nr.syncState(this.state,u,h,f),this.pendingDiffs.forEach(g=>{this.state=Nr.syncDiff(this.state,g,h,f)}),this.pendingDiffs=[],m()}),this.channel._on(o.diff,{},u=>{const{onJoin:h,onLeave:f,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(u):(this.state=Nr.syncDiff(this.state,u,h,f),m())}),this.onJoin((u,h,f)=>{this.channel._trigger("presence",{event:"join",key:u,currentPresences:h,newPresences:f})}),this.onLeave((u,h,f)=>{this.channel._trigger("presence",{event:"leave",key:u,currentPresences:h,leftPresences:f})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(a,i,o,u){const h=this.cloneDeep(a),f=this.transformState(i),m={},g={};return this.map(h,(x,v)=>{f[x]||(g[x]=v)}),this.map(f,(x,v)=>{const w=h[x];if(w){const j=v.map(O=>O.presence_ref),_=w.map(O=>O.presence_ref),y=v.filter(O=>_.indexOf(O.presence_ref)<0),N=w.filter(O=>j.indexOf(O.presence_ref)<0);y.length>0&&(m[x]=y),N.length>0&&(g[x]=N)}else m[x]=v}),this.syncDiff(h,{joins:m,leaves:g},o,u)}static syncDiff(a,i,o,u){const{joins:h,leaves:f}={joins:this.transformState(i.joins),leaves:this.transformState(i.leaves)};return o||(o=()=>{}),u||(u=()=>{}),this.map(h,(m,g)=>{var x;const v=(x=a[m])!==null&&x!==void 0?x:[];if(a[m]=this.cloneDeep(g),v.length>0){const w=a[m].map(_=>_.presence_ref),j=v.filter(_=>w.indexOf(_.presence_ref)<0);a[m].unshift(...j)}o(m,v,g)}),this.map(f,(m,g)=>{let x=a[m];if(!x)return;const v=g.map(w=>w.presence_ref);x=x.filter(w=>v.indexOf(w.presence_ref)<0),a[m]=x,u(m,x,g),x.length===0&&delete a[m]}),a}static map(a,i){return Object.getOwnPropertyNames(a).map(o=>i(o,a[o]))}static transformState(a){return a=this.cloneDeep(a),Object.getOwnPropertyNames(a).reduce((i,o)=>{const u=a[o];return"metas"in u?i[o]=u.metas.map(h=>(h.presence_ref=h.phx_ref,delete h.phx_ref,delete h.phx_ref_prev,h)):i[o]=u,i},{})}static cloneDeep(a){return JSON.parse(JSON.stringify(a))}onJoin(a){this.caller.onJoin=a}onLeave(a){this.caller.onLeave=a}onSync(a){this.caller.onSync=a}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Rm;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Rm||(Rm={}));var Sr;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Sr||(Sr={}));var Aa;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Aa||(Aa={}));class En{constructor(a,i={config:{}},o){var u,h;if(this.topic=a,this.params=i,this.socket=o,this.bindings={},this.state=it.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=a.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},i.config),this.timeout=this.socket.timeout,this.joinPush=new Lc(this,ra.join,this.params,this.timeout),this.rejoinTimer=new tg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=it.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(f=>f.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=it.closed,this.socket._remove(this)}),this._onError(f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",f=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,f),this.state=it.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ra.reply,{},(f,m)=>{this._trigger(this._replyEventName(m),f)}),this.presence=new Nr(this),this.broadcastEndpointURL=sg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((h=(u=this.params.config)===null||u===void 0?void 0:u.broadcast)===null||h===void 0)&&h.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(a,i=this.timeout){var o,u,h;if(this.socket.isConnected()||this.socket.connect(),this.state==it.closed){const{config:{broadcast:f,presence:m,private:g}}=this.params,x=(u=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(_=>_.filter))!==null&&u!==void 0?u:[],v=!!this.bindings[Sr.PRESENCE]&&this.bindings[Sr.PRESENCE].length>0||((h=this.params.config.presence)===null||h===void 0?void 0:h.enabled)===!0,w={},j={broadcast:f,presence:Object.assign(Object.assign({},m),{enabled:v}),postgres_changes:x,private:g};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(_=>a==null?void 0:a(Aa.CHANNEL_ERROR,_)),this._onClose(()=>a==null?void 0:a(Aa.CLOSED)),this.updateJoinPayload(Object.assign({config:j},w)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",async({postgres_changes:_})=>{var y;if(this.socket._isManualToken()||this.socket.setAuth(),_===void 0){a==null||a(Aa.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,O=(y=N==null?void 0:N.length)!==null&&y!==void 0?y:0,D=[];for(let z=0;z<O;z++){const U=N[z],{filter:{event:E,schema:G,table:W,filter:K}}=U,R=_&&_[z];if(R&&R.event===E&&En.isFilterValueEqual(R.schema,G)&&En.isFilterValueEqual(R.table,W)&&En.isFilterValueEqual(R.filter,K))D.push(Object.assign(Object.assign({},U),{id:R.id}));else{this.unsubscribe(),this.state=it.errored,a==null||a(Aa.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,a&&a(Aa.SUBSCRIBED);return}}).receive("error",_=>{this.state=it.errored,a==null||a(Aa.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(_).join(", ")||"error")))}).receive("timeout",()=>{a==null||a(Aa.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(a,i={}){return await this.send({type:"presence",event:"track",payload:a},i.timeout||this.timeout)}async untrack(a={}){return await this.send({type:"presence",event:"untrack"},a)}on(a,i,o){return this.state===it.joined&&a===Sr.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(a,i,o)}async httpSend(a,i,o={}){var u;if(i==null)return Promise.reject("Payload is required for httpSend()");const h={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(h.Authorization=`Bearer ${this.socket.accessTokenValue}`);const f={method:"POST",headers:h,body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,f,(u=o.timeout)!==null&&u!==void 0?u:this.timeout);if(m.status===202)return{success:!0};let g=m.statusText;try{const x=await m.json();g=x.error||x.message||g}catch{}return Promise.reject(new Error(g))}async send(a,i={}){var o,u;if(!this._canPush()&&a.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:h,payload:f}=a,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const g={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:h,payload:f,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);return await((u=x.body)===null||u===void 0?void 0:u.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(h=>{var f,m,g;const x=this._push(a.type,a,i.timeout||this.timeout);a.type==="broadcast"&&!(!((g=(m=(f=this.params)===null||f===void 0?void 0:f.config)===null||m===void 0?void 0:m.broadcast)===null||g===void 0)&&g.ack)&&h("ok"),x.receive("ok",()=>h("ok")),x.receive("error",()=>h("error")),x.receive("timeout",()=>h("timed out"))})}updateJoinPayload(a){this.joinPush.updatePayload(a)}unsubscribe(a=this.timeout){this.state=it.leaving;const i=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ra.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(u=>{o=new Lc(this,ra.leave,{},a),o.receive("ok",()=>{i(),u("ok")}).receive("timeout",()=>{i(),u("timed out")}).receive("error",()=>{u("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(a=>a.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=it.closed,this.bindings={}}async _fetchWithTimeout(a,i,o){const u=new AbortController,h=setTimeout(()=>u.abort(),o),f=await this.socket.fetch(a,Object.assign(Object.assign({},i),{signal:u.signal}));return clearTimeout(h),f}_push(a,i,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${a}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let u=new Lc(this,a,i,o);return this._canPush()?u.send():this._addToPushBuffer(u),u}_addToPushBuffer(a){if(a.startTimeout(),this.pushBuffer.push(a),this.pushBuffer.length>gy){const i=this.pushBuffer.shift();i&&(i.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${i.event}`,i.payload))}}_onMessage(a,i,o){return i}_isMember(a){return this.topic===a}_joinRef(){return this.joinPush.ref}_trigger(a,i,o){var u,h;const f=a.toLocaleLowerCase(),{close:m,error:g,leave:x,join:v}=ra;if(o&&[m,g,x,v].indexOf(f)>=0&&o!==this._joinRef())return;let j=this._onMessage(f,i,o);if(i&&!j)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(f)?(u=this.bindings.postgres_changes)===null||u===void 0||u.filter(_=>{var y,N,O;return((y=_.filter)===null||y===void 0?void 0:y.event)==="*"||((O=(N=_.filter)===null||N===void 0?void 0:N.event)===null||O===void 0?void 0:O.toLocaleLowerCase())===f}).map(_=>_.callback(j,o)):(h=this.bindings[f])===null||h===void 0||h.filter(_=>{var y,N,O,D,z,U,E,G;if(["broadcast","presence","postgres_changes"].includes(f))if("id"in _){const W=_.id,K=(y=_.filter)===null||y===void 0?void 0:y.event;return W&&((N=i.ids)===null||N===void 0?void 0:N.includes(W))&&(K==="*"||(K==null?void 0:K.toLocaleLowerCase())===((O=i.data)===null||O===void 0?void 0:O.type.toLocaleLowerCase()))&&(!(!((D=_.filter)===null||D===void 0)&&D.table)||_.filter.table===((z=i.data)===null||z===void 0?void 0:z.table))}else{const W=(E=(U=_==null?void 0:_.filter)===null||U===void 0?void 0:U.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return W==="*"||W===((G=i==null?void 0:i.event)===null||G===void 0?void 0:G.toLocaleLowerCase())}else return _.type.toLocaleLowerCase()===f}).map(_=>{if(typeof j=="object"&&"ids"in j){const y=j.data,{schema:N,table:O,commit_timestamp:D,type:z,errors:U}=y;j=Object.assign(Object.assign({},{schema:N,table:O,commit_timestamp:D,eventType:z,new:{},old:{},errors:U}),this._getPayloadRecords(y))}_.callback(j,o)})}_isClosed(){return this.state===it.closed}_isJoined(){return this.state===it.joined}_isJoining(){return this.state===it.joining}_isLeaving(){return this.state===it.leaving}_replyEventName(a){return`chan_reply_${a}`}_on(a,i,o){const u=a.toLocaleLowerCase(),h={type:u,filter:i,callback:o};return this.bindings[u]?this.bindings[u].push(h):this.bindings[u]=[h],this}_off(a,i){const o=a.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(u=>{var h;return!(((h=u.type)===null||h===void 0?void 0:h.toLocaleLowerCase())===o&&En.isEqual(u.filter,i))})),this}static isEqual(a,i){if(Object.keys(a).length!==Object.keys(i).length)return!1;for(const o in a)if(a[o]!==i[o])return!1;return!0}static isFilterValueEqual(a,i){return(a??void 0)===(i??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(a){this._on(ra.close,{},a)}_onError(a){this._on(ra.error,{},i=>a(i))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(a=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=it.joining,this.joinPush.resend(a))}_getPayloadRecords(a){const i={new:{},old:{}};return(a.type==="INSERT"||a.type==="UPDATE")&&(i.new=km(a.columns,a.record)),(a.type==="UPDATE"||a.type==="DELETE")&&(i.old=km(a.columns,a.old_record)),i}}const $c=()=>{},Zi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},wy=[1e3,2e3,5e3,1e4],Ny=1e4,Sy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Ty{constructor(a,i){var o;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zc,this.transport=null,this.heartbeatIntervalMs=Zi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$c,this.ref=0,this.reconnectTimer=null,this.vsn=Om,this.logger=$c,this.conn=null,this.sendBuffer=[],this.serializer=new py,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=u=>u?(...h)=>u(...h):(...h)=>fetch(...h),!(!((o=i==null?void 0:i.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=i.params.apikey,this.endPoint=`${a}/${Fc.websocket}`,this.httpEndpoint=sg(a),this._initializeOptions(i),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(i==null?void 0:i.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uy.createWebSocket(this.endpointURL())}catch(a){this._setConnectionState("disconnected");const i=a.message;throw i.includes("Node.js")?new Error(`${i}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${i}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(a,i){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(a?this.conn.close(a,i??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(a){const i=await a.unsubscribe();return this.channels.length===0&&this.disconnect(),i}async removeAllChannels(){const a=await Promise.all(this.channels.map(i=>i.unsubscribe()));return this.channels=[],this.disconnect(),a}log(a,i,o){this.logger(a,i,o)}connectionState(){switch(this.conn&&this.conn.readyState){case ns.connecting:return Cs.Connecting;case ns.open:return Cs.Open;case ns.closing:return Cs.Closing;default:return Cs.Closed}}isConnected(){return this.connectionState()===Cs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(a,i={config:{}}){const o=`realtime:${a}`,u=this.getChannels().find(h=>h.topic===o);if(u)return u;{const h=new En(`realtime:${a}`,i,this);return this.channels.push(h),h}}push(a){const{topic:i,event:o,payload:u,ref:h}=a,f=()=>{this.encode(a,m=>{var g;(g=this.conn)===null||g===void 0||g.send(m)})};this.log("push",`${i} ${o} (${h})`,u),this.isConnected()?f():this.sendBuffer.push(f)}async setAuth(a=null){this._authPromise=this._performAuth(a);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var a;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(i){this.log("error","error in heartbeat callback",i)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(i){this.log("error","error in heartbeat callback",i)}this._wasManualDisconnect=!1,(a=this.conn)===null||a===void 0||a.close(my,"heartbeat timeout"),setTimeout(()=>{var i;this.isConnected()||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout()},Zi.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(i){this.log("error","error in heartbeat callback",i)}this._setAuthSafely("heartbeat")}onHeartbeat(a){this.heartbeatCallback=a}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(a=>a()),this.sendBuffer=[])}_makeRef(){let a=this.ref+1;return a===this.ref?this.ref=0:this.ref=a,this.ref.toString()}_leaveOpenTopic(a){let i=this.channels.find(o=>o.topic===a&&(o._isJoined()||o._isJoining()));i&&(this.log("transport",`leaving duplicate topic "${a}"`),i.unsubscribe())}_remove(a){this.channels=this.channels.filter(i=>i.topic!==a.topic)}_onConnMessage(a){this.decode(a.data,i=>{if(i.topic==="phoenix"&&i.event==="phx_reply"&&i.ref&&i.ref===this.pendingHeartbeatRef){const x=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(i.payload.status==="ok"?"ok":"error",x)}catch(v){this.log("error","error in heartbeat callback",v)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:o,event:u,payload:h,ref:f}=i,m=f?`(${f})`:"",g=h.status||"";this.log("receive",`${g} ${o} ${u} ${m}`.trim(),h),this.channels.filter(x=>x._isMember(o)).forEach(x=>x._trigger(u,h,f)),this._triggerStateCallbacks("message",i)})}_clearTimer(a){var i;a==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):a==="reconnect"&&((i=this.reconnectTimer)===null||i===void 0||i.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=a=>this._onConnError(a),this.conn.onmessage=a=>this._onConnMessage(a),this.conn.onclose=a=>this._onConnClose(a),this.conn.readyState===ns.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===ns.open||this.conn.readyState===ns.connecting)try{this.conn.close()}catch(a){this.log("error","Error closing connection",a)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(a=>a.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(i=>{this.log("error","error waiting for auth on connect",i),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const a=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(a),this.workerRef.onerror=i=>{this.log("worker","worker error",i.message),this._terminateWorker()},this.workerRef.onmessage=i=>{i.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(a){var i;this._setConnectionState("disconnected"),this.log("transport","close",a),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(i=this.reconnectTimer)===null||i===void 0||i.scheduleTimeout(),this._triggerStateCallbacks("close",a)}_onConnError(a){this._setConnectionState("disconnected"),this.log("transport",`${a}`),this._triggerChanError(),this._triggerStateCallbacks("error",a)}_triggerChanError(){this.channels.forEach(a=>a._trigger(ra.error))}_appendParams(a,i){if(Object.keys(i).length===0)return a;const o=a.match(/\?/)?"&":"?",u=new URLSearchParams(i);return`${a}${o}${u}`}_workerObjectUrl(a){let i;if(a)i=a;else{const o=new Blob([Sy],{type:"application/javascript"});i=URL.createObjectURL(o)}return i}_setConnectionState(a,i=!1){this._connectionState=a,a==="connecting"?this._wasManualDisconnect=!1:a==="disconnecting"&&(this._wasManualDisconnect=i)}async _performAuth(a=null){let i,o=!1;if(a)i=a,o=!0;else if(this.accessToken)try{i=await this.accessToken()}catch(u){this.log("error","Error fetching access token from callback",u),i=this.accessTokenValue}else i=this.accessTokenValue;o?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=i&&(this.accessTokenValue=i,this.channels.forEach(u=>{const h={access_token:i,version:hy};i&&u.updateJoinPayload(h),u.joinedOnce&&u._isJoined()&&u._push(ra.access_token,{access_token:i})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(a="general"){this._isManualToken()||this.setAuth().catch(i=>{this.log("error",`Error setting auth in ${a}`,i)})}_triggerStateCallbacks(a,i){try{this.stateChangeCallbacks[a].forEach(o=>{try{o(i)}catch(u){this.log("error",`error in ${a} callback`,u)}})}catch(o){this.log("error",`error triggering ${a} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new tg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Zi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(a){var i,o,u,h,f,m,g,x,v,w,j,_;switch(this.transport=(i=a==null?void 0:a.transport)!==null&&i!==void 0?i:null,this.timeout=(o=a==null?void 0:a.timeout)!==null&&o!==void 0?o:Zc,this.heartbeatIntervalMs=(u=a==null?void 0:a.heartbeatIntervalMs)!==null&&u!==void 0?u:Zi.HEARTBEAT_INTERVAL,this.worker=(h=a==null?void 0:a.worker)!==null&&h!==void 0?h:!1,this.accessToken=(f=a==null?void 0:a.accessToken)!==null&&f!==void 0?f:null,this.heartbeatCallback=(m=a==null?void 0:a.heartbeatCallback)!==null&&m!==void 0?m:$c,this.vsn=(g=a==null?void 0:a.vsn)!==null&&g!==void 0?g:Om,a!=null&&a.params&&(this.params=a.params),a!=null&&a.logger&&(this.logger=a.logger),(a!=null&&a.logLevel||a!=null&&a.log_level)&&(this.logLevel=a.logLevel||a.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(x=a==null?void 0:a.reconnectAfterMs)!==null&&x!==void 0?x:(y=>wy[y-1]||Ny),this.vsn){case fy:this.encode=(v=a==null?void 0:a.encode)!==null&&v!==void 0?v:((y,N)=>N(JSON.stringify(y))),this.decode=(w=a==null?void 0:a.decode)!==null&&w!==void 0?w:((y,N)=>N(JSON.parse(y)));break;case eg:this.encode=(j=a==null?void 0:a.encode)!==null&&j!==void 0?j:this.serializer.encode.bind(this.serializer),this.decode=(_=a==null?void 0:a.decode)!==null&&_!==void 0?_:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=a==null?void 0:a.workerUrl}}}var Tr=class extends Error{constructor(n,a){var i;super(n),this.name="IcebergError",this.status=a.status,this.icebergType=a.icebergType,this.icebergCode=a.icebergCode,this.details=a.details,this.isCommitStateUnknown=a.icebergType==="CommitStateUnknownException"||[500,502,504].includes(a.status)&&((i=a.icebergType)==null?void 0:i.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ey(n,a,i){const o=new URL(a,n);if(i)for(const[u,h]of Object.entries(i))h!==void 0&&o.searchParams.set(u,h);return o.toString()}async function Cy(n){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?await n.getHeaders():{}}function Ay(n){const a=n.fetchImpl??globalThis.fetch;return{async request({method:i,path:o,query:u,body:h,headers:f}){const m=Ey(n.baseUrl,o,u),g=await Cy(n.auth),x=await a(m,{method:i,headers:{...h?{"Content-Type":"application/json"}:{},...g,...f},body:h?JSON.stringify(h):void 0}),v=await x.text(),w=(x.headers.get("content-type")||"").includes("application/json"),j=w&&v?JSON.parse(v):v;if(!x.ok){const _=w?j:void 0,y=_==null?void 0:_.error;throw new Tr((y==null?void 0:y.message)??`Request failed with status ${x.status}`,{status:x.status,icebergType:y==null?void 0:y.type,icebergCode:y==null?void 0:y.code,details:_})}return{status:x.status,headers:x.headers,data:j}}}}function Fi(n){return n.join("")}var Oy=class{constructor(n,a=""){this.client=n,this.prefix=a}async listNamespaces(n){const a=n?{parent:Fi(n.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:a})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(n,a){const i={namespace:n.namespace,properties:a==null?void 0:a.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:i})).data}async dropNamespace(n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Fi(n.namespace)}`})}async loadNamespaceMetadata(n){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Fi(n.namespace)}`})).data.properties}}async namespaceExists(n){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Fi(n.namespace)}`}),!0}catch(a){if(a instanceof Tr&&a.status===404)return!1;throw a}}async createNamespaceIfNotExists(n,a){try{return await this.createNamespace(n,a)}catch(i){if(i instanceof Tr&&i.status===409)return;throw i}}};function pn(n){return n.join("")}var ky=class{constructor(n,a="",i){this.client=n,this.prefix=a,this.accessDelegation=i}async listTables(n){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables`})).data.identifiers}async createTable(n,a){const i={};return this.accessDelegation&&(i["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables`,body:a,headers:i})).data.metadata}async updateTable(n,a){const i=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables/${n.name}`,body:a});return{"metadata-location":i.data["metadata-location"],metadata:i.data.metadata}}async dropTable(n,a){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String((a==null?void 0:a.purge)??!1)}})}async loadTable(n){const a={};return this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables/${n.name}`,headers:a})).data.metadata}async tableExists(n){const a={};this.accessDelegation&&(a["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${pn(n.namespace)}/tables/${n.name}`,headers:a}),!0}catch(i){if(i instanceof Tr&&i.status===404)return!1;throw i}}async createTableIfNotExists(n,a){try{return await this.createTable(n,a)}catch(i){if(i instanceof Tr&&i.status===409)return await this.loadTable({namespace:n.namespace,name:a.name});throw i}}},Dy=class{constructor(n){var o;let a="v1";n.catalogName&&(a+=`/${n.catalogName}`);const i=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=Ay({baseUrl:i,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=(o=n.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new Oy(this.client,a),this.tableOps=new ky(this.client,a,this.accessDelegation)}async listNamespaces(n){return this.namespaceOps.listNamespaces(n)}async createNamespace(n,a){return this.namespaceOps.createNamespace(n,a)}async dropNamespace(n){await this.namespaceOps.dropNamespace(n)}async loadNamespaceMetadata(n){return this.namespaceOps.loadNamespaceMetadata(n)}async listTables(n){return this.tableOps.listTables(n)}async createTable(n,a){return this.tableOps.createTable(n,a)}async updateTable(n,a){return this.tableOps.updateTable(n,a)}async dropTable(n,a){await this.tableOps.dropTable(n,a)}async loadTable(n){return this.tableOps.loadTable(n)}async namespaceExists(n){return this.namespaceOps.namespaceExists(n)}async tableExists(n){return this.tableOps.tableExists(n)}async createNamespaceIfNotExists(n,a){return this.namespaceOps.createNamespaceIfNotExists(n,a)}async createTableIfNotExists(n,a){return this.tableOps.createTableIfNotExists(n,a)}},dl=class extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}};function Ye(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var Ry=class extends dl{constructor(n,a,i){super(n),this.name="StorageApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},eu=class extends dl{constructor(n,a){super(n),this.name="StorageUnknownError",this.originalError=a}};const uu=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),Uy=()=>Response,tu=n=>{if(Array.isArray(n))return n.map(i=>tu(i));if(typeof n=="function"||n!==Object(n))return n;const a={};return Object.entries(n).forEach(([i,o])=>{const u=i.replace(/([-_][a-z])/gi,h=>h.toUpperCase().replace(/[-_]/g,""));a[u]=tu(o)}),a},zy=n=>{if(typeof n!="object"||n===null)return!1;const a=Object.getPrototypeOf(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},My=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Er(n){"@babel/helpers - typeof";return Er=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Er(n)}function By(n,a){if(Er(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,a);if(Er(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function Ly(n){var a=By(n,"string");return Er(a)=="symbol"?a:a+""}function $y(n,a,i){return(a=Ly(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Um(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,o)}return i}function me(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Um(Object(i),!0).forEach(function(o){$y(n,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Um(Object(i)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))})}return n}const qc=n=>{var a;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(a=n.error)===null||a===void 0?void 0:a.message)||JSON.stringify(n)},qy=async(n,a,i)=>{n instanceof await Uy()&&!(i!=null&&i.noResolveJson)?n.json().then(o=>{const u=n.status||500,h=(o==null?void 0:o.statusCode)||u+"";a(new Ry(qc(o),u,h))}).catch(o=>{a(new eu(qc(o),o))}):a(new eu(qc(n),n))},Vy=(n,a,i,o)=>{const u={method:n,headers:(a==null?void 0:a.headers)||{}};return n==="GET"||!o?u:(zy(o)?(u.headers=me({"Content-Type":"application/json"},a==null?void 0:a.headers),u.body=JSON.stringify(o)):u.body=o,a!=null&&a.duplex&&(u.duplex=a.duplex),me(me({},u),i))};async function Dr(n,a,i,o,u,h){return new Promise((f,m)=>{n(i,Vy(a,o,u,h)).then(g=>{if(!g.ok)throw g;return o!=null&&o.noResolveJson?g:g.json()}).then(g=>f(g)).catch(g=>qy(g,m,o))})}async function Cr(n,a,i,o){return Dr(n,"GET",a,i,o)}async function na(n,a,i,o,u){return Dr(n,"POST",a,o,u,i)}async function au(n,a,i,o,u){return Dr(n,"PUT",a,o,u,i)}async function Hy(n,a,i,o){return Dr(n,"HEAD",a,me(me({},i),{},{noResolveJson:!0}),o)}async function du(n,a,i,o,u){return Dr(n,"DELETE",a,o,u,i)}var Iy=class{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a}then(n,a){return this.execute().then(n,a)}async execute(){var n=this;try{return{data:(await n.downloadFn()).body,error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}}};let ng;ng=Symbol.toStringTag;var Gy=class{constructor(n,a){this.downloadFn=n,this.shouldThrowOnError=a,this[ng]="BlobDownloadBuilder",this.promise=null}asStream(){return new Iy(this.downloadFn,this.shouldThrowOnError)}then(n,a){return this.getPromise().then(n,a)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var n=this;try{return{data:await(await n.downloadFn()).blob(),error:null}}catch(a){if(n.shouldThrowOnError)throw a;if(Ye(a))return{data:null,error:a};throw a}}};const Py={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},zm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Yy=class{constructor(n,a={},i,o){this.shouldThrowOnError=!1,this.url=n,this.headers=a,this.bucketId=i,this.fetch=uu(o)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(n,a,i,o){var u=this;try{let h;const f=me(me({},zm),o);let m=me(me({},u.headers),n==="POST"&&{"x-upsert":String(f.upsert)});const g=f.metadata;typeof Blob<"u"&&i instanceof Blob?(h=new FormData,h.append("cacheControl",f.cacheControl),g&&h.append("metadata",u.encodeMetadata(g)),h.append("",i)):typeof FormData<"u"&&i instanceof FormData?(h=i,h.has("cacheControl")||h.append("cacheControl",f.cacheControl),g&&!h.has("metadata")&&h.append("metadata",u.encodeMetadata(g))):(h=i,m["cache-control"]=`max-age=${f.cacheControl}`,m["content-type"]=f.contentType,g&&(m["x-metadata"]=u.toBase64(u.encodeMetadata(g))),(typeof ReadableStream<"u"&&h instanceof ReadableStream||h&&typeof h=="object"&&"pipe"in h&&typeof h.pipe=="function")&&!f.duplex&&(f.duplex="half")),o!=null&&o.headers&&(m=me(me({},m),o.headers));const x=u._removeEmptyFolders(a),v=u._getFinalPath(x),w=await(n=="PUT"?au:na)(u.fetch,`${u.url}/object/${v}`,h,me({headers:m},f!=null&&f.duplex?{duplex:f.duplex}:{}));return{data:{path:x,id:w.Id,fullPath:w.Key},error:null}}catch(h){if(u.shouldThrowOnError)throw h;if(Ye(h))return{data:null,error:h};throw h}}async upload(n,a,i){return this.uploadOrUpdate("POST",n,a,i)}async uploadToSignedUrl(n,a,i,o){var u=this;const h=u._removeEmptyFolders(n),f=u._getFinalPath(h),m=new URL(u.url+`/object/upload/sign/${f}`);m.searchParams.set("token",a);try{let g;const x=me({upsert:zm.upsert},o),v=me(me({},u.headers),{"x-upsert":String(x.upsert)});return typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",x.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",x.cacheControl)):(g=i,v["cache-control"]=`max-age=${x.cacheControl}`,v["content-type"]=x.contentType),{data:{path:h,fullPath:(await au(u.fetch,m.toString(),g,{headers:v})).Key},error:null}}catch(g){if(u.shouldThrowOnError)throw g;if(Ye(g))return{data:null,error:g};throw g}}async createSignedUploadUrl(n,a){var i=this;try{let o=i._getFinalPath(n);const u=me({},i.headers);a!=null&&a.upsert&&(u["x-upsert"]="true");const h=await na(i.fetch,`${i.url}/object/upload/sign/${o}`,{},{headers:u}),f=new URL(i.url+h.url),m=f.searchParams.get("token");if(!m)throw new dl("No token returned by API");return{data:{signedUrl:f.toString(),path:n,token:m},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}}async update(n,a,i){return this.uploadOrUpdate("PUT",n,a,i)}async move(n,a,i){var o=this;try{return{data:await na(o.fetch,`${o.url}/object/move`,{bucketId:o.bucketId,sourceKey:n,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers}),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}}async copy(n,a,i){var o=this;try{return{data:{path:(await na(o.fetch,`${o.url}/object/copy`,{bucketId:o.bucketId,sourceKey:n,destinationKey:a,destinationBucket:i==null?void 0:i.destinationBucket},{headers:o.headers})).Key},error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}}async createSignedUrl(n,a,i){var o=this;try{let u=o._getFinalPath(n),h=await na(o.fetch,`${o.url}/object/sign/${u}`,me({expiresIn:a},i!=null&&i.transform?{transform:i.transform}:{}),{headers:o.headers});const f=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return h={signedUrl:encodeURI(`${o.url}${h.signedURL}${f}`)},{data:h,error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}}async createSignedUrls(n,a,i){var o=this;try{const u=await na(o.fetch,`${o.url}/object/sign/${o.bucketId}`,{expiresIn:a,paths:n},{headers:o.headers}),h=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:u.map(f=>me(me({},f),{},{signedUrl:f.signedURL?encodeURI(`${o.url}${f.signedURL}${h}`):null})),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}}download(n,a){const i=typeof(a==null?void 0:a.transform)<"u"?"render/image/authenticated":"object",o=this.transformOptsToQueryString((a==null?void 0:a.transform)||{}),u=o?`?${o}`:"",h=this._getFinalPath(n),f=()=>Cr(this.fetch,`${this.url}/${i}/${h}${u}`,{headers:this.headers,noResolveJson:!0});return new Gy(f,this.shouldThrowOnError)}async info(n){var a=this;const i=a._getFinalPath(n);try{return{data:tu(await Cr(a.fetch,`${a.url}/object/info/${i}`,{headers:a.headers})),error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}}async exists(n){var a=this;const i=a._getFinalPath(n);try{return await Hy(a.fetch,`${a.url}/object/${i}`,{headers:a.headers}),{data:!0,error:null}}catch(o){if(a.shouldThrowOnError)throw o;if(Ye(o)&&o instanceof eu){const u=o.originalError;if([400,404].includes(u==null?void 0:u.status))return{data:!1,error:o}}throw o}}getPublicUrl(n,a){const i=this._getFinalPath(n),o=[],u=a!=null&&a.download?`download=${a.download===!0?"":a.download}`:"";u!==""&&o.push(u);const h=typeof(a==null?void 0:a.transform)<"u"?"render/image":"object",f=this.transformOptsToQueryString((a==null?void 0:a.transform)||{});f!==""&&o.push(f);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${m}`)}}}async remove(n){var a=this;try{return{data:await du(a.fetch,`${a.url}/object/${a.bucketId}`,{prefixes:n},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async list(n,a,i){var o=this;try{const u=me(me(me({},Py),a),{},{prefix:n||""});return{data:await na(o.fetch,`${o.url}/object/list/${o.bucketId}`,u,{headers:o.headers},i),error:null}}catch(u){if(o.shouldThrowOnError)throw u;if(Ye(u))return{data:null,error:u};throw u}}async listV2(n,a){var i=this;try{const o=me({},n);return{data:await na(i.fetch,`${i.url}/object/list-v2/${i.bucketId}`,o,{headers:i.headers},a),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const a=[];return n.width&&a.push(`width=${n.width}`),n.height&&a.push(`height=${n.height}`),n.resize&&a.push(`resize=${n.resize}`),n.format&&a.push(`format=${n.format}`),n.quality&&a.push(`quality=${n.quality}`),a.join("&")}};const rg="2.91.0",ig={"X-Client-Info":`storage-js/${rg}`};var Ky=class{constructor(n,a={},i,o){this.shouldThrowOnError=!1;const u=new URL(n);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=me(me({},ig),a),this.fetch=uu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(n){var a=this;try{const i=a.listBucketOptionsToQueryString(n);return{data:await Cr(a.fetch,`${a.url}/bucket${i}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async getBucket(n){var a=this;try{return{data:await Cr(a.fetch,`${a.url}/bucket/${n}`,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async createBucket(n,a={public:!1}){var i=this;try{return{data:await na(i.fetch,`${i.url}/bucket`,{id:n,name:n,type:a.type,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}}async updateBucket(n,a){var i=this;try{return{data:await au(i.fetch,`${i.url}/bucket/${n}`,{id:n,name:n,public:a.public,file_size_limit:a.fileSizeLimit,allowed_mime_types:a.allowedMimeTypes},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(Ye(o))return{data:null,error:o};throw o}}async emptyBucket(n){var a=this;try{return{data:await na(a.fetch,`${a.url}/bucket/${n}/empty`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async deleteBucket(n){var a=this;try{return{data:await du(a.fetch,`${a.url}/bucket/${n}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}listBucketOptionsToQueryString(n){const a={};return n&&("limit"in n&&(a.limit=String(n.limit)),"offset"in n&&(a.offset=String(n.offset)),n.search&&(a.search=n.search),n.sortColumn&&(a.sortColumn=n.sortColumn),n.sortOrder&&(a.sortOrder=n.sortOrder)),Object.keys(a).length>0?"?"+new URLSearchParams(a).toString():""}},Qy=class{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=me(me({},ig),a),this.fetch=uu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var a=this;try{return{data:await na(a.fetch,`${a.url}/bucket`,{name:n},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async listBuckets(n){var a=this;try{const i=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&i.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&i.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&i.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&i.set("sortOrder",n.sortOrder),n!=null&&n.search&&i.set("search",n.search);const o=i.toString(),u=o?`${a.url}/bucket?${o}`:`${a.url}/bucket`;return{data:await Cr(a.fetch,u,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}async deleteBucket(n){var a=this;try{return{data:await du(a.fetch,`${a.url}/bucket/${n}`,{},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if(Ye(i))return{data:null,error:i};throw i}}from(n){var a=this;if(!My(n))throw new dl("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const i=new Dy({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:async()=>a.headers},fetch:this.fetch}),o=this.shouldThrowOnError;return new Proxy(i,{get(u,h){const f=u[h];return typeof f!="function"?f:async(...m)=>{try{return{data:await f.apply(u,m),error:null}}catch(g){if(o)throw g;return{data:null,error:g}}}}})}};const hu={"X-Client-Info":`storage-js/${rg}`,"Content-Type":"application/json"};var lg=class extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function $t(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}var Vc=class extends lg{constructor(n,a,i){super(n),this.name="StorageVectorsApiError",this.status=a,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Xy=class extends lg{constructor(n,a){super(n),this.name="StorageVectorsUnknownError",this.originalError=a}};const fu=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),Jy=n=>{if(typeof n!="object"||n===null)return!1;const a=Object.getPrototypeOf(n);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Mm=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Zy=async(n,a,i)=>{if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(i!=null&&i.noResolveJson)){const o=n.status||500,u=n;if(typeof u.json=="function")u.json().then(h=>{const f=(h==null?void 0:h.statusCode)||(h==null?void 0:h.code)||o+"";a(new Vc(Mm(h),o,f))}).catch(()=>{const h=o+"";a(new Vc(u.statusText||`HTTP ${o} error`,o,h))});else{const h=o+"";a(new Vc(u.statusText||`HTTP ${o} error`,o,h))}}else a(new Xy(Mm(n),n))},Fy=(n,a,i,o)=>{const u={method:n,headers:(a==null?void 0:a.headers)||{}};return o?(Jy(o)?(u.headers=me({"Content-Type":"application/json"},a==null?void 0:a.headers),u.body=JSON.stringify(o)):u.body=o,me(me({},u),i)):u};async function Wy(n,a,i,o,u,h){return new Promise((f,m)=>{n(i,Fy(a,o,u,h)).then(g=>{if(!g.ok)throw g;if(o!=null&&o.noResolveJson)return g;const x=g.headers.get("content-type");return!x||!x.includes("application/json")?{}:g.json()}).then(g=>f(g)).catch(g=>Zy(g,m,o))})}async function qt(n,a,i,o,u){return Wy(n,"POST",a,o,u,i)}var ex=class{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=me(me({},hu),a),this.fetch=fu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/CreateIndex`,n,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async getIndex(n,a){var i=this;try{return{data:await qt(i.fetch,`${i.url}/GetIndex`,{vectorBucketName:n,indexName:a},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if($t(o))return{data:null,error:o};throw o}}async listIndexes(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/ListIndexes`,n,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async deleteIndex(n,a){var i=this;try{return{data:await qt(i.fetch,`${i.url}/DeleteIndex`,{vectorBucketName:n,indexName:a},{headers:i.headers})||{},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if($t(o))return{data:null,error:o};throw o}}},tx=class{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=me(me({},hu),a),this.fetch=fu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(n){var a=this;try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await qt(a.fetch,`${a.url}/PutVectors`,n,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async getVectors(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/GetVectors`,n,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async listVectors(n){var a=this;try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:await qt(a.fetch,`${a.url}/ListVectors`,n,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async queryVectors(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/QueryVectors`,n,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async deleteVectors(n){var a=this;try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await qt(a.fetch,`${a.url}/DeleteVectors`,n,{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}},ax=class{constructor(n,a={},i){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=me(me({},hu),a),this.fetch=fu(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async getBucket(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/GetVectorBucket`,{vectorBucketName:n},{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async listBuckets(n={}){var a=this;try{return{data:await qt(a.fetch,`${a.url}/ListVectorBuckets`,n,{headers:a.headers}),error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}async deleteBucket(n){var a=this;try{return{data:await qt(a.fetch,`${a.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:a.headers})||{},error:null}}catch(i){if(a.shouldThrowOnError)throw i;if($t(i))return{data:null,error:i};throw i}}},sx=class extends ax{constructor(n,a={}){super(n,a.headers||{},a.fetch)}from(n){return new nx(this.url,this.headers,n,this.fetch)}async createBucket(n){var a=()=>super.createBucket,i=this;return a().call(i,n)}async getBucket(n){var a=()=>super.getBucket,i=this;return a().call(i,n)}async listBuckets(n={}){var a=()=>super.listBuckets,i=this;return a().call(i,n)}async deleteBucket(n){var a=()=>super.deleteBucket,i=this;return a().call(i,n)}},nx=class extends ex{constructor(n,a,i,o){super(n,a,o),this.vectorBucketName=i}async createIndex(n){var a=()=>super.createIndex,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName}))}async listIndexes(n={}){var a=()=>super.listIndexes,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName}))}async getIndex(n){var a=()=>super.getIndex,i=this;return a().call(i,i.vectorBucketName,n)}async deleteIndex(n){var a=()=>super.deleteIndex,i=this;return a().call(i,i.vectorBucketName,n)}index(n){return new rx(this.url,this.headers,this.vectorBucketName,n,this.fetch)}},rx=class extends tx{constructor(n,a,i,o,u){super(n,a,u),this.vectorBucketName=i,this.indexName=o}async putVectors(n){var a=()=>super.putVectors,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async getVectors(n){var a=()=>super.getVectors,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async listVectors(n={}){var a=()=>super.listVectors,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async queryVectors(n){var a=()=>super.queryVectors,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}async deleteVectors(n){var a=()=>super.deleteVectors,i=this;return a().call(i,me(me({},n),{},{vectorBucketName:i.vectorBucketName,indexName:i.indexName}))}},ix=class extends Ky{constructor(n,a={},i,o){super(n,a,i,o)}from(n){return new Yy(this.url,this.headers,n,this.fetch)}get vectors(){return new sx(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Qy(this.url+"/iceberg",this.headers,this.fetch)}};const og="2.91.0",Nn=30*1e3,su=3,Hc=su*Nn,lx="http://localhost:9999",ox="supabase.auth.token",cx={"X-Client-Info":`gotrue-js/${og}`},nu="X-Supabase-Api-Version",cg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ux=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,dx=600*1e3;class Ar extends Error{constructor(a,i,o){super(a),this.__isAuthError=!0,this.name="AuthError",this.status=i,this.code=o}}function le(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class hx extends Ar{constructor(a,i,o){super(a,i,o),this.name="AuthApiError",this.status=i,this.code=o}}function fx(n){return le(n)&&n.name==="AuthApiError"}class As extends Ar{constructor(a,i){super(a),this.name="AuthUnknownError",this.originalError=i}}class ka extends Ar{constructor(a,i,o,u){super(a,o,u),this.name=i,this.status=o}}class Lt extends ka{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function mx(n){return le(n)&&n.name==="AuthSessionMissingError"}class yn extends ka{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Wi extends ka{constructor(a){super(a,"AuthInvalidCredentialsError",400,void 0)}}class el extends ka{constructor(a,i=null){super(a,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function gx(n){return le(n)&&n.name==="AuthImplicitGrantRedirectError"}class Bm extends ka{constructor(a,i=null){super(a,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=i}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class px extends ka{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class ru extends ka{constructor(a,i){super(a,"AuthRetryableFetchError",i,void 0)}}function Ic(n){return le(n)&&n.name==="AuthRetryableFetchError"}class Lm extends ka{constructor(a,i,o){super(a,"AuthWeakPasswordError",i,"weak_password"),this.reasons=o}}class iu extends ka{constructor(a){super(a,"AuthInvalidJwtError",400,"invalid_jwt")}}const ll="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$m=` 	
\r=`.split(""),yx=(()=>{const n=new Array(128);for(let a=0;a<n.length;a+=1)n[a]=-1;for(let a=0;a<$m.length;a+=1)n[$m[a].charCodeAt(0)]=-2;for(let a=0;a<ll.length;a+=1)n[ll[a].charCodeAt(0)]=a;return n})();function qm(n,a,i){if(n!==null)for(a.queue=a.queue<<8|n,a.queuedBits+=8;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;i(ll[o]),a.queuedBits-=6}else if(a.queuedBits>0)for(a.queue=a.queue<<6-a.queuedBits,a.queuedBits=6;a.queuedBits>=6;){const o=a.queue>>a.queuedBits-6&63;i(ll[o]),a.queuedBits-=6}}function ug(n,a,i){const o=yx[n];if(o>-1)for(a.queue=a.queue<<6|o,a.queuedBits+=6;a.queuedBits>=8;)i(a.queue>>a.queuedBits-8&255),a.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Vm(n){const a=[],i=f=>{a.push(String.fromCodePoint(f))},o={utf8seq:0,codepoint:0},u={queue:0,queuedBits:0},h=f=>{bx(f,o,i)};for(let f=0;f<n.length;f+=1)ug(n.charCodeAt(f),u,h);return a.join("")}function xx(n,a){if(n<=127){a(n);return}else if(n<=2047){a(192|n>>6),a(128|n&63);return}else if(n<=65535){a(224|n>>12),a(128|n>>6&63),a(128|n&63);return}else if(n<=1114111){a(240|n>>18),a(128|n>>12&63),a(128|n>>6&63),a(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function vx(n,a){for(let i=0;i<n.length;i+=1){let o=n.charCodeAt(i);if(o>55295&&o<=56319){const u=(o-55296)*1024&65535;o=(n.charCodeAt(i+1)-56320&65535|u)+65536,i+=1}xx(o,a)}}function bx(n,a,i){if(a.utf8seq===0){if(n<=127){i(n);return}for(let o=1;o<6;o+=1)if((n>>7-o&1)===0){a.utf8seq=o;break}if(a.utf8seq===2)a.codepoint=n&31;else if(a.utf8seq===3)a.codepoint=n&15;else if(a.utf8seq===4)a.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");a.utf8seq-=1}else if(a.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");a.codepoint=a.codepoint<<6|n&63,a.utf8seq-=1,a.utf8seq===0&&i(a.codepoint)}}function Cn(n){const a=[],i={queue:0,queuedBits:0},o=u=>{a.push(u)};for(let u=0;u<n.length;u+=1)ug(n.charCodeAt(u),i,o);return new Uint8Array(a)}function _x(n){const a=[];return vx(n,i=>a.push(i)),new Uint8Array(a)}function Os(n){const a=[],i={queue:0,queuedBits:0},o=u=>{a.push(u)};return n.forEach(u=>qm(u,i,o)),qm(null,i,o),a.join("")}function jx(n){return Math.round(Date.now()/1e3)+n}function wx(){return Symbol("auth-callback")}const pt=()=>typeof window<"u"&&typeof document<"u",Ss={tested:!1,writable:!1},dg=()=>{if(!pt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ss.tested)return Ss.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),Ss.tested=!0,Ss.writable=!0}catch{Ss.tested=!0,Ss.writable=!1}return Ss.writable};function Nx(n){const a={},i=new URL(n);if(i.hash&&i.hash[0]==="#")try{new URLSearchParams(i.hash.substring(1)).forEach((u,h)=>{a[h]=u})}catch{}return i.searchParams.forEach((o,u)=>{a[u]=o}),a}const hg=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),Sx=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Sn=async(n,a,i)=>{await n.setItem(a,JSON.stringify(i))},Ts=async(n,a)=>{const i=await n.getItem(a);if(!i)return null;try{return JSON.parse(i)}catch{return i}},gt=async(n,a)=>{await n.removeItem(a)};class hl{constructor(){this.promise=new hl.promiseConstructor((a,i)=>{this.resolve=a,this.reject=i})}}hl.promiseConstructor=Promise;function Gc(n){const a=n.split(".");if(a.length!==3)throw new iu("Invalid JWT structure");for(let o=0;o<a.length;o++)if(!ux.test(a[o]))throw new iu("JWT not in base64url format");return{header:JSON.parse(Vm(a[0])),payload:JSON.parse(Vm(a[1])),signature:Cn(a[2]),raw:{header:a[0],payload:a[1]}}}async function Tx(n){return await new Promise(a=>{setTimeout(()=>a(null),n)})}function Ex(n,a){return new Promise((o,u)=>{(async()=>{for(let h=0;h<1/0;h++)try{const f=await n(h);if(!a(h,null,f)){o(f);return}}catch(f){if(!a(h,f)){u(f);return}}})()})}function Cx(n){return("0"+n.toString(16)).substr(-2)}function Ax(){const a=new Uint32Array(56);if(typeof crypto>"u"){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=i.length;let u="";for(let h=0;h<56;h++)u+=i.charAt(Math.floor(Math.random()*o));return u}return crypto.getRandomValues(a),Array.from(a,Cx).join("")}async function Ox(n){const i=new TextEncoder().encode(n),o=await crypto.subtle.digest("SHA-256",i),u=new Uint8Array(o);return Array.from(u).map(h=>String.fromCharCode(h)).join("")}async function kx(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const i=await Ox(n);return btoa(i).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(n,a,i=!1){const o=Ax();let u=o;i&&(u+="/PASSWORD_RECOVERY"),await Sn(n,`${a}-code-verifier`,u);const h=await kx(o);return[h,o===h?"plain":"s256"]}const Dx=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Rx(n){const a=n.headers.get(nu);if(!a||!a.match(Dx))return null;try{return new Date(`${a}T00:00:00.0Z`)}catch{return null}}function Ux(n){if(!n)throw new Error("Missing exp claim");const a=Math.floor(Date.now()/1e3);if(n<=a)throw new Error("JWT has expired")}function zx(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Mx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vn(n){if(!Mx.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Pc(){const n={};return new Proxy(n,{get:(a,i)=>{if(i==="__isUserNotAvailableProxy")return!0;if(typeof i=="symbol"){const o=i.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${i}" property of the session object is not supported. Please use getUser() instead.`)},set:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(a,i)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${i}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Bx(n,a){return new Proxy(n,{get:(i,o,u)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const h=o.toString();if(h==="Symbol(Symbol.toPrimitive)"||h==="Symbol(Symbol.toStringTag)"||h==="Symbol(util.inspect.custom)"||h==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(i,o,u)}return!a.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a.value=!0),Reflect.get(i,o,u)}})}function Hm(n){return JSON.parse(JSON.stringify(n))}const Es=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Lx=[502,503,504];async function Im(n){var a;if(!Sx(n))throw new ru(Es(n),0);if(Lx.includes(n.status))throw new ru(Es(n),n.status);let i;try{i=await n.json()}catch(h){throw new As(Es(h),h)}let o;const u=Rx(n);if(u&&u.getTime()>=cg["2024-01-01"].timestamp&&typeof i=="object"&&i&&typeof i.code=="string"?o=i.code:typeof i=="object"&&i&&typeof i.error_code=="string"&&(o=i.error_code),o){if(o==="weak_password")throw new Lm(Es(i),n.status,((a=i.weak_password)===null||a===void 0?void 0:a.reasons)||[]);if(o==="session_not_found")throw new Lt}else if(typeof i=="object"&&i&&typeof i.weak_password=="object"&&i.weak_password&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.reasons.reduce((h,f)=>h&&typeof f=="string",!0))throw new Lm(Es(i),n.status,i.weak_password.reasons);throw new hx(Es(i),n.status||500,o)}const $x=(n,a,i,o)=>{const u={method:n,headers:(a==null?void 0:a.headers)||{}};return n==="GET"?u:(u.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},a==null?void 0:a.headers),u.body=JSON.stringify(o),Object.assign(Object.assign({},u),i))};async function fe(n,a,i,o){var u;const h=Object.assign({},o==null?void 0:o.headers);h[nu]||(h[nu]=cg["2024-01-01"].name),o!=null&&o.jwt&&(h.Authorization=`Bearer ${o.jwt}`);const f=(u=o==null?void 0:o.query)!==null&&u!==void 0?u:{};o!=null&&o.redirectTo&&(f.redirect_to=o.redirectTo);const m=Object.keys(f).length?"?"+new URLSearchParams(f).toString():"",g=await qx(n,a,i+m,{headers:h,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(g):{data:Object.assign({},g),error:null}}async function qx(n,a,i,o,u,h){const f=$x(a,o,u,h);let m;try{m=await n(i,Object.assign({},f))}catch(g){throw console.error(g),new ru(Es(g),0)}if(m.ok||await Im(m),o!=null&&o.noResolveJson)return m;try{return await m.json()}catch(g){await Im(g)}}function sa(n){var a;let i=null;Ix(n)&&(i=Object.assign({},n),n.expires_at||(i.expires_at=jx(n.expires_in)));const o=(a=n.user)!==null&&a!==void 0?a:n;return{data:{session:i,user:o},error:null}}function Gm(n){const a=sa(n);return!a.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0)&&(a.data.weak_password=n.weak_password),a}function rs(n){var a;return{data:{user:(a=n.user)!==null&&a!==void 0?a:n},error:null}}function Vx(n){return{data:n,error:null}}function Hx(n){const{action_link:a,email_otp:i,hashed_token:o,redirect_to:u,verification_type:h}=n,f=ul(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:a,email_otp:i,hashed_token:o,redirect_to:u,verification_type:h},g=Object.assign({},f);return{data:{properties:m,user:g},error:null}}function Pm(n){return n}function Ix(n){return n.access_token&&n.refresh_token&&n.expires_in}const Yc=["global","local","others"];class Gx{constructor({url:a="",headers:i={},fetch:o}){this.url=a,this.headers=i,this.fetch=hg(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(a,i=Yc[0]){if(Yc.indexOf(i)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Yc.join(", ")}`);try{return await fe(this.fetch,"POST",`${this.url}/logout?scope=${i}`,{headers:this.headers,jwt:a,noResolveJson:!0}),{data:null,error:null}}catch(o){if(le(o))return{data:null,error:o};throw o}}async inviteUserByEmail(a,i={}){try{return await fe(this.fetch,"POST",`${this.url}/invite`,{body:{email:a,data:i.data},headers:this.headers,redirectTo:i.redirectTo,xform:rs})}catch(o){if(le(o))return{data:{user:null},error:o};throw o}}async generateLink(a){try{const{options:i}=a,o=ul(a,["options"]),u=Object.assign(Object.assign({},o),i);return"newEmail"in o&&(u.new_email=o==null?void 0:o.newEmail,delete u.newEmail),await fe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:u,headers:this.headers,xform:Hx,redirectTo:i==null?void 0:i.redirectTo})}catch(i){if(le(i))return{data:{properties:null,user:null},error:i};throw i}}async createUser(a){try{return await fe(this.fetch,"POST",`${this.url}/admin/users`,{body:a,headers:this.headers,xform:rs})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async listUsers(a){var i,o,u,h,f,m,g;try{const x={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=a==null?void 0:a.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a==null?void 0:a.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Pm});if(v.error)throw v.error;const w=await v.json(),j=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(y=>{const N=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(y.split(";")[1].split("=")[1]);x[`${O}Page`]=N}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},w),x),error:null}}catch(x){if(le(x))return{data:{users:[]},error:x};throw x}}async getUserById(a){vn(a);try{return await fe(this.fetch,"GET",`${this.url}/admin/users/${a}`,{headers:this.headers,xform:rs})}catch(i){if(le(i))return{data:{user:null},error:i};throw i}}async updateUserById(a,i){vn(a);try{return await fe(this.fetch,"PUT",`${this.url}/admin/users/${a}`,{body:i,headers:this.headers,xform:rs})}catch(o){if(le(o))return{data:{user:null},error:o};throw o}}async deleteUser(a,i=!1){vn(a);try{return await fe(this.fetch,"DELETE",`${this.url}/admin/users/${a}`,{headers:this.headers,body:{should_soft_delete:i},xform:rs})}catch(o){if(le(o))return{data:{user:null},error:o};throw o}}async _listFactors(a){vn(a.userId);try{const{data:i,error:o}=await fe(this.fetch,"GET",`${this.url}/admin/users/${a.userId}/factors`,{headers:this.headers,xform:u=>({data:{factors:u},error:null})});return{data:i,error:o}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _deleteFactor(a){vn(a.userId),vn(a.id);try{return{data:await fe(this.fetch,"DELETE",`${this.url}/admin/users/${a.userId}/factors/${a.id}`,{headers:this.headers}),error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _listOAuthClients(a){var i,o,u,h,f,m,g;try{const x={nextPage:null,lastPage:0,total:0},v=await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(i=a==null?void 0:a.page)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:"",per_page:(h=(u=a==null?void 0:a.perPage)===null||u===void 0?void 0:u.toString())!==null&&h!==void 0?h:""},xform:Pm});if(v.error)throw v.error;const w=await v.json(),j=(f=v.headers.get("x-total-count"))!==null&&f!==void 0?f:0,_=(g=(m=v.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&g!==void 0?g:[];return _.length>0&&(_.forEach(y=>{const N=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),O=JSON.parse(y.split(";")[1].split("=")[1]);x[`${O}Page`]=N}),x.total=parseInt(j)),{data:Object.assign(Object.assign({},w),x),error:null}}catch(x){if(le(x))return{data:{clients:[]},error:x};throw x}}async _createOAuthClient(a){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:a,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}async _getOAuthClient(a){try{return await fe(this.fetch,"GET",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}async _updateOAuthClient(a,i){try{return await fe(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${a}`,{body:i,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(le(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(a){try{return await fe(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${a}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(i){if(le(i))return{data:null,error:i};throw i}}async _regenerateOAuthClientSecret(a){try{return await fe(this.fetch,"POST",`${this.url}/admin/oauth/clients/${a}/regenerate_secret`,{headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(le(i))return{data:null,error:i};throw i}}}function Ym(n={}){return{getItem:a=>n[a]||null,setItem:(a,i)=>{n[a]=i},removeItem:a=>{delete n[a]}}}const bn={debug:!!(globalThis&&dg()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fg extends Error{constructor(a){super(a),this.isAcquireTimeout=!0}}class Px extends fg{}async function Yx(n,a,i){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,a);const o=new globalThis.AbortController;return a>0&&setTimeout(()=>{o.abort(),bn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},a),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,a===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async u=>{if(u){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,u.name);try{return await i()}finally{bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,u.name)}}else{if(a===0)throw bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new Px(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bn.debug)try{const h=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(h,null,"  "))}catch(h){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",h)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await i()}}))}function Kx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function mg(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function Qx(n){return parseInt(n,16)}function Xx(n){const a=new TextEncoder().encode(n);return"0x"+Array.from(a,o=>o.toString(16).padStart(2,"0")).join("")}function Jx(n){var a;const{chainId:i,domain:o,expirationTime:u,issuedAt:h=new Date,nonce:f,notBefore:m,requestId:g,resources:x,scheme:v,uri:w,version:j}=n;{if(!Number.isInteger(i))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${i}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(f&&f.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${f}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(j!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${j}`);if(!((a=n.statement)===null||a===void 0)&&a.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const _=mg(n.address),y=v?`${v}://${o}`:o,N=n.statement?`${n.statement}
`:"",O=`${y} wants you to sign in with your Ethereum account:
${_}

${N}`;let D=`URI: ${w}
Version: ${j}
Chain ID: ${i}${f?`
Nonce: ${f}`:""}
Issued At: ${h.toISOString()}`;if(u&&(D+=`
Expiration Time: ${u.toISOString()}`),m&&(D+=`
Not Before: ${m.toISOString()}`),g&&(D+=`
Request ID: ${g}`),x){let z=`
Resources:`;for(const U of x){if(!U||typeof U!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${U}`);z+=`
- ${U}`}D+=z}return`${O}
${D}`}class st extends Error{constructor({message:a,code:i,cause:o,name:u}){var h;super(a,{cause:o}),this.__isWebAuthnError=!0,this.name=(h=u??(o instanceof Error?o.name:void 0))!==null&&h!==void 0?h:"Unknown Error",this.code=i}}class ol extends st{constructor(a,i){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i,message:a}),this.name="WebAuthnUnknownError",this.originalError=i}}function Zx({error:n,options:a}){var i,o,u;const{publicKey:h}=a;if(!h)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(a.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((i=h.authenticatorSelection)===null||i===void 0?void 0:i.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(a.mediation==="conditional"&&((o=h.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((u=h.authenticatorSelection)===null||u===void 0?void 0:u.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new st({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return h.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const f=window.location.hostname;if(gg(f)){if(h.rp.id!==f)return new st({message:`The RP ID "${h.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(h.user.id.byteLength<1||h.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function Fx({error:n,options:a}){const{publicKey:i}=a;if(!i)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(a.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new st({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const o=window.location.hostname;if(gg(o)){if(i.rpId!==o)return new st({message:`The RP ID "${i.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class Wx{createNewAbortSignal(){if(this.controller){const i=new Error("Cancelling existing WebAuthn API call for new one");i.name="AbortError",this.controller.abort(i)}const a=new AbortController;return this.controller=a,a.signal}cancelCeremony(){if(this.controller){const a=new Error("Manually cancelling existing WebAuthn API call");a.name="AbortError",this.controller.abort(a),this.controller=void 0}}}const ev=new Wx;function tv(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:a,user:i,excludeCredentials:o}=n,u=ul(n,["challenge","user","excludeCredentials"]),h=Cn(a).buffer,f=Object.assign(Object.assign({},i),{id:Cn(i.id).buffer}),m=Object.assign(Object.assign({},u),{challenge:h,user:f});if(o&&o.length>0){m.excludeCredentials=new Array(o.length);for(let g=0;g<o.length;g++){const x=o[g];m.excludeCredentials[g]=Object.assign(Object.assign({},x),{id:Cn(x.id).buffer,type:x.type||"public-key",transports:x.transports})}}return m}function av(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:a,allowCredentials:i}=n,o=ul(n,["challenge","allowCredentials"]),u=Cn(a).buffer,h=Object.assign(Object.assign({},o),{challenge:u});if(i&&i.length>0){h.allowCredentials=new Array(i.length);for(let f=0;f<i.length;f++){const m=i[f];h.allowCredentials[f]=Object.assign(Object.assign({},m),{id:Cn(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return h}function sv(n){var a;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n;return{id:n.id,rawId:n.id,response:{attestationObject:Os(new Uint8Array(n.response.attestationObject)),clientDataJSON:Os(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function nv(n){var a;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const i=n,o=n.getClientExtensionResults(),u=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:Os(new Uint8Array(u.authenticatorData)),clientDataJSON:Os(new Uint8Array(u.clientDataJSON)),signature:Os(new Uint8Array(u.signature)),userHandle:u.userHandle?Os(new Uint8Array(u.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(a=i.authenticatorAttachment)!==null&&a!==void 0?a:void 0}}function gg(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function Km(){var n,a;return!!(pt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((a=navigator==null?void 0:navigator.credentials)===null||a===void 0?void 0:a.get)=="function")}async function rv(n){try{const a=await navigator.credentials.create(n);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new ol("Browser returned unexpected credential type",a)}:{data:null,error:new ol("Empty credential response",a)}}catch(a){return{data:null,error:Zx({error:a,options:n})}}}async function iv(n){try{const a=await navigator.credentials.get(n);return a?a instanceof PublicKeyCredential?{data:a,error:null}:{data:null,error:new ol("Browser returned unexpected credential type",a)}:{data:null,error:new ol("Empty credential response",a)}}catch(a){return{data:null,error:Fx({error:a,options:n})}}}const lv={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ov={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function cl(...n){const a=u=>u!==null&&typeof u=="object"&&!Array.isArray(u),i=u=>u instanceof ArrayBuffer||ArrayBuffer.isView(u),o={};for(const u of n)if(u)for(const h in u){const f=u[h];if(f!==void 0)if(Array.isArray(f))o[h]=f;else if(i(f))o[h]=f;else if(a(f)){const m=o[h];a(m)?o[h]=cl(m,f):o[h]=cl(f)}else o[h]=f}return o}function cv(n,a){return cl(lv,n,a||{})}function uv(n,a){return cl(ov,n,a||{})}class dv{constructor(a){this.client=a,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(a){return this.client.mfa.enroll(Object.assign(Object.assign({},a),{factorType:"webauthn"}))}async _challenge({factorId:a,webauthn:i,friendlyName:o,signal:u},h){try{const{data:f,error:m}=await this.client.mfa.challenge({factorId:a,webauthn:i});if(!f)return{data:null,error:m};const g=u??ev.createNewAbortSignal();if(f.webauthn.type==="create"){const{user:x}=f.webauthn.credential_options.publicKey;x.name||(x.name=`${x.id}:${o}`),x.displayName||(x.displayName=x.name)}switch(f.webauthn.type){case"create":{const x=cv(f.webauthn.credential_options.publicKey,h==null?void 0:h.create),{data:v,error:w}=await rv({publicKey:x,signal:g});return v?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}case"request":{const x=uv(f.webauthn.credential_options.publicKey,h==null?void 0:h.request),{data:v,error:w}=await iv(Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:x,signal:g}));return v?{data:{factorId:a,challengeId:f.id,webauthn:{type:f.webauthn.type,credential_response:v}},error:null}:{data:null,error:w}}}}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new As("Unexpected error in challenge",f)}}}async _verify({challengeId:a,factorId:i,webauthn:o}){return this.client.mfa.verify({factorId:i,challengeId:a,webauthn:o})}async _authenticate({factorId:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!i)return{data:null,error:new Ar("rpId is required for WebAuthn authentication")};try{if(!Km())return{data:null,error:new As("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this.challenge({factorId:a,webauthn:{rpId:i,rpOrigins:o},signal:u},{request:h});if(!f)return{data:null,error:m};const{webauthn:g}=f;return this._verify({factorId:a,challengeId:f.challengeId,webauthn:{type:g.type,rpId:i,rpOrigins:o,credential_response:g.credential_response}})}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new As("Unexpected error in authenticate",f)}}}async _register({friendlyName:a,webauthn:{rpId:i=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:u}={}},h){if(!i)return{data:null,error:new Ar("rpId is required for WebAuthn registration")};try{if(!Km())return{data:null,error:new As("Browser does not support WebAuthn",null)};const{data:f,error:m}=await this._enroll({friendlyName:a});if(!f)return await this.client.mfa.listFactors().then(v=>{var w;return(w=v.data)===null||w===void 0?void 0:w.all.find(j=>j.factor_type==="webauthn"&&j.friendly_name===a&&j.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:m};const{data:g,error:x}=await this._challenge({factorId:f.id,friendlyName:f.friendly_name,webauthn:{rpId:i,rpOrigins:o},signal:u},{create:h});return g?this._verify({factorId:f.id,challengeId:g.challengeId,webauthn:{rpId:i,rpOrigins:o,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:x}}catch(f){return le(f)?{data:null,error:f}:{data:null,error:new As("Unexpected error in register",f)}}}}Kx();const hv={url:lx,storageKey:ox,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:cx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function Qm(n,a,i){return await i()}const _n={};class Or{get jwks(){var a,i;return(i=(a=_n[this.storageKey])===null||a===void 0?void 0:a.jwks)!==null&&i!==void 0?i:{keys:[]}}set jwks(a){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{jwks:a})}get jwks_cached_at(){var a,i;return(i=(a=_n[this.storageKey])===null||a===void 0?void 0:a.cachedAt)!==null&&i!==void 0?i:Number.MIN_SAFE_INTEGER}set jwks_cached_at(a){_n[this.storageKey]=Object.assign(Object.assign({},_n[this.storageKey]),{cachedAt:a})}constructor(a){var i,o,u;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const h=Object.assign(Object.assign({},hv),a);if(this.storageKey=h.storageKey,this.instanceID=(i=Or.nextInstanceID[this.storageKey])!==null&&i!==void 0?i:0,Or.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!h.debug,typeof h.debug=="function"&&(this.logger=h.debug),this.instanceID>0&&pt()){const f=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(f),this.logDebugMessages&&console.trace(f)}if(this.persistSession=h.persistSession,this.autoRefreshToken=h.autoRefreshToken,this.admin=new Gx({url:h.url,headers:h.headers,fetch:h.fetch}),this.url=h.url,this.headers=h.headers,this.fetch=hg(h.fetch),this.lock=h.lock||Qm,this.detectSessionInUrl=h.detectSessionInUrl,this.flowType=h.flowType,this.hasCustomAuthorizationHeader=h.hasCustomAuthorizationHeader,this.throwOnError=h.throwOnError,this.lockAcquireTimeout=h.lockAcquireTimeout,h.lock?this.lock=h.lock:this.persistSession&&pt()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Yx:this.lock=Qm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new dv(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(h.storage?this.storage=h.storage:dg()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ym(this.memoryStorage)),h.userStorage&&(this.userStorage=h.userStorage)):(this.memoryStorage={},this.storage=Ym(this.memoryStorage)),pt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(f){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",f)}(u=this.broadcastChannel)===null||u===void 0||u.addEventListener("message",async f=>{this._debug("received broadcast notification from other tab or client",f),await this._notifyAllSubscribers(f.data.event,f.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(a){if(this.throwOnError&&a&&a.error)throw a.error;return a}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${og}) ${new Date().toISOString()}`}_debug(...a){return this.logDebugMessages&&this.logger(this._logPrefix(),...a),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var a;try{let i={},o="none";if(pt()&&(i=Nx(window.location.href),this._isImplicitGrantCallback(i)?o="implicit":await this._isPKCECallback(i)&&(o="pkce")),pt()&&this.detectSessionInUrl&&o!=="none"){const{data:u,error:h}=await this._getSessionFromURL(i,o);if(h){if(this._debug("#_initialize()","error detecting session from URL",h),gx(h)){const g=(a=h.details)===null||a===void 0?void 0:a.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:h}}return{error:h}}const{session:f,redirectType:m}=u;return this._debug("#_initialize()","detected session in URL",f,"redirect type",m),await this._saveSession(f),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",f):await this._notifyAllSubscribers("SIGNED_IN",f)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(i){return le(i)?this._returnResult({error:i}):this._returnResult({error:new As("Unexpected error during initialization",i)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(a){var i,o,u;try{const h=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(i=a==null?void 0:a.options)===null||i===void 0?void 0:i.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(u=a==null?void 0:a.options)===null||u===void 0?void 0:u.captchaToken}},xform:sa}),{data:f,error:m}=h;if(m||!f)return this._returnResult({data:{user:null,session:null},error:m});const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:x,session:g},error:null})}catch(h){if(le(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signUp(a){var i,o,u;try{let h;if("email"in a){const{email:v,password:w,options:j}=a;let _=null,y=null;this.flowType==="pkce"&&([_,y]=await xn(this.storage,this.storageKey)),h=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:j==null?void 0:j.emailRedirectTo,body:{email:v,password:w,data:(i=j==null?void 0:j.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken},code_challenge:_,code_challenge_method:y},xform:sa})}else if("phone"in a){const{phone:v,password:w,options:j}=a;h=await fe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:w,data:(o=j==null?void 0:j.data)!==null&&o!==void 0?o:{},channel:(u=j==null?void 0:j.channel)!==null&&u!==void 0?u:"sms",gotrue_meta_security:{captcha_token:j==null?void 0:j.captchaToken}},xform:sa})}else throw new Wi("You must provide either an email or phone number and a password");const{data:f,error:m}=h;if(m||!f)return await gt(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const g=f.session,x=f.user;return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:x,session:g},error:null})}catch(h){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(h))return this._returnResult({data:{user:null,session:null},error:h});throw h}}async signInWithPassword(a){try{let i;if("email"in a){const{email:h,password:f,options:m}=a;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:h,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Gm})}else if("phone"in a){const{phone:h,password:f,options:m}=a;i=await fe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:h,password:f,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Gm})}else throw new Wi("You must provide either an email or phone number and a password");const{data:o,error:u}=i;if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!o||!o.session||!o.user){const h=new yn;return this._returnResult({data:{user:null,session:null},error:h})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:u})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOAuth(a){var i,o,u,h;return await this._handleProviderSignIn(a.provider,{redirectTo:(i=a.options)===null||i===void 0?void 0:i.redirectTo,scopes:(o=a.options)===null||o===void 0?void 0:o.scopes,queryParams:(u=a.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:(h=a.options)===null||h===void 0?void 0:h.skipBrowserRedirect})}async exchangeCodeForSession(a){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(a))}async signInWithWeb3(a){const{chain:i}=a;switch(i){case"ethereum":return await this.signInWithEthereum(a);case"solana":return await this.signInWithSolana(a);default:throw new Error(`@supabase/auth-js: Unsupported chain "${i}"`)}}async signInWithEthereum(a){var i,o,u,h,f,m,g,x,v,w,j;let _,y;if("message"in a)_=a.message,y=a.signature;else{const{chain:N,wallet:O,statement:D,options:z}=a;let U;if(pt())if(typeof O=="object")U=O;else{const ae=window;if("ethereum"in ae&&typeof ae.ethereum=="object"&&"request"in ae.ethereum&&typeof ae.ethereum.request=="function")U=ae.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");U=O}const E=new URL((i=z==null?void 0:z.url)!==null&&i!==void 0?i:window.location.href),G=await U.request({method:"eth_requestAccounts"}).then(ae=>ae).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!G||G.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const W=mg(G[0]);let K=(o=z==null?void 0:z.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!K){const ae=await U.request({method:"eth_chainId"});K=Qx(ae)}const R={domain:E.host,address:W,statement:D,uri:E.href,version:"1",chainId:K,nonce:(u=z==null?void 0:z.signInWithEthereum)===null||u===void 0?void 0:u.nonce,issuedAt:(f=(h=z==null?void 0:z.signInWithEthereum)===null||h===void 0?void 0:h.issuedAt)!==null&&f!==void 0?f:new Date,expirationTime:(m=z==null?void 0:z.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(g=z==null?void 0:z.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(x=z==null?void 0:z.signInWithEthereum)===null||x===void 0?void 0:x.requestId,resources:(v=z==null?void 0:z.signInWithEthereum)===null||v===void 0?void 0:v.resources};_=Jx(R),y=await U.request({method:"personal_sign",params:[Xx(_),W]})}try{const{data:N,error:O}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:_,signature:y},!((w=a.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(j=a.options)===null||j===void 0?void 0:j.captchaToken}}:null),xform:sa});if(O)throw O;if(!N||!N.session||!N.user){const D=new yn;return this._returnResult({data:{user:null,session:null},error:D})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:O})}catch(N){if(le(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async signInWithSolana(a){var i,o,u,h,f,m,g,x,v,w,j,_;let y,N;if("message"in a)y=a.message,N=a.signature;else{const{chain:O,wallet:D,statement:z,options:U}=a;let E;if(pt())if(typeof D=="object")E=D;else{const W=window;if("solana"in W&&typeof W.solana=="object"&&("signIn"in W.solana&&typeof W.solana.signIn=="function"||"signMessage"in W.solana&&typeof W.solana.signMessage=="function"))E=W.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof D!="object"||!(U!=null&&U.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=D}const G=new URL((i=U==null?void 0:U.url)!==null&&i!==void 0?i:window.location.href);if("signIn"in E&&E.signIn){const W=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},U==null?void 0:U.signInWithSolana),{version:"1",domain:G.host,uri:G.href}),z?{statement:z}:null));let K;if(Array.isArray(W)&&W[0]&&typeof W[0]=="object")K=W[0];else if(W&&typeof W=="object"&&"signedMessage"in W&&"signature"in W)K=W;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)y=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),N=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${G.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...z?["",z,""]:[""],"Version: 1",`URI: ${G.href}`,`Issued At: ${(u=(o=U==null?void 0:U.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&u!==void 0?u:new Date().toISOString()}`,...!((h=U==null?void 0:U.signInWithSolana)===null||h===void 0)&&h.notBefore?[`Not Before: ${U.signInWithSolana.notBefore}`]:[],...!((f=U==null?void 0:U.signInWithSolana)===null||f===void 0)&&f.expirationTime?[`Expiration Time: ${U.signInWithSolana.expirationTime}`]:[],...!((m=U==null?void 0:U.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${U.signInWithSolana.chainId}`]:[],...!((g=U==null?void 0:U.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${U.signInWithSolana.nonce}`]:[],...!((x=U==null?void 0:U.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${U.signInWithSolana.requestId}`]:[],...!((w=(v=U==null?void 0:U.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||w===void 0)&&w.length?["Resources",...U.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const W=await E.signMessage(new TextEncoder().encode(y),"utf8");if(!W||!(W instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");N=W}}try{const{data:O,error:D}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:Os(N)},!((j=a.options)===null||j===void 0)&&j.captchaToken?{gotrue_meta_security:{captcha_token:(_=a.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:sa});if(D)throw D;if(!O||!O.session||!O.user){const z=new yn;return this._returnResult({data:{user:null,session:null},error:z})}return O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),this._returnResult({data:Object.assign({},O),error:D})}catch(O){if(le(O))return this._returnResult({data:{user:null,session:null},error:O});throw O}}async _exchangeCodeForSession(a){const i=await Ts(this.storage,`${this.storageKey}-code-verifier`),[o,u]=(i??"").split("/");try{if(!o&&this.flowType==="pkce")throw new px;const{data:h,error:f}=await fe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:a,code_verifier:o},xform:sa});if(await gt(this.storage,`${this.storageKey}-code-verifier`),f)throw f;if(!h||!h.session||!h.user){const m=new yn;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return h.session&&(await this._saveSession(h.session),setTimeout(async()=>{await this._notifyAllSubscribers("SIGNED_IN",h.session)},0)),this._returnResult({data:Object.assign(Object.assign({},h),{redirectType:u??null}),error:f})}catch(h){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(h))return this._returnResult({data:{user:null,session:null,redirectType:null},error:h});throw h}}async signInWithIdToken(a){try{const{options:i,provider:o,token:u,access_token:h,nonce:f}=a,m=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:u,access_token:h,nonce:f,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},xform:sa}),{data:g,error:x}=m;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!g||!g.session||!g.user){const v=new yn;return this._returnResult({data:{user:null,session:null},error:v})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:x})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithOtp(a){var i,o,u,h,f;try{if("email"in a){const{email:m,options:g}=a;let x=null,v=null;this.flowType==="pkce"&&([x,v]=await xn(this.storage,this.storageKey));const{error:w}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(i=g==null?void 0:g.data)!==null&&i!==void 0?i:{},create_user:(o=g==null?void 0:g.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:x,code_challenge_method:v},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in a){const{phone:m,options:g}=a,{data:x,error:v}=await fe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(u=g==null?void 0:g.data)!==null&&u!==void 0?u:{},create_user:(h=g==null?void 0:g.shouldCreateUser)!==null&&h!==void 0?h:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(f=g==null?void 0:g.channel)!==null&&f!==void 0?f:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:v})}throw new Wi("You must provide either an email or phone number.")}catch(m){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(a){var i,o;try{let u,h;"options"in a&&(u=(i=a.options)===null||i===void 0?void 0:i.redirectTo,h=(o=a.options)===null||o===void 0?void 0:o.captchaToken);const{data:f,error:m}=await fe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},a),{gotrue_meta_security:{captcha_token:h}}),redirectTo:u,xform:sa});if(m)throw m;if(!f)throw new Error("An error occurred on token verification.");const g=f.session,x=f.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(a.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:x,session:g},error:null})}catch(u){if(le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithSSO(a){var i,o,u,h,f;try{let m=null,g=null;this.flowType==="pkce"&&([m,g]=await xn(this.storage,this.storageKey));const x=await fe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in a?{provider_id:a.providerId}:null),"domain"in a?{domain:a.domain}:null),{redirect_to:(o=(i=a.options)===null||i===void 0?void 0:i.redirectTo)!==null&&o!==void 0?o:void 0}),!((u=a==null?void 0:a.options)===null||u===void 0)&&u.captchaToken?{gotrue_meta_security:{captcha_token:a.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:g}),headers:this.headers,xform:Vx});return!((h=x.data)===null||h===void 0)&&h.url&&pt()&&!(!((f=a.options)===null||f===void 0)&&f.skipBrowserRedirect)&&window.location.assign(x.data.url),this._returnResult(x)}catch(m){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;if(o)throw o;if(!i)throw new Lt;const{error:u}=await fe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:i.access_token});return this._returnResult({data:{user:null,session:null},error:u})})}catch(a){if(le(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async resend(a){try{const i=`${this.url}/resend`;if("email"in a){const{email:o,type:u,options:h}=a,{error:f}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{email:o,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},redirectTo:h==null?void 0:h.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:f})}else if("phone"in a){const{phone:o,type:u,options:h}=a,{data:f,error:m}=await fe(this.fetch,"POST",i,{headers:this.headers,body:{phone:o,type:u,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:f==null?void 0:f.message_id},error:m})}throw new Wi("You must provide either an email or phone number and a type")}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async i=>i))}async _acquireLock(a,i){this._debug("#_acquireLock","begin",a);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),u=(async()=>(await o,await i()))();return this.pendingInLock.push((async()=>{try{await u}catch{}})()),u}return await this.lock(`lock:${this.storageKey}`,a,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=i();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const u=[...this.pendingInLock];await Promise.all(u),this.pendingInLock.splice(0,u.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(a){this._debug("#_useSession","begin");try{const i=await this.__loadSession();return await a(i)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let a=null;const i=await Ts(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",i),i!==null&&(this._isValidSession(i)?a=i:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!a)return{data:{session:null},error:null};const o=a.expires_at?a.expires_at*1e3-Date.now()<Hc:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",a.expires_at),!o){if(this.userStorage){const f=await Ts(this.userStorage,this.storageKey+"-user");f!=null&&f.user?a.user=f.user:a.user=Pc()}if(this.storage.isServer&&a.user&&!a.user.__isUserNotAvailableProxy){const f={value:this.suppressGetSessionWarning};a.user=Bx(a.user,f),f.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:a},error:null}}const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{session:null},error:h}):this._returnResult({data:{session:u},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(a){if(a)return await this._getUser(a);await this.initializePromise;const i=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return i.data.user&&(this.suppressGetSessionWarning=!0),i}async _getUser(a){try{return a?await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:a,xform:rs}):await this._useSession(async i=>{var o,u,h;const{data:f,error:m}=i;if(m)throw m;return!(!((o=f.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lt}:await fe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0,xform:rs})})}catch(i){if(le(i))return mx(i)&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:i});throw i}}async updateUser(a,i={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(a,i))}async _updateUser(a,i={}){try{return await this._useSession(async o=>{const{data:u,error:h}=o;if(h)throw h;if(!u.session)throw new Lt;const f=u.session;let m=null,g=null;this.flowType==="pkce"&&a.email!=null&&([m,g]=await xn(this.storage,this.storageKey));const{data:x,error:v}=await fe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:i==null?void 0:i.emailRedirectTo,body:Object.assign(Object.assign({},a),{code_challenge:m,code_challenge_method:g}),jwt:f.access_token,xform:rs});if(v)throw v;return f.user=x.user,await this._saveSession(f),await this._notifyAllSubscribers("USER_UPDATED",f),this._returnResult({data:{user:f.user},error:null})})}catch(o){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(a))}async _setSession(a){try{if(!a.access_token||!a.refresh_token)throw new Lt;const i=Date.now()/1e3;let o=i,u=!0,h=null;const{payload:f}=Gc(a.access_token);if(f.exp&&(o=f.exp,u=o<=i),u){const{data:m,error:g}=await this._callRefreshToken(a.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!m)return{data:{user:null,session:null},error:null};h=m}else{const{data:m,error:g}=await this._getUser(a.access_token);if(g)throw g;h={access_token:a.access_token,refresh_token:a.refresh_token,user:m.user,token_type:"bearer",expires_in:o-i,expires_at:o},await this._saveSession(h),await this._notifyAllSubscribers("SIGNED_IN",h)}return this._returnResult({data:{user:h.user,session:h},error:null})}catch(i){if(le(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}}async refreshSession(a){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(a))}async _refreshSession(a){try{return await this._useSession(async i=>{var o;if(!a){const{data:f,error:m}=i;if(m)throw m;a=(o=f.session)!==null&&o!==void 0?o:void 0}if(!(a!=null&&a.refresh_token))throw new Lt;const{data:u,error:h}=await this._callRefreshToken(a.refresh_token);return h?this._returnResult({data:{user:null,session:null},error:h}):u?this._returnResult({data:{user:u.user,session:u},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(i){if(le(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async _getSessionFromURL(a,i){try{if(!pt())throw new el("No browser detected.");if(a.error||a.error_description||a.error_code)throw new el(a.error_description||"Error in URL with unspecified error_description",{error:a.error||"unspecified_error",code:a.error_code||"unspecified_code"});switch(i){case"implicit":if(this.flowType==="pkce")throw new Bm("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new el("Not a valid implicit grant flow url.");break;default:}if(i==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!a.code)throw new Bm("No code detected.");const{data:z,error:U}=await this._exchangeCodeForSession(a.code);if(U)throw U;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:z.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:u,access_token:h,refresh_token:f,expires_in:m,expires_at:g,token_type:x}=a;if(!h||!m||!f||!x)throw new el("No session defined in URL");const v=Math.round(Date.now()/1e3),w=parseInt(m);let j=v+w;g&&(j=parseInt(g));const _=j-v;_*1e3<=Nn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${_}s, should have been closer to ${w}s`);const y=j-w;v-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,j,v):v-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,j,v);const{data:N,error:O}=await this._getUser(h);if(O)throw O;const D={provider_token:o,provider_refresh_token:u,access_token:h,expires_in:w,expires_at:j,refresh_token:f,token_type:x,user:N.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:D,redirectType:a.type},error:null})}catch(o){if(le(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(a){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),a):!!(a.access_token||a.error_description)}async _isPKCECallback(a){const i=await Ts(this.storage,`${this.storageKey}-code-verifier`);return!!(a.code&&i)}async signOut(a={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(a))}async _signOut({scope:a}={scope:"global"}){return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({error:h});const f=(o=u.session)===null||o===void 0?void 0:o.access_token;if(f){const{error:m}=await this.admin.signOut(f,a);if(m&&!(fx(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return a!=="others"&&(await this._removeSession(),await gt(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(a){const i=wx(),o={id:i,callback:a,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",i),this.stateChangeEmitters.delete(i)}};return this._debug("#onAuthStateChange()","registered callback with id",i),this.stateChangeEmitters.set(i,o),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(i)})))(),{data:{subscription:o}}}async _emitInitialSession(a){return await this._useSession(async i=>{var o,u;try{const{data:{session:h},error:f}=i;if(f)throw f;await((o=this.stateChangeEmitters.get(a))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",h)),this._debug("INITIAL_SESSION","callback id",a,"session",h)}catch(h){await((u=this.stateChangeEmitters.get(a))===null||u===void 0?void 0:u.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",a,"error",h),console.error(h)}})}async resetPasswordForEmail(a,i={}){let o=null,u=null;this.flowType==="pkce"&&([o,u]=await xn(this.storage,this.storageKey,!0));try{return await fe(this.fetch,"POST",`${this.url}/recover`,{body:{email:a,code_challenge:o,code_challenge_method:u,gotrue_meta_security:{captcha_token:i.captchaToken}},headers:this.headers,redirectTo:i.redirectTo})}catch(h){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(h))return this._returnResult({data:null,error:h});throw h}}async getUserIdentities(){var a;try{const{data:i,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(a=i.user.identities)!==null&&a!==void 0?a:[]},error:null})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async linkIdentity(a){return"token"in a?this.linkIdentityIdToken(a):this.linkIdentityOAuth(a)}async linkIdentityOAuth(a){var i;try{const{data:o,error:u}=await this._useSession(async h=>{var f,m,g,x,v;const{data:w,error:j}=h;if(j)throw j;const _=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,a.provider,{redirectTo:(f=a.options)===null||f===void 0?void 0:f.redirectTo,scopes:(m=a.options)===null||m===void 0?void 0:m.scopes,queryParams:(g=a.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await fe(this.fetch,"GET",_,{headers:this.headers,jwt:(v=(x=w.session)===null||x===void 0?void 0:x.access_token)!==null&&v!==void 0?v:void 0})});if(u)throw u;return pt()&&!(!((i=a.options)===null||i===void 0)&&i.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:a.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(le(o))return this._returnResult({data:{provider:a.provider,url:null},error:o});throw o}}async linkIdentityIdToken(a){return await this._useSession(async i=>{var o;try{const{error:u,data:{session:h}}=i;if(u)throw u;const{options:f,provider:m,token:g,access_token:x,nonce:v}=a,w=await fe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=h==null?void 0:h.access_token)!==null&&o!==void 0?o:void 0,body:{provider:m,id_token:g,access_token:x,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:sa}),{data:j,error:_}=w;return _?this._returnResult({data:{user:null,session:null},error:_}):!j||!j.session||!j.user?this._returnResult({data:{user:null,session:null},error:new yn}):(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("USER_UPDATED",j.session)),this._returnResult({data:j,error:_}))}catch(u){if(await gt(this.storage,`${this.storageKey}-code-verifier`),le(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}})}async unlinkIdentity(a){try{return await this._useSession(async i=>{var o,u;const{data:h,error:f}=i;if(f)throw f;return await fe(this.fetch,"DELETE",`${this.url}/user/identities/${a.identity_id}`,{headers:this.headers,jwt:(u=(o=h.session)===null||o===void 0?void 0:o.access_token)!==null&&u!==void 0?u:void 0})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _refreshAccessToken(a){const i=`#_refreshAccessToken(${a.substring(0,5)}...)`;this._debug(i,"begin");try{const o=Date.now();return await Ex(async u=>(u>0&&await Tx(200*Math.pow(2,u-1)),this._debug(i,"refreshing attempt",u),await fe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:a},headers:this.headers,xform:sa})),(u,h)=>{const f=200*Math.pow(2,u);return h&&Ic(h)&&Date.now()+f-o<Nn})}catch(o){if(this._debug(i,"error",o),le(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(i,"end")}}_isValidSession(a){return typeof a=="object"&&a!==null&&"access_token"in a&&"refresh_token"in a&&"expires_at"in a}async _handleProviderSignIn(a,i){const o=await this._getUrlForProvider(`${this.url}/authorize`,a,{redirectTo:i.redirectTo,scopes:i.scopes,queryParams:i.queryParams});return this._debug("#_handleProviderSignIn()","provider",a,"options",i,"url",o),pt()&&!i.skipBrowserRedirect&&window.location.assign(o),{data:{provider:a,url:o},error:null}}async _recoverAndRefresh(){var a,i;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const u=await Ts(this.storage,this.storageKey);if(u&&this.userStorage){let f=await Ts(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!f&&(f={user:u.user},await Sn(this.userStorage,this.storageKey+"-user",f)),u.user=(a=f==null?void 0:f.user)!==null&&a!==void 0?a:Pc()}else if(u&&!u.user&&!u.user){const f=await Ts(this.storage,this.storageKey+"-user");f&&(f!=null&&f.user)?(u.user=f.user,await gt(this.storage,this.storageKey+"-user"),await Sn(this.storage,this.storageKey,u)):u.user=Pc()}if(this._debug(o,"session from storage",u),!this._isValidSession(u)){this._debug(o,"session is not valid"),u!==null&&await this._removeSession();return}const h=((i=u.expires_at)!==null&&i!==void 0?i:1/0)*1e3-Date.now()<Hc;if(this._debug(o,`session has${h?"":" not"} expired with margin of ${Hc}s`),h){if(this.autoRefreshToken&&u.refresh_token){const{error:f}=await this._callRefreshToken(u.refresh_token);f&&(console.error(f),Ic(f)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",f),await this._removeSession()))}}else if(u.user&&u.user.__isUserNotAvailableProxy===!0)try{const{data:f,error:m}=await this._getUser(u.access_token);!m&&(f!=null&&f.user)?(u.user=f.user,await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(f){console.error("Error getting user data:",f),this._debug(o,"error getting user data, skipping SIGNED_IN notification",f)}else await this._notifyAllSubscribers("SIGNED_IN",u)}catch(u){this._debug(o,"error",u),console.error(u);return}finally{this._debug(o,"end")}}async _callRefreshToken(a){var i,o;if(!a)throw new Lt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const u=`#_callRefreshToken(${a.substring(0,5)}...)`;this._debug(u,"begin");try{this.refreshingDeferred=new hl;const{data:h,error:f}=await this._refreshAccessToken(a);if(f)throw f;if(!h.session)throw new Lt;await this._saveSession(h.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",h.session);const m={data:h.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(h){if(this._debug(u,"error",h),le(h)){const f={data:null,error:h};return Ic(h)||await this._removeSession(),(i=this.refreshingDeferred)===null||i===void 0||i.resolve(f),f}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(h),h}finally{this.refreshingDeferred=null,this._debug(u,"end")}}async _notifyAllSubscribers(a,i,o=!0){const u=`#_notifyAllSubscribers(${a})`;this._debug(u,"begin",i,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:a,session:i});const h=[],f=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(a,i)}catch(g){h.push(g)}});if(await Promise.all(f),h.length>0){for(let m=0;m<h.length;m+=1)console.error(h[m]);throw h[0]}}finally{this._debug(u,"end")}}async _saveSession(a){this._debug("#_saveSession()",a),this.suppressGetSessionWarning=!0,await gt(this.storage,`${this.storageKey}-code-verifier`);const i=Object.assign({},a),o=i.user&&i.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&i.user&&await Sn(this.userStorage,this.storageKey+"-user",{user:i.user});const u=Object.assign({},i);delete u.user;const h=Hm(u);await Sn(this.storage,this.storageKey,h)}else{const u=Hm(i);await Sn(this.storage,this.storageKey,u)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await gt(this.storage,this.storageKey),await gt(this.storage,this.storageKey+"-code-verifier"),await gt(this.storage,this.storageKey+"-user"),this.userStorage&&await gt(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const a=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{a&&pt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",a)}catch(i){console.error("removing visibilitychange callback failed",i)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const a=setInterval(()=>this._autoRefreshTokenTick(),Nn);this.autoRefreshTicker=a,a&&typeof a=="object"&&typeof a.unref=="function"?a.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(a);const i=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=i,i&&typeof i=="object"&&typeof i.unref=="function"?i.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(i)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const a=this.autoRefreshTicker;this.autoRefreshTicker=null,a&&clearInterval(a);const i=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,i&&clearTimeout(i)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const a=Date.now();try{return await this._useSession(async i=>{const{data:{session:o}}=i;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const u=Math.floor((o.expires_at*1e3-a)/Nn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${u} ticks, a tick lasts ${Nn}ms, refresh threshold is ${su} ticks`),u<=su&&await this._callRefreshToken(o.refresh_token)})}catch(i){console.error("Auto refresh tick failed with error. This is likely a transient error.",i)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(a){if(a.isAcquireTimeout||a instanceof fg)this._debug("auto refresh token tick lock not available");else throw a}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(a){console.error("_handleVisibilityChange",a)}}async _onVisibilityChanged(a){const i=`#_onVisibilityChanged(${a})`;this._debug(i,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),a||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(i,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(a,i,o){const u=[`provider=${encodeURIComponent(i)}`];if(o!=null&&o.redirectTo&&u.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&u.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[h,f]=await xn(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(h)}`,code_challenge_method:`${encodeURIComponent(f)}`});u.push(m.toString())}if(o!=null&&o.queryParams){const h=new URLSearchParams(o.queryParams);u.push(h.toString())}return o!=null&&o.skipBrowserRedirect&&u.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${a}?${u.join("&")}`}async _unenroll(a){try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;return h?this._returnResult({data:null,error:h}):await fe(this.fetch,"DELETE",`${this.url}/factors/${a.factorId}`,{headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _enroll(a){try{return await this._useSession(async i=>{var o,u;const{data:h,error:f}=i;if(f)return this._returnResult({data:null,error:f});const m=Object.assign({friendly_name:a.friendlyName,factor_type:a.factorType},a.factorType==="phone"?{phone:a.phone}:a.factorType==="totp"?{issuer:a.issuer}:{}),{data:g,error:x}=await fe(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(o=h==null?void 0:h.session)===null||o===void 0?void 0:o.access_token});return x?this._returnResult({data:null,error:x}):(a.factorType==="totp"&&g.type==="totp"&&(!((u=g==null?void 0:g.totp)===null||u===void 0)&&u.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _verify(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const f=Object.assign({challenge_id:a.challengeId},"webauthn"in a?{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_response:a.webauthn.type==="create"?sv(a.webauthn.credential_response):nv(a.webauthn.credential_response)})}:{code:a.code}),{data:m,error:g}=await fe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/verify`,{body:f,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:g}))})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}})}async _challenge(a){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async i=>{var o;const{data:u,error:h}=i;if(h)return this._returnResult({data:null,error:h});const f=await fe(this.fetch,"POST",`${this.url}/factors/${a.factorId}/challenge`,{body:a,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});if(f.error)return f;const{data:m}=f;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:tv(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:av(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}})}async _challengeAndVerify(a){const{data:i,error:o}=await this._challenge({factorId:a.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:a.factorId,challengeId:i.id,code:a.code})}async _listFactors(){var a;const{data:{user:i},error:o}=await this.getUser();if(o)return{data:null,error:o};const u={all:[],phone:[],totp:[],webauthn:[]};for(const h of(a=i==null?void 0:i.factors)!==null&&a!==void 0?a:[])u.all.push(h),h.status==="verified"&&u[h.factor_type].push(h);return{data:u,error:null}}async _getAuthenticatorAssuranceLevel(){var a,i;const{data:{session:o},error:u}=await this.getSession();if(u)return this._returnResult({data:null,error:u});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Gc(o.access_token);let f=null;h.aal&&(f=h.aal);let m=f;((i=(a=o.user.factors)===null||a===void 0?void 0:a.filter(v=>v.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(m="aal2");const x=h.amr||[];return{data:{currentLevel:f,nextLevel:m,currentAuthenticationMethods:x},error:null}}async _getAuthorizationDetails(a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;return u?this._returnResult({data:null,error:u}):o?await fe(this.fetch,"GET",`${this.url}/oauth/authorizations/${a}`,{headers:this.headers,jwt:o.access_token,xform:h=>({data:h,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async _approveAuthorization(a,i){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Lt});const f=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(a,i){try{return await this._useSession(async o=>{const{data:{session:u},error:h}=o;if(h)return this._returnResult({data:null,error:h});if(!u)return this._returnResult({data:null,error:new Lt});const f=await fe(this.fetch,"POST",`${this.url}/oauth/authorizations/${a}/consent`,{headers:this.headers,jwt:u.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return f.data&&f.data.redirect_url&&pt()&&!(i!=null&&i.skipBrowserRedirect)&&window.location.assign(f.data.redirect_url),f})}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async a=>{const{data:{session:i},error:o}=a;return o?this._returnResult({data:null,error:o}):i?await fe(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new Lt})})}catch(a){if(le(a))return this._returnResult({data:null,error:a});throw a}}async _revokeOAuthGrant(a){try{return await this._useSession(async i=>{const{data:{session:o},error:u}=i;return u?this._returnResult({data:null,error:u}):o?(await fe(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:a.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Lt})})}catch(i){if(le(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(a,i={keys:[]}){let o=i.keys.find(m=>m.kid===a);if(o)return o;const u=Date.now();if(o=this.jwks.keys.find(m=>m.kid===a),o&&this.jwks_cached_at+dx>u)return o;const{data:h,error:f}=await fe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(f)throw f;return!h.keys||h.keys.length===0||(this.jwks=h,this.jwks_cached_at=u,o=h.keys.find(m=>m.kid===a),!o)?null:o}async getClaims(a,i={}){try{let o=a;if(!o){const{data:_,error:y}=await this.getSession();if(y||!_.session)return this._returnResult({data:null,error:y});o=_.session.access_token}const{header:u,payload:h,signature:f,raw:{header:m,payload:g}}=Gc(o);i!=null&&i.allowExpired||Ux(h.exp);const x=!u.alg||u.alg.startsWith("HS")||!u.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(u.kid,i!=null&&i.keys?{keys:i.keys}:i==null?void 0:i.jwks);if(!x){const{error:_}=await this.getUser(o);if(_)throw _;return{data:{claims:h,header:u,signature:f},error:null}}const v=zx(u.alg),w=await crypto.subtle.importKey("jwk",x,v,!0,["verify"]);if(!await crypto.subtle.verify(v,w,f,_x(`${m}.${g}`)))throw new iu("Invalid JWT signature");return{data:{claims:h,header:u,signature:f},error:null}}catch(o){if(le(o))return this._returnResult({data:null,error:o});throw o}}}Or.nextInstanceID={};const fv=Or,mv="2.91.0";let wr="";typeof Deno<"u"?wr="deno":typeof document<"u"?wr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?wr="react-native":wr="node";const gv={"X-Client-Info":`supabase-js-${wr}/${mv}`},pv={headers:gv},yv={schema:"public"},xv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},vv={};function kr(n){"@babel/helpers - typeof";return kr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},kr(n)}function bv(n,a){if(kr(n)!="object"||!n)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var o=i.call(n,a);if(kr(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(a==="string"?String:Number)(n)}function _v(n){var a=bv(n,"string");return kr(a)=="symbol"?a:a+""}function jv(n,a,i){return(a=_v(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i,n}function Xm(n,a){var i=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);a&&(o=o.filter(function(u){return Object.getOwnPropertyDescriptor(n,u).enumerable})),i.push.apply(i,o)}return i}function Je(n){for(var a=1;a<arguments.length;a++){var i=arguments[a]!=null?arguments[a]:{};a%2?Xm(Object(i),!0).forEach(function(o){jv(n,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):Xm(Object(i)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(i,o))})}return n}const wv=n=>n?(...a)=>n(...a):(...a)=>fetch(...a),Nv=()=>Headers,Sv=(n,a,i)=>{const o=wv(i),u=Nv();return async(h,f)=>{var m;const g=(m=await a())!==null&&m!==void 0?m:n;let x=new u(f==null?void 0:f.headers);return x.has("apikey")||x.set("apikey",n),x.has("Authorization")||x.set("Authorization",`Bearer ${g}`),o(h,Je(Je({},f),{},{headers:x}))}};function Tv(n){return n.endsWith("/")?n:n+"/"}function Ev(n,a){var i,o;const{db:u,auth:h,realtime:f,global:m}=n,{db:g,auth:x,realtime:v,global:w}=a,j={db:Je(Je({},g),u),auth:Je(Je({},x),h),realtime:Je(Je({},v),f),storage:{},global:Je(Je(Je({},w),m),{},{headers:Je(Je({},(i=w==null?void 0:w.headers)!==null&&i!==void 0?i:{}),(o=m==null?void 0:m.headers)!==null&&o!==void 0?o:{})}),accessToken:async()=>""};return n.accessToken?j.accessToken=n.accessToken:delete j.accessToken,j}function Cv(n){const a=n==null?void 0:n.trim();if(!a)throw new Error("supabaseUrl is required.");if(!a.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Tv(a))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var Av=class extends fv{constructor(n){super(n)}},Ov=class{constructor(n,a,i){var o,u;this.supabaseUrl=n,this.supabaseKey=a;const h=Cv(n);if(!a)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",h),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",h),this.storageUrl=new URL("storage/v1",h),this.functionsUrl=new URL("functions/v1",h);const f=`sb-${h.hostname.split(".")[0]}-auth-token`,m={db:yv,realtime:vv,auth:Je(Je({},xv),{},{storageKey:f}),global:pv},g=Ev(i??{},m);if(this.storageKey=(o=g.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(u=g.global.headers)!==null&&u!==void 0?u:{},g.accessToken)this.accessToken=g.accessToken,this.auth=new Proxy({},{get:(v,w)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(w)} is not possible`)}});else{var x;this.auth=this._initSupabaseAuthClient((x=g.auth)!==null&&x!==void 0?x:{},this.headers,g.global.fetch)}this.fetch=Sv(a,this._getAccessToken.bind(this),g.global.fetch),this.realtime=this._initRealtimeClient(Je({headers:this.headers,accessToken:this._getAccessToken.bind(this)},g.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(v=>this.realtime.setAuth(v)).catch(v=>console.warn("Failed to set initial Realtime auth token:",v)),this.rest=new cy(new URL("rest/v1",h).href,{headers:this.headers,schema:g.db.schema,fetch:this.fetch}),this.storage=new ix(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),g.accessToken||this._listenForAuthEvents()}get functions(){return new ny(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,a={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,a,i)}channel(n,a={config:{}}){return this.realtime.channel(n,a)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var n=this,a,i;if(n.accessToken)return await n.accessToken();const{data:o}=await n.auth.getSession();return(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:n.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:u,storageKey:h,flowType:f,lock:m,debug:g,throwOnError:x},v,w){const j={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Av({url:this.authUrl.href,headers:Je(Je({},j),v),storageKey:h,autoRefreshToken:n,persistSession:a,detectSessionInUrl:i,storage:o,userStorage:u,flowType:f,lock:m,debug:g,throwOnError:x,fetch:w,hasCustomAuthorizationHeader:Object.keys(this.headers).some(_=>_.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Ty(this.realtimeUrl.href,Je(Je({},n),{},{params:Je(Je({},{apikey:this.supabaseKey}),n==null?void 0:n.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,a)=>{this._handleTokenChanged(n,"CLIENT",a==null?void 0:a.access_token)})}_handleTokenChanged(n,a,i){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),a=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const kv=(n,a,i)=>new Ov(n,a,i);function Dv(){if(typeof window<"u")return!1;const n=globalThis.process;if(!n)return!1;const a=n.version;if(a==null)return!1;const i=a.match(/^v(\d+)\./);return i?parseInt(i[1],10)<=18:!1}Dv()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Rv="https://mateqvfogzwictdpaurj.supabase.co",Uv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im1hdGVxdmZvZ3p3aWN0ZHBhdXJqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjM4MjEyNTMsImV4cCI6MjA3OTM5NzI1M30.wILVPfgZVBaPYeJF29d9YG_4mN2HP0kSGid8t9tTLUw",ee=kv(Rv,Uv),Z=({children:n,variant:a="primary",size:i="md",className:o="",...u})=>{const h={primary:"bg-indigo-600 hover:bg-indigo-700 text-white shadow-lg shadow-indigo-500/20",secondary:"bg-gray-800 hover:bg-gray-700 text-gray-100 border border-gray-700",danger:"bg-red-600 hover:bg-red-700 text-white shadow-lg shadow-red-500/20",ghost:"bg-transparent hover:bg-gray-800 text-gray-400 hover:text-white",outline:"bg-transparent border border-indigo-500/50 hover:border-indigo-500 text-indigo-400"},f={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return r.jsx("button",{className:`rounded-lg font-bold transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed ${h[a]} ${f[i]} ${o}`,...u,children:n})},_e=({children:n,color:a="gray",className:i=""})=>{const o={indigo:"bg-indigo-500/10 text-indigo-400 border-indigo-500/20",green:"bg-green-500/10 text-green-400 border-green-500/20",red:"bg-red-500/10 text-red-400 border-red-500/20",yellow:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",gray:"bg-gray-500/10 text-gray-400 border-gray-500/20"};return r.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold border ${o[a]} ${i}`,children:n})},Ce=({children:n,className:a="",title:i,...o})=>r.jsxs("div",{className:`bg-gray-900 border border-gray-800 rounded-xl overflow-hidden ${a}`,...o,children:[i&&r.jsx("div",{className:"px-6 py-4 border-b border-gray-800 font-semibold text-gray-300",children:i}),r.jsx("div",{className:"p-6",children:n})]}),ia=({isOpen:n,onClose:a,title:i,children:o,size:u="md"})=>{if(!n)return null;const h={sm:"max-w-md",md:"max-w-2xl",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-[95vw]"};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:a,children:r.jsxs("div",{className:`bg-gray-900 border border-gray-800 w-full ${h[u]} rounded-2xl shadow-2xl animate-in zoom-in-95 duration-200`,onClick:f=>f.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800 bg-gray-900/50",children:[r.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:i}),r.jsx("button",{onClick:a,className:"text-gray-500 hover:text-white transition-colors p-1 hover:bg-gray-800 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6 max-h-[80vh] overflow-y-auto",children:o})]})})},P=({label:n,error:a,as:i="input",className:o="",...u})=>{const h=i;return r.jsxs("div",{className:"space-y-1",children:[n&&r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:n}),r.jsx(h,{className:`w-full bg-gray-950 border border-gray-800 rounded-lg px-4 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-transparent outline-none transition-all placeholder-gray-600 ${o}`,...u}),a&&r.jsx("p",{className:"text-xs text-red-500",children:a})]})},zv=({onSuccess:n,initialMode:a="login"})=>{const[i,o]=H.useState(!1),[u,h]=H.useState(""),[f,m]=H.useState(""),[g,x]=H.useState(a==="signup"),[v,w]=H.useState(""),j=async _=>{_.preventDefault(),o(!0),w("");try{if(g){const{error:y}=await ee.auth.signUp({email:u,password:f});if(y)throw y;w("Verifique seu email para confirmar o cadastro!")}else{const{error:y}=await ee.auth.signInWithPassword({email:u,password:f});if(y)throw y;n()}}catch(y){w(y.message||"Erro ao autenticar")}finally{o(!1)}};return r.jsx("div",{className:"min-h-screen bg-[#02040a] flex items-center justify-center px-6",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("img",{src:"/logo.png",alt:"TripDivide",className:"h-24 w-auto mx-auto mb-6"}),r.jsx("h1",{className:"text-3xl font-black text-white uppercase tracking-tight mb-2",children:g?"Criar Conta":"Entrar"}),r.jsx("p",{className:"text-gray-400 text-sm",children:g?"Crie sua conta para comear":"Entre para acessar suas viagens"})]}),r.jsx(Ce,{className:"!bg-gray-900/50 !border-white/10",children:r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"Email"}),r.jsx("input",{type:"email",value:u,onChange:_=>h(_.target.value),required:!0,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 transition-colors",placeholder:"seu@email.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-300 mb-2",children:"Senha"}),r.jsx("input",{type:"password",value:f,onChange:_=>m(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:outline-none focus:border-indigo-500 transition-colors",placeholder:""})]}),v&&r.jsx("div",{className:`p-3 rounded-xl text-sm ${v.includes("Erro")||v.includes("erro")?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-green-500/10 text-green-400 border border-green-500/20"}`,children:v}),r.jsx(Z,{type:"submit",variant:"primary",disabled:i,className:"w-full !py-3 !text-lg font-black uppercase",children:i?"Aguarde...":g?"Criar Conta":"Entrar"}),r.jsx("button",{type:"button",onClick:()=>{x(!g),w("")},className:"w-full text-sm text-gray-400 hover:text-white transition-colors",children:g?"J tem conta? Entre aqui":"No tem conta? Cadastre-se"})]})}),r.jsx("p",{className:"text-center text-xs text-gray-600 mt-6",children:"Ao criar uma conta, voc concorda com nossos termos de uso"})]})})},bt={Dashboard:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})}),Travelers:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),Vendors:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),Quotes:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),Expenses:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),Settlement:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),Plus:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),X:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),ChevronDown:n=>r.jsx("svg",{...n,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})},Ke={getTrips:async()=>{const{data:{user:n}}=await ee.auth.getUser();if(!n)return[];const{data:a,error:i}=await ee.from("td_trips").select("*").eq("user_id",n.id).order("updated_at",{ascending:!1});if(i)throw i;return a||[]},getActiveTrip:async()=>{const{data:{user:n}}=await ee.auth.getUser();if(!n)return null;const{data:a,error:i}=await ee.from("td_user_active_trip").select("active_trip_id").eq("user_id",n.id).single();if(i&&i.code!=="PGRST116")throw i;return(a==null?void 0:a.active_trip_id)||null},setActiveTrip:async n=>{const{data:{user:a}}=await ee.auth.getUser();if(!a)throw new Error("Usurio no autenticado");const{error:i}=await ee.from("td_user_active_trip").upsert({user_id:a.id,active_trip_id:n,updated_at:new Date().toISOString()});if(i)throw i;return!0},getTripById:async n=>{const{data:a,error:i}=await ee.from("td_trips").select("*").eq("id",n).single();if(i)throw i;return a},saveTrip:async n=>{const{data:{user:a}}=await ee.auth.getUser();if(!a)throw new Error("Usurio no autenticado");if(n.id){const{data:i,error:o}=await ee.from("td_trips").update({name:n.name,start_date:n.startDate,end_date:n.endDate,consensus_rule:n.consensusRule,categories:n.categories,status:n.status,destinations:n.destinations,base_currency:n.baseCurrency,default_exchange_rate:n.defaultExchangeRate,default_split_rule:n.defaultSplitRule,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(o)throw o;return i}else{const{data:i,error:o}=await ee.from("td_trips").insert({user_id:a.id,name:n.name,start_date:n.startDate,end_date:n.endDate,consensus_rule:n.consensusRule||"2/3",categories:n.categories||["Voo","Hospedagem","Aluguel de Carro","Restaurantes","Diversos"],status:n.status||"active",destinations:n.destinations||[],base_currency:n.baseCurrency||"BRL",default_exchange_rate:n.defaultExchangeRate||1,default_split_rule:n.defaultSplitRule||"equal"}).select().single();if(o)throw o;return await Ke.setActiveTrip(i.id),i}},duplicateTrip:async n=>{const{data:{user:a}}=await ee.auth.getUser();if(!a)throw new Error("Usurio no autenticado");const{data:i}=await ee.from("td_trips").select("*").eq("id",n).single();if(!i)throw new Error("Viagem no encontrada");const{data:o,error:u}=await ee.from("td_trips").insert({user_id:a.id,name:`${i.name} (Cpia)`,start_date:i.start_date,end_date:i.end_date,consensus_rule:i.consensus_rule,categories:i.categories,status:"draft",destinations:i.destinations,base_currency:i.base_currency,default_exchange_rate:i.default_exchange_rate,default_split_rule:i.default_split_rule}).select().single();if(u)throw u;const{data:h}=await ee.from("td_couples").select("*").eq("trip_id",n);h&&h.length>0&&await ee.from("td_couples").insert(h.map(m=>({trip_id:o.id,name:m.name})));const{data:f}=await ee.from("td_segments").select("*").eq("trip_id",n);return f&&f.length>0&&await ee.from("td_segments").insert(f.map(m=>({trip_id:o.id,name:m.name,start_date:m.start_date,end_date:m.end_date}))),o},archiveTrip:async n=>{const{error:a}=await ee.from("td_trips").update({status:"archived",updated_at:new Date().toISOString()}).eq("id",n);if(a)throw a;return!0},deleteTrip:async n=>{const{error:a}=await ee.from("td_trips").delete().eq("id",n);if(a)throw a;return!0},finalizeTripDraft:async(n,a)=>{const{error:i}=await ee.from("td_trips").update({name:a.name,start_date:a.startDate,end_date:a.endDate,destinations:a.destinations,status:"active",updated_at:new Date().toISOString()}).eq("id",n);if(i)throw i;return await Ke.setActiveTrip(n),!0},getCouples:async n=>{const{data:a,error:i}=await ee.from("td_couples").select("*").eq("trip_id",n).order("created_at",{ascending:!0});if(i)throw i;return a||[]},saveCouple:async(n,a)=>{if(a.id){const{data:i,error:o}=await ee.from("td_couples").update({name:a.name}).eq("id",a.id).select().single();if(o)throw o;return i}else{const{data:i,error:o}=await ee.from("td_couples").insert({trip_id:n,name:a.name}).select().single();if(o)throw o;return i}},deleteCouple:async n=>{const{data:a}=await ee.from("td_travelers").select("id").eq("couple_id",n).eq("status","Ativo").limit(1);if(a&&a.length>0)throw new Error("No  possvel excluir um grupo que possui viajantes. Remova os viajantes primeiro.");const{error:i}=await ee.from("td_couples").delete().eq("id",n);if(i)throw i;return!0},getSegments:async n=>{const{data:a,error:i}=await ee.from("td_segments").select("*").eq("trip_id",n).order("created_at",{ascending:!0});if(i)throw i;return a||[]},saveSegment:async n=>{if(n.id){const{data:a,error:i}=await ee.from("td_segments").update({name:n.name,start_date:n.startDate,end_date:n.endDate}).eq("id",n.id).select().single();if(i)throw i;return a}else{const{data:a,error:i}=await ee.from("td_segments").insert({trip_id:n.tripId,name:n.name,start_date:n.startDate,end_date:n.endDate}).select().single();if(i)throw i;return a}},getTravelers:async n=>{const{data:a,error:i}=await ee.from("td_travelers").select("*").eq("trip_id",n).eq("status","Ativo").order("created_at",{ascending:!0});if(i)throw i;return(a||[]).map(o=>({id:o.id,tripId:o.trip_id,coupleId:o.couple_id,fullName:o.full_name,documentName:o.document_name,nickname:o.nickname,type:o.type,goesToSegments:o.goes_to_segments||[],isPayer:o.is_payer,status:o.status,createdAt:o.created_at,updatedAt:o.updated_at,phone:o.phone,email:o.email,birthDate:o.birth_date,canDrive:o.can_drive,docType:o.doc_type,docNumber:o.doc_number,docExpiry:o.doc_expiry,tags:o.tags,notes:o.notes}))},saveTraveler:async n=>{if(n.id){const{data:a,error:i}=await ee.from("td_travelers").update({couple_id:n.coupleId,full_name:n.fullName,document_name:n.documentName,nickname:n.nickname,type:n.type,goes_to_segments:n.goesToSegments,is_payer:n.isPayer,phone:n.phone,email:n.email,birth_date:n.birthDate,can_drive:n.canDrive,doc_type:n.docType,doc_number:n.docNumber,doc_expiry:n.docExpiry,tags:n.tags,notes:n.notes,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(i)throw i;return{id:a.id,tripId:a.trip_id,coupleId:a.couple_id,fullName:a.full_name,documentName:a.document_name,nickname:a.nickname,type:a.type,goesToSegments:a.goes_to_segments||[],isPayer:a.is_payer,status:a.status,createdAt:a.created_at,updatedAt:a.updated_at,phone:a.phone,email:a.email,birthDate:a.birth_date,canDrive:a.can_drive,docType:a.doc_type,docNumber:a.doc_number,docExpiry:a.doc_expiry,tags:a.tags,notes:a.notes}}else{const{data:a,error:i}=await ee.from("td_travelers").insert({trip_id:n.tripId,couple_id:n.coupleId,full_name:n.fullName,document_name:n.documentName,nickname:n.nickname,type:n.type,goes_to_segments:n.goesToSegments,is_payer:n.isPayer,phone:n.phone,email:n.email,birth_date:n.birthDate,can_drive:n.canDrive,doc_type:n.docType,doc_number:n.docNumber,doc_expiry:n.docExpiry,tags:n.tags,notes:n.notes,status:"Ativo"}).select().single();if(i)throw i;return{id:a.id,tripId:a.trip_id,coupleId:a.couple_id,fullName:a.full_name,documentName:a.document_name,nickname:a.nickname,type:a.type,goesToSegments:a.goes_to_segments||[],isPayer:a.is_payer,status:a.status,createdAt:a.created_at,updatedAt:a.updated_at,phone:a.phone,email:a.email,birthDate:a.birth_date,canDrive:a.can_drive,docType:a.doc_type,docNumber:a.doc_number,docExpiry:a.doc_expiry,tags:a.tags,notes:a.notes}}},deleteTraveler:async n=>{const{error:a}=await ee.from("td_travelers").update({status:"Arquivado"}).eq("id",n);if(a)throw a},getTravelerDocuments:async n=>{const{data:{session:a}}=await ee.auth.getSession();if(!a)throw new Error("No autenticado");const{data:i,error:o}=await ee.from("td_traveler_documents").select("*").eq("traveler_id",n).order("created_at",{ascending:!0});if(o)throw o;return await Promise.all((i||[]).map(async h=>{try{const m=await(await fetch(`${ee.supabaseUrl}/functions/v1/encrypt-document`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"decrypt",documentId:h.id})})).json(),g=m.success?m.docNumber:""+h.doc_number_last4;return{id:h.id,travelerId:h.traveler_id,docType:h.doc_type,docCategory:h.doc_category,docNumber:g,docNumberLast4:h.doc_number_last4,issuerCountry:h.issuer_country,issuerState:h.issuer_state,issuerAgency:h.issuer_agency,issuerPlace:h.issuer_place,regionOrCountry:h.region_or_country,issueDate:h.issue_date,expiryDate:h.expiry_date,visaCategory:h.visa_category,entryType:h.entry_type,stayDurationDays:h.stay_duration_days,licenseCategory:h.license_category,customLabel:h.custom_label,passportDocumentId:h.passport_document_id,isPrimary:h.is_primary,notes:h.notes,createdAt:h.created_at,updatedAt:h.updated_at}}catch{return{id:h.id,travelerId:h.traveler_id,docType:h.doc_type,docCategory:h.doc_category,docNumber:""+h.doc_number_last4,docNumberLast4:h.doc_number_last4,issuerCountry:h.issuer_country,issuerState:h.issuer_state,issuerAgency:h.issuer_agency,issuerPlace:h.issuer_place,regionOrCountry:h.region_or_country,issueDate:h.issue_date,expiryDate:h.expiry_date,visaCategory:h.visa_category,entryType:h.entry_type,stayDurationDays:h.stay_duration_days,licenseCategory:h.license_category,customLabel:h.custom_label,passportDocumentId:h.passport_document_id,isPrimary:h.is_primary,notes:h.notes,createdAt:h.created_at,updatedAt:h.updated_at}}}))},saveTravelerDocument:async n=>{const{data:{session:a}}=await ee.auth.getSession();if(!a)throw new Error("No autenticado");console.log(" Enviando documento para criptografia:",{travelerId:n.travelerId,docType:n.docType,docCategory:n.docCategory,docNumber:n.docNumber?"***"+n.docNumber.slice(-4):"vazio"});const o=await(await fetch(`${ee.supabaseUrl}/functions/v1/encrypt-document`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"encrypt",travelerId:n.travelerId,docType:n.docType,docCategory:n.docCategory||(n.docType==="Visto"||n.docType==="ESTA"?"entry":"identity"),docNumber:n.docNumber,issuerCountry:n.issuerCountry,issuerState:n.issuerState,issuerAgency:n.issuerAgency,issuerPlace:n.issuerPlace,regionOrCountry:n.regionOrCountry,issueDate:n.issueDate,expiryDate:n.docExpiry,visaCategory:n.visaCategory,entryType:n.entryType,stayDurationDays:n.stayDurationDays,licenseCategory:n.licenseCategory,customLabel:n.customLabel,passportDocumentId:n.passportDocumentId,isPrimary:n.isPrimary,notes:n.notes,documentId:n.id})})).json();if(console.log(" Resposta da Edge Function:",o),!o.success)throw console.error(" Erro ao salvar documento:",o.error),new Error(o.error||"Erro ao salvar documento");return console.log(" Documento salvo com sucesso! ID:",o.documentId),{id:o.documentId,travelerId:n.travelerId,docType:n.docType,docCategory:n.docCategory,docNumber:n.docNumber,docNumberLast4:n.docNumber.replace(/[^A-Za-z0-9]/g,"").slice(-4),issuerCountry:n.issuerCountry,issuerState:n.issuerState,issuerAgency:n.issuerAgency,issuerPlace:n.issuerPlace,regionOrCountry:n.regionOrCountry,issueDate:n.issueDate,expiryDate:n.docExpiry,visaCategory:n.visaCategory,entryType:n.entryType,stayDurationDays:n.stayDurationDays,licenseCategory:n.licenseCategory,customLabel:n.customLabel,passportDocumentId:n.passportDocumentId,isPrimary:n.isPrimary,notes:n.notes,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}},decryptTravelerDocument:async n=>{const{data:{session:a}}=await ee.auth.getSession();if(!a)throw new Error("No autenticado");const o=await(await fetch(`${ee.supabaseUrl}/functions/v1/encrypt-document`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({action:"decrypt",documentId:n})})).json();if(!o.success)throw new Error(o.error);return o.docNumber},deleteTravelerDocument:async n=>{const{error:a}=await ee.from("td_traveler_documents").delete().eq("id",n);if(a)throw a},saveTravelerDraft:async n=>{const a={...n,is_draft:!0};return Ke.saveTraveler(a)},finalizeTravelerDraft:async n=>{const{error:a}=await ee.from("td_travelers").update({is_draft:!1}).eq("id",n);if(a)throw a},getTravelerDrafts:async n=>{const{data:a,error:i}=await ee.from("td_travelers").select("*").eq("trip_id",n).eq("is_draft",!0).eq("status","Ativo").order("updated_at",{ascending:!1});if(i)throw i;return(a||[]).map(o=>({id:o.id,tripId:o.trip_id,coupleId:o.couple_id,fullName:o.full_name,documentName:o.document_name,nickname:o.nickname,type:o.type,goesToSegments:o.goes_to_segments||[],isPayer:o.is_payer,status:o.status,createdAt:o.created_at,updatedAt:o.updated_at,phone:o.phone,email:o.email,birthDate:o.birth_date,canDrive:o.can_drive,docType:o.doc_type,docNumber:o.doc_number,docExpiry:o.doc_expiry,tags:o.tags,notes:o.notes,isDraft:!0}))},discardTravelerDraft:async n=>{const{error:a}=await ee.from("td_travelers").delete().eq("id",n).eq("is_draft",!0);if(a)throw a},getExpiringDocuments:async(n,a=90)=>{const i=new Date,o=new Date;o.setDate(i.getDate()+a);const{data:u,error:h}=await ee.from("td_traveler_documents").select(`
        *,
        traveler:td_travelers!inner(
          id,
          full_name,
          trip_id
        )
      `).eq("traveler.trip_id",n).not("doc_expiry","is",null).lte("doc_expiry",o.toISOString().split("T")[0]);if(h)throw h;return(u||[]).map(f=>({documentId:f.id,travelerId:f.traveler.id,travelerName:f.traveler.full_name,docType:f.doc_type,docNumberLast4:f.doc_number_last4,docExpiry:f.doc_expiry,daysUntilExpiry:Math.ceil((new Date(f.doc_expiry).getTime()-i.getTime())/(1e3*60*60*24)),isExpired:new Date(f.doc_expiry)<i}))},calculateDocumentExpiryStatus:n=>{if(!n)return null;const a=new Date,i=new Date(n),o=Math.ceil((i.getTime()-a.getTime())/(1e3*60*60*24));return o<0?{status:"expired",color:"red",label:"Vencido",days:Math.abs(o)}:o<=30?{status:"critical",color:"red",label:`Vence em ${o} dias`,days:o}:o<=90?{status:"warning",color:"yellow",label:`Vence em ${o} dias`,days:o}:{status:"ok",color:"green",label:`Vlido por ${o} dias`,days:o}},normalizeTags:n=>{if(!n||n.length===0)return[];const a=n.map(i=>i.trim()).filter(i=>i.length>0).map(i=>i.replace(/\s+/g," ")).map(i=>i.split(" ").map(o=>o.charAt(0).toUpperCase()+o.slice(1).toLowerCase()).join(" "));return[...new Set(a)]},getExistingTags:async n=>{const{data:a,error:i}=await ee.from("td_travelers").select("tags").eq("trip_id",n).eq("status","Ativo").not("tags","is",null);if(i)throw i;const o=(a||[]).flatMap(u=>u.tags||[]).filter(u=>u&&u.trim().length>0);return Ke.normalizeTags(o)},getVendors:async n=>{const{data:a,error:i}=await ee.from("td_vendors").select("*").eq("trip_id",n).eq("status","Ativo").order("created_at",{ascending:!0});if(i)throw i;return a||[]},saveVendor:async n=>{if(n.id){const{data:a,error:i}=await ee.from("td_vendors").update({name:n.name,legal_name:n.legalName,categories:n.categories,rating:n.rating,preferred:n.preferred,tags:n.tags,risk_flags:n.riskFlags,contacts:n.contacts,website_url:n.websiteUrl,instagram_url:n.instagramUrl,sla_notes:n.slaNotes,payment_terms_default:n.paymentTermsDefault,cancellation_policy_notes:n.cancellationPolicyNotes,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(i)throw i;return a}else{const{data:a,error:i}=await ee.from("td_vendors").insert({trip_id:n.tripId,name:n.name,legal_name:n.legalName,categories:n.categories,rating:n.rating,preferred:n.preferred,tags:n.tags,risk_flags:n.riskFlags,contacts:n.contacts,website_url:n.websiteUrl,instagram_url:n.instagramUrl,sla_notes:n.slaNotes,payment_terms_default:n.paymentTermsDefault,cancellation_policy_notes:n.cancellationPolicyNotes,status:"Ativo"}).select().single();if(i)throw i;return a}},getQuotes:async n=>{const{data:a,error:i}=await ee.from("td_quotes").select("*").eq("trip_id",n).order("created_at",{ascending:!1});if(i)throw i;return a||[]},getQuoteById:async n=>{const{data:a,error:i}=await ee.from("td_quotes").select("*").eq("id",n).single();if(i)throw i;return a},saveQuote:async n=>{const{data:{user:a}}=await ee.auth.getUser();if(n.id){const{data:i,error:o}=await ee.from("td_quotes").update({vendor_id:n.vendorId,segment_id:n.segmentId,title:n.title,category:n.category,provider:n.provider,currency:n.currency,exchange_rate:n.exchangeRate,total_amount:n.totalAmount,amount_brl:n.amountBrl,valid_until:n.validUntil,status:n.status,votes:n.votes,completeness:n.completeness,payment_terms:n.paymentTerms,tags:n.tags,participant_ids:n.participantIds,includes:n.includes,excludes:n.excludes,notes_group:n.notesGroup,notes_internal:n.notesInternal,link_url:n.linkUrl,cancellation_policy:n.cancellationPolicy,hotel_details:n.hotelDetails,ticket_details:n.ticketDetails,car_details:n.carDetails,generic_details:n.genericDetails,taxes_fees:n.taxesFees,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(o)throw o;return i}else{const{data:i,error:o}=await ee.from("td_quotes").insert({trip_id:n.tripId,vendor_id:n.vendorId,segment_id:n.segmentId,title:n.title,category:n.category,provider:n.provider,currency:n.currency,exchange_rate:n.exchangeRate,total_amount:n.totalAmount,amount_brl:n.amountBrl,valid_until:n.validUntil,status:n.status||"Novo",votes:n.votes||[],completeness:n.completeness||0,payment_terms:n.paymentTerms,tags:n.tags||[],participant_ids:n.participantIds||[],includes:n.includes,excludes:n.excludes,notes_group:n.notesGroup,notes_internal:n.notesInternal,link_url:n.linkUrl,cancellation_policy:n.cancellationPolicy,hotel_details:n.hotelDetails,ticket_details:n.ticketDetails,car_details:n.carDetails,generic_details:n.genericDetails,taxes_fees:n.taxesFees,created_by:a==null?void 0:a.id}).select().single();if(o)throw o;return i}},getExpenses:async n=>{const{data:a,error:i}=await ee.from("td_expenses").select("*").eq("trip_id",n).neq("status","cancelled").order("created_at",{ascending:!1});if(i)throw i;return a||[]},getExpenseById:async n=>{const{data:a,error:i}=await ee.from("td_expenses").select("*").eq("id",n).single();if(i)throw i;return a},saveExpense:async n=>{if(n.id){const{data:a,error:i}=await ee.from("td_expenses").update({segment_id:n.segmentId,category:n.category,title:n.title,vendor_id:n.vendorId,source_quote_id:n.sourceQuoteId,currency:n.currency,amount:n.amount,exchange_rate:n.exchangeRate,amount_brl:n.amountBrl,due_date:n.dueDate,status:n.status,notes_group:n.notesGroup,notes_internal:n.notesInternal,hotel_details:n.hotelDetails,ticket_details:n.ticketDetails,car_details:n.carDetails,generic_details:n.genericDetails,updated_at:new Date().toISOString()}).eq("id",n.id).select().single();if(i)throw i;return a}else{const{data:a,error:i}=await ee.from("td_expenses").insert({trip_id:n.tripId,segment_id:n.segmentId,category:n.category,title:n.title,vendor_id:n.vendorId,source_quote_id:n.sourceQuoteId,currency:n.currency,amount:n.amount,exchange_rate:n.exchangeRate,amount_brl:n.amountBrl,due_date:n.dueDate,status:n.status||"planned",notes_group:n.notesGroup,notes_internal:n.notesInternal,hotel_details:n.hotelDetails,ticket_details:n.ticketDetails,car_details:n.carDetails,generic_details:n.genericDetails}).select().single();if(i)throw i;return a}},getPaymentsByTrip:async n=>{const{data:a,error:i}=await ee.from("td_payments").select("*").eq("trip_id",n).order("paid_at",{ascending:!1});if(i)throw i;return a||[]},getPaymentsByExpense:async n=>{const{data:a,error:i}=await ee.from("td_payments").select("*").eq("expense_id",n).order("paid_at",{ascending:!1});if(i)throw i;return a||[]},savePayment:async n=>{const{data:a,error:i}=await ee.from("td_payments").insert({trip_id:n.tripId,expense_id:n.expenseId,paid_by_couple_id:n.paidByCoupleId,method:n.method,installments:n.installments,installment_value:n.installmentValue,paid_amount_brl:n.paidAmountBrl,paid_at:n.paidAt,proof_url:n.proofUrl,notes:n.notes}).select().single();if(i)throw i;if(n.expenseId){const{data:o}=await ee.from("td_payments").select("paid_amount_brl").eq("expense_id",n.expenseId),{data:u}=await ee.from("td_expenses").select("amount_brl").eq("id",n.expenseId).single();o&&u&&o.reduce((f,m)=>f+m.paid_amount_brl,0)>=u.amount_brl-.01&&await ee.from("td_expenses").update({status:"paid"}).eq("id",n.expenseId),await Ke.generateReimbursementsForExpense(n.expenseId)}return a},getExpenseSplits:async n=>{const{data:a,error:i}=await ee.from("td_expense_splits").select("*").eq("expense_id",n);if(i)throw i;return a||[]},updateExpenseSplits:async(n,a)=>{await ee.from("td_expense_splits").delete().eq("expense_id",n);const{data:i,error:o}=await ee.from("td_expense_splits").insert(a.map(u=>({expense_id:n,couple_id:u.coupleId,split_type:u.splitType,value:u.value,amount_brl:u.amountBrl}))).select();if(o)throw o;return await Ke.generateReimbursementsForExpense(n),i},getReimbursements:async n=>{const{data:a,error:i}=await ee.from("td_reimbursements").select("*").eq("trip_id",n).order("created_at",{ascending:!1});if(i)throw i;return a||[]},markReimbursementAsPaid:async n=>{const{error:a}=await ee.from("td_reimbursements").update({status:"paid",paid_at:new Date().toISOString()}).eq("id",n);if(a)throw a},getExpenseSplitsByTrip:async n=>{const{data:a}=await ee.from("td_expenses").select("id").eq("trip_id",n).neq("status","cancelled");if(!a||a.length===0)return[];const i=a.map(h=>h.id),{data:o,error:u}=await ee.from("td_expense_splits").select("*").in("expense_id",i);if(u)throw u;return o||[]},closeQuoteToExpense:async(n,a)=>{var x;const{data:i}=await ee.from("td_quotes").select("*").eq("id",a).single();if(!i)return null;const{data:o}=await ee.from("td_couples").select("id").eq("trip_id",n);if(!o)return null;const{data:u,error:h}=await ee.from("td_expenses").insert({trip_id:n,segment_id:i.segment_id||null,category:i.category,title:i.title,vendor_id:i.vendor_id,source_quote_id:i.id,currency:i.currency,amount:i.total_amount,exchange_rate:i.exchange_rate,amount_brl:i.amount_brl,status:"confirmed",hotel_details:i.hotel_details,ticket_details:i.ticket_details,car_details:i.car_details,generic_details:i.generic_details}).select().single();if(h)throw h;const f=(x=i.participant_ids)!=null&&x.includes("ALL")?o:o.filter(v=>{var w;return(w=i.participant_ids)==null?void 0:w.includes(v.id)}),m=u.amount_brl/f.length,g=f.map(v=>({expense_id:u.id,couple_id:v.id,split_type:"equal",amount_brl:m}));return await ee.from("td_expense_splits").insert(g),await ee.from("td_quotes").update({status:"Fechada"}).eq("id",a),u},createQuoteVariation:async(n,a)=>{const{data:i}=await ee.from("td_quotes").select("*").eq("id",n).single();if(!i)return null;const{data:{user:o}}=await ee.auth.getUser(),{data:u,error:h}=await ee.from("td_quotes").insert({trip_id:i.trip_id,vendor_id:i.vendor_id,segment_id:i.segment_id,title:i.title,category:i.category,provider:i.provider,currency:i.currency,exchange_rate:i.exchange_rate,total_amount:i.total_amount,amount_brl:i.amount_brl,valid_until:i.valid_until,status:"Novo",votes:[],completeness:i.completeness,payment_terms:i.payment_terms,tags:i.tags,participant_ids:i.participant_ids,includes:i.includes,excludes:i.excludes,notes_group:i.notes_group,notes_internal:i.notes_internal,link_url:i.link_url,cancellation_policy:i.cancellation_policy,hotel_details:i.hotel_details,ticket_details:i.ticket_details,car_details:i.car_details,generic_details:i.generic_details,taxes_fees:i.taxes_fees,original_id:i.original_id||i.id,variation_label:a,created_by:o==null?void 0:o.id}).select().single();if(h)throw h;return u},bulkImportTravelers:async(n,a)=>{var f,m,g,x,v;const i=a.split(`
`).filter(w=>w.trim());let o=0;const{data:u}=await ee.from("td_couples").select("id").eq("trip_id",n).limit(1),h=(f=u==null?void 0:u[0])==null?void 0:f.id;if(!h)return 0;for(const w of i){const j=w.split(";"),_=(m=j[0])==null?void 0:m.trim(),y=((g=j[1])==null?void 0:g.trim())||"Adulto",N=((x=j[2])==null?void 0:x.trim())||h,O=(v=j[4])==null?void 0:v.trim();_&&(await ee.from("td_travelers").insert({trip_id:n,couple_id:N,full_name:_,type:y,goes_to_segments:[],is_payer:!0,phone:O||null,status:"Ativo"}),o++)}return o},getQuoteVersions:async n=>{const{data:a}=await ee.from("td_quotes").select("*").eq("id",n).single();return a?[{id:"v1",quoteId:a.id,createdAt:a.updated_at||a.created_at,createdBy:"Sistema",changes:[{label:"Valor Total",old:a.total_amount,new:a.total_amount}]}]:[]},restoreQuoteVersion:async n=>null,getVendorRequests:async n=>[],saveVendorRequest:async n=>n,saveComparison:async n=>{const{data:a,error:i}=await ee.from("td_quotes").select("id").in("id",n.quoteIds);if(i)throw i;return{...n,id:Math.random().toString(36).substr(2,9)}},saveQuoteFromWhatsApp:async(n,a)=>{var g,x;if(!a.totalAmount||a.totalAmount===0)return null;const{data:{user:i}}=await ee.auth.getUser();let o=null;if(a.vendorPhone){const{data:v}=await ee.from("td_vendors").select("id, contacts").eq("trip_id",n).eq("status","Ativo"),w=v==null?void 0:v.find(j=>{var _;return(_=j.contacts)==null?void 0:_.some(y=>y.phone===a.vendorPhone)});if(w)o=w.id;else{const{data:j}=await ee.from("td_vendors").insert({trip_id:n,name:`Fornecedor ${a.vendorPhone}`,categories:[a.category||"Diversos"],rating:3,preferred:!1,tags:["Importado WhatsApp"],risk_flags:[],status:"Ativo",contacts:[{id:"c1",name:"WhatsApp",role:"Vendas",phone:a.vendorPhone,preferredMethod:"WhatsApp",isPrimary:!0}]}).select().single();o=j==null?void 0:j.id}}const u=a.currency==="BRL"?1:a.exchangeRate||5.2,h=a.totalAmount*u,{data:f,error:m}=await ee.from("td_quotes").insert({trip_id:n,vendor_id:o,title:((g=a.suggestedQuote)==null?void 0:g.title)||`Oramento ${a.category}`,category:a.category||"Diversos",provider:((x=a.suggestedQuote)==null?void 0:x.provider)||`Fornecedor ${a.vendorPhone}`,currency:a.currency||"BRL",exchange_rate:u,total_amount:a.totalAmount,amount_brl:h,status:"Novo",votes:[],completeness:70,tags:["WhatsApp"],participant_ids:["ALL"],payment_terms:{installments:a.installments||1,installmentValue:a.installmentValue||a.totalAmount,methods:["PIX","Carto"]},notes_group:a.rawText||"",cancellation_policy:"Ver notas",created_by:i==null?void 0:i.id}).select().single();if(m)throw m;return f},generateReimbursementsForExpense:async n=>{const{data:a}=await ee.from("td_expenses").select("*, trip_id").eq("id",n).single();if(!a||a.status==="cancelled")return;const[{data:i},{data:o}]=await Promise.all([ee.from("td_expense_splits").select("*").eq("expense_id",n),ee.from("td_payments").select("*").eq("expense_id",n)]);if(!i||!o)return;const u={};i.forEach(v=>{u[v.couple_id]=(u[v.couple_id]||0)-v.amount_brl}),o.forEach(v=>{u[v.paid_by_couple_id]=(u[v.paid_by_couple_id]||0)+v.paid_amount_brl}),await ee.from("td_reimbursements").delete().eq("expense_id",n).eq("status","pending");const h=Object.entries(u).filter(([v,w])=>w>.01).map(([v,w])=>({id:v,amount:w})),f=Object.entries(u).filter(([v,w])=>w<-.01).map(([v,w])=>({id:v,amount:Math.abs(w)})),m=[];let g=0,x=0;for(;g<h.length&&x<f.length;){const v=Math.min(h[g].amount,f[x].amount);v>.01&&m.push({trip_id:a.trip_id,expense_id:n,from_couple_id:f[x].id,to_couple_id:h[g].id,amount_brl:v,status:"pending"}),h[g].amount-=v,f[x].amount-=v,h[g].amount<=.01&&g++,f[x].amount<=.01&&x++}m.length>0&&await ee.from("td_reimbursements").insert(m)}},Mv=({currentTripId:n,currentTripName:a,onTripChange:i,onCreateNew:o})=>{const[u,h]=H.useState(!1),[f,m]=H.useState([]),[g,x]=H.useState(!1),v=H.useRef(null);H.useEffect(()=>{u&&w()},[u]),H.useEffect(()=>{const y=N=>{v.current&&!v.current.contains(N.target)&&h(!1)};return u&&document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[u]);const w=async()=>{x(!0);try{const y=await Ke.getTrips();m(y.filter(N=>N.status!=="archived"))}catch(y){console.error("Erro ao carregar viagens:",y)}finally{x(!1)}},j=async y=>{try{await Ke.setActiveTrip(y),i(y),h(!1)}catch(N){console.error("Erro ao trocar viagem:",N)}},_=y=>y?new Date(y).toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}):"";return r.jsxs("div",{className:"relative",ref:v,children:[r.jsxs("button",{onClick:()=>h(!u),className:"flex items-center gap-2 px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg hover:border-indigo-600/50 transition-all",children:[r.jsx(bt.Dashboard,{className:"w-4 h-4 text-indigo-400"}),r.jsxs("div",{className:"text-left",children:[r.jsx("div",{className:"text-xs text-gray-500 font-bold uppercase",children:"Viagem Ativa"}),r.jsx("div",{className:"text-sm font-bold text-white",children:a})]}),r.jsx(bt.ChevronDown,{className:`w-4 h-4 text-gray-500 transition-transform ${u?"rotate-180":""}`})]}),u&&r.jsx("div",{className:"absolute top-full left-0 mt-2 w-80 bg-gray-900 border border-gray-800 rounded-xl shadow-2xl z-50 max-h-96 overflow-y-auto",children:g?r.jsx("div",{className:"p-4 text-center text-gray-500",children:"Carregando..."}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-2",children:[r.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase px-2 py-1",children:"Viagens"}),f.filter(y=>y.status==="active").map(y=>r.jsxs("button",{onClick:()=>j(y.id),className:`w-full text-left px-3 py-2 rounded-lg transition-all ${y.id===n?"bg-indigo-600 text-white":"hover:bg-gray-800 text-gray-300"}`,children:[r.jsx("div",{className:"font-bold text-sm",children:y.name}),r.jsxs("div",{className:"text-xs text-gray-400 mt-0.5",children:[_(y.start_date)," - ",_(y.end_date),y.destinations&&y.destinations.length>0&&r.jsxs("span",{className:"ml-2",children:[" ",y.destinations[0]]})]})]},y.id))]}),f.filter(y=>y.status==="draft").length>0&&r.jsxs("div",{className:"p-2 border-t border-gray-800",children:[r.jsx("div",{className:"text-xs font-bold text-gray-500 uppercase px-2 py-1",children:"Rascunhos"}),f.filter(y=>y.status==="draft").map(y=>r.jsx("button",{onClick:()=>j(y.id),className:"w-full text-left px-3 py-2 rounded-lg hover:bg-gray-800 text-gray-300 transition-all",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"font-bold text-sm",children:y.name||"Viagem sem nome"}),r.jsx("span",{className:"px-1.5 py-0.5 bg-yellow-600/20 text-yellow-400 text-[10px] font-bold rounded",children:"RASCUNHO"})]})},y.id))]}),r.jsx("div",{className:"p-2 border-t border-gray-800",children:r.jsxs(Z,{onClick:()=>{o(),h(!1)},className:"w-full bg-indigo-600 hover:bg-indigo-700 text-sm",children:[r.jsx(bt.Plus,{className:"w-4 h-4 mr-2"}),"Nova Viagem"]})})]})})]})},Bv=({children:n,activeTab:a,setActiveTab:i,tripId:o,tripName:u,userEmail:h,onTripChange:f,onCreateTrip:m})=>{const g=[{id:"dashboard",label:"Painel Geral",icon:bt.Dashboard},{id:"trips",label:"Viagens",icon:bt.Dashboard},{id:"travelers",label:"Viajantes",icon:bt.Travelers},{id:"vendors",label:"Fornecedores",icon:bt.Vendors},{id:"quotes",label:"Oramentos",icon:bt.Quotes},{id:"expenses",label:"Itens Fechados",icon:bt.Expenses},{id:"payments",label:"Fluxo de Caixa",icon:bt.Expenses},{id:"settlement",label:"Acerto de Contas",icon:bt.Settlement}],x=async()=>{await ee.auth.signOut(),window.location.reload()};return r.jsxs("div",{className:"flex min-h-screen bg-gray-950 text-gray-100",children:[r.jsxs("aside",{className:"w-64 bg-gray-900 border-r border-gray-800 hidden md:flex flex-col fixed h-full z-10 shadow-2xl",children:[r.jsxs("div",{className:"p-6 border-b border-gray-800 flex flex-col gap-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center font-bold italic text-white shadow-lg shadow-indigo-600/30",children:"TD"}),r.jsx("h1",{className:"text-xl font-black tracking-tight text-white uppercase",children:"TripDivide"})]}),o&&r.jsx("div",{className:"mt-2",children:r.jsx(Mv,{currentTripId:o,currentTripName:u,onTripChange:f,onCreateNew:m})})]}),r.jsx("nav",{className:"flex-1 p-4 space-y-1 overflow-y-auto",children:g.map(v=>{const w=v.icon;return r.jsxs("button",{onClick:()=>i(v.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all font-bold text-xs uppercase tracking-tight text-left ${a===v.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-600/20":"text-gray-400 hover:bg-gray-800 hover:text-gray-200"}`,children:[r.jsx(w,{className:"w-5 h-5 flex-shrink-0"}),r.jsx("span",{className:"truncate",children:v.label})]},v.id)})}),r.jsxs("div",{className:"p-4 border-t border-gray-800 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-3 p-2 bg-gray-950 rounded-xl border border-gray-800",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500/20 flex items-center justify-center text-xs font-bold text-indigo-400 border border-indigo-500/30",children:h?h[0].toUpperCase():"U"}),r.jsxs("div",{className:"flex-1 overflow-hidden",children:[r.jsx("p",{className:"text-[10px] font-bold truncate text-white uppercase",children:h||"Usurio"}),r.jsx("p",{className:"text-[9px] text-gray-500 font-black uppercase",children:"Organizador"})]})]}),r.jsx("button",{onClick:x,className:"w-full px-4 py-2 bg-red-600/10 hover:bg-red-600/20 border border-red-600/20 hover:border-red-600/30 rounded-xl text-red-400 hover:text-red-300 text-xs font-bold uppercase tracking-tight transition-all",children:"Sair"})]})]}),r.jsx("main",{className:"flex-1 md:ml-64 p-4 md:p-8",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:n})})]})};var Wt=(n=>(n.BRL="BRL",n.USD="USD",n))(Wt||{}),Vt=(n=>(n.DRAFT="Novo",n.ANALYSIS="Em anlise",n.SHORTLIST="Shortlist",n.CHOSEN="Aprovada",n.CLOSED="Fechada",n.REJECTED="Rejeitada",n))(Vt||{}),Ft=(n=>(n.PLANNED="planned",n.CONFIRMED="confirmed",n.PAID="paid",n.CANCELLED="cancelled",n))(Ft||{}),Tn=(n=>(n.EQUAL="equal",n.PERCENT="percent",n.FIXED="fixed",n.PER_PERSON="per_person",n))(Tn||{}),Oa=(n=>(n.PIX="pix",n.CREDIT_CARD="card",n.CASH="cash",n.BOLETO="boleto",n.MILES="miles",n.TRANSFER="transfer",n))(Oa||{}),yt=(n=>(n.ADULT="Adulto",n.CHILD="Criana",n.INFANT="Infante",n))(yt||{});const ze={toCents:n=>Math.round(n*100),fromCents:n=>n/100,format:n=>n.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),sanitize:n=>Math.round(n*100)/100,splitEqual:(n,a)=>{const i=ze.toCents(n),o=Math.floor(i/a),u=new Array(a).fill(o),h=i-o*a;return u[a-1]+=h,u.map(ze.fromCents)},splitByWeight:(n,a)=>{const i=ze.toCents(n),o=a.reduce((f,m)=>f+m,0);let u=0;return a.map((f,m)=>{if(m===a.length-1)return i-u;const g=Math.floor(i*f/o);return u+=g,g}).map(ze.fromCents)}},oe={...Ke,computeTravelerIssues:(n,a)=>{const i=[];return n.phone||i.push({type:"warning",message:"Sem telefone de contato"}),n.docType==="Passaporte"&&(!n.docNumber||!n.docExpiry)&&i.push({type:"error",message:"Dados de passaporte pendentes"}),i}},Jm=({trip:n,quotes:a,expenses:i,onNavigate:o,onRefresh:u})=>{const[h,f]=jn.useState(!1),[m,g]=jn.useState(""),[x,v]=jn.useState([]);jn.useEffect(()=>{(async()=>{const D=await oe.getTravelers(n.id);v(D)})()},[n.id]);const w=jn.useMemo(()=>{const O={};return x.forEach(D=>{const z=D.coupleId||"sem-grupo";O[z]||(O[z]=[]),O[z].push({id:D.id,name:D.fullName||"Sem Nome",isChild:D.type!=="Adulto"})}),O},[x]),j=x.length,_=a.reduce((O,D)=>O+(D.status===Vt.SHORTLIST||D.status===Vt.CHOSEN?D.amountBrl:0),0),y=i.reduce((O,D)=>O+(D.status===Ft.PAID?D.amountBrl:0),0),N=i.reduce((O,D)=>O+(D.status===Ft.CONFIRMED?D.amountBrl:0),0);return r.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Painel da Viagem"}),r.jsx("p",{className:"text-gray-500",children:"Logstica e fluxos financeiros consolidados"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs(_e,{color:"indigo",children:[j," Viajantes"]}),r.jsxs(_e,{color:"gray",children:[n.segments.length," Segmentos"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ce,{className:"!bg-gray-900/50",children:[r.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase mb-1",children:"Total Estimado (Favoritos)"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",ze.format(_)]})]}),r.jsxs(Ce,{className:"!bg-amber-600/5 !border-amber-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase mb-1",children:"Pendente de Pagamento"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",ze.format(N)]})]}),r.jsxs(Ce,{className:"!bg-emerald-600/5 !border-emerald-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-emerald-400 uppercase mb-1",children:"Total Efetivamente Pago"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",ze.format(y)]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("section",{className:"lg:col-span-2 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("h3",{className:"text-sm font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-indigo-500 rounded-full"}),"Casais e viajantes no grupo"]}),h?r.jsxs("div",{className:"flex gap-2 items-center",children:[r.jsx("input",{type:"text",value:m,onChange:O=>g(O.target.value),placeholder:"Nome do grupo",className:"px-3 py-1.5 bg-gray-950 border border-indigo-500 rounded-lg text-white text-xs placeholder-gray-600 focus:outline-none focus:border-indigo-400 transition-colors",autoFocus:!0,onKeyDown:async O=>{O.key==="Enter"&&m.trim()?(O.preventDefault(),await oe.saveCouple(n.id,{name:m.trim()}),f(!1),g(""),u()):O.key==="Escape"&&(f(!1),g(""))}}),r.jsx(Z,{variant:"primary",className:"text-[10px] px-3 py-1.5",disabled:!m.trim(),onClick:async()=>{m.trim()&&(await oe.saveCouple(n.id,{name:m.trim()}),f(!1),g(""),u())},children:"Criar"}),r.jsx(Z,{variant:"ghost",className:"text-[10px] px-2 py-1.5",onClick:()=>{f(!1),g("")},children:""})]}):r.jsx(Z,{variant:"ghost",className:"text-[10px]",onClick:()=>{f(!0),g("")},children:"+ Novo Grupo"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.couples.map(O=>{const D=w[O.id]||[];return r.jsxs(Ce,{className:"hover:border-gray-700 transition-all cursor-pointer group",onClick:()=>o("travelers"),children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex-1 flex items-center gap-2",children:[r.jsx("p",{className:"font-bold text-gray-100 uppercase text-sm tracking-tight",children:O.name}),r.jsx("button",{onClick:z=>{var E;z.stopPropagation();const U=(E=z.currentTarget.parentElement)==null?void 0:E.querySelector("input[data-edit-group]");U&&(U.style.display="block",U.focus(),U.select())},className:"opacity-0 group-hover:opacity-100 transition-opacity text-gray-500 hover:text-indigo-400 text-xs",children:""}),r.jsx("input",{"data-edit-group":!0,type:"text",defaultValue:O.name,style:{display:"none"},className:"px-2 py-1 bg-gray-900 border border-indigo-500 rounded text-xs text-white",onBlur:async z=>{const U=z.target.value.trim();U&&U!==O.name&&(await oe.saveCouple(n.id,{id:O.id,name:U}),u()),z.target.style.display="none"},onKeyDown:async z=>{z.key==="Enter"?z.currentTarget.blur():z.key==="Escape"&&(z.currentTarget.value=O.name,z.currentTarget.style.display="none")},onClick:z=>z.stopPropagation()})]}),r.jsxs(_e,{color:"gray",children:[D.length," PES"]})]}),r.jsx("div",{className:"space-y-1",children:D.length>0?D.map(z=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs text-gray-500",children:z.name}),z.isChild&&r.jsx(_e,{color:"yellow",className:"!text-[8px] px-1 py-0",children:"KIDS"})]},z.id)):r.jsx("p",{className:"text-xs text-gray-700 italic",children:"Nenhum viajante cadastrado."})})]},O.id)}),n.couples.length===0&&r.jsx("p",{className:"text-gray-600 italic text-sm",children:'Nenhum grupo configurado. Clique em "+ Novo Grupo" para comear.'})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsxs("h3",{className:"text-sm font-black text-gray-500 uppercase tracking-widest flex items-center gap-2",children:[r.jsx("div",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full"}),"Atalhos Rpidos"]}),r.jsxs(Ce,{className:"space-y-3",children:[r.jsx(Z,{variant:"outline",className:"w-full justify-start text-xs font-bold",onClick:()=>o("vendors"),children:" Fornecedores e Reputao"}),r.jsx(Z,{variant:"outline",className:"w-full justify-start text-xs font-bold",onClick:()=>o("quotes"),children:" Oramentos Recebidos"}),r.jsx(Z,{variant:"primary",className:"w-full justify-start text-xs font-bold",onClick:()=>o("settlement"),children:" Acerto de Contas"})]})]})]})]})},Lv=({trip:n,onRefresh:a,onNavigateToVendor:i,onNavigateToWizard:o})=>{const[u,h]=H.useState([]),[f,m]=H.useState(""),[g,x]=H.useState("all");H.useEffect(()=>{v()},[n.id]);const v=async()=>{const j=await oe.getVendors(n.id);h(j)},w=H.useMemo(()=>{const j=f.toLowerCase();return u.filter(_=>{const y=_.name||"",N=_.tags||[],O=y.toLowerCase().includes(j)||N.some(z=>z.toLowerCase().includes(j)),D=g==="all"||_.categories.includes(g);return O&&D})},[u,f,g]);return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Fornecedores"}),r.jsx("p",{className:"text-gray-500",children:"Gesto de parceiros e reputao"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>a(),children:"Atualizar"}),r.jsx(Z,{variant:"primary",onClick:o,children:"+ Novo Fornecedor"})]})]}),r.jsx(Ce,{className:"!p-4 bg-gray-900/40 border-gray-800",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(P,{placeholder:"Buscar fornecedor ou tag...",value:f,onChange:j=>m(j.target.value)})}),r.jsxs(P,{as:"select",value:g,onChange:j=>x(j.target.value),children:[r.jsx("option",{value:"all",children:"Todas as categorias"}),n.categories.map(j=>r.jsx("option",{value:j,children:j},j))]})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:w.map(j=>{const _=j.rating>=4&&j.riskFlags.length===0;return r.jsxs(Ce,{onClick:()=>i(j.id),className:"group relative cursor-pointer border-2 hover:border-indigo-500 transition-all",children:[j.preferred&&r.jsx("div",{className:"absolute top-0 right-0 w-10 h-10 bg-indigo-600 text-white flex items-center justify-center font-bold text-lg rounded-bl-2xl",children:""}),r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsxs("div",{className:"flex justify-between items-start pr-8",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-xl font-black text-white uppercase leading-tight group-hover:text-indigo-400 transition-colors",children:j.name}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:j.categories.map(y=>r.jsx("span",{className:"text-[9px] font-black uppercase text-indigo-400",children:y},y))})]}),_&&r.jsx(_e,{color:"green",children:"OK"})]}),r.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(y=>r.jsx("span",{className:`text-xs ${j.rating>=y?"text-amber-400":"text-gray-800"}`,children:""},y))}),r.jsxs("div",{className:"pt-4 border-t border-gray-800 flex justify-between items-center",children:[r.jsxs("span",{className:"text-[10px] text-gray-600 font-bold uppercase",children:["SLA: ",j.slaNotes||"N/D"]}),r.jsx(Z,{variant:"ghost",className:"text-[10px] py-1 h-6",onClick:y=>{y.stopPropagation(),i(j.id)},children:"Ver Detalhes"})]})]})]},j.id)})})]})},$v=n=>n.replace(/[\u200B-\u200D\uFEFF]/g,"").replace(/[]/g,'"').replace(/(\d+)\s*[xX]/g,"$1x").replace(/R\$\s*/g,"R$").replace(/U\$S?\s*/g,"U$"),qv=n=>{const a=/R\$([\d.,]+)/gi,i=/U\$([\d.,]+)/gi,o=f=>{const m=f.replace(/\./g,"").replace(",",".");return parseFloat(m)},u=[...n.matchAll(a)].map(f=>o(f[1])),h=[...n.matchAll(i)].map(f=>o(f[1]));return{brl:u,usd:h}},Zm=(n,a)=>{const o=n.split(`
`).map(N=>N.trim()).filter(Boolean)[0]||"Oramento sem ttulo";let u="Diversos";const h=n.toLowerCase();/ticket|park|disney|universal|seaworld|ingress|parque/i.test(h)?u="Parques Temticos":/pickup|dropoff|diria|locao|carro|van|mini van|alamo|hertz/i.test(h)?u="Aluguel de Carro":/hotel|hospedagem|quarto|stay/i.test(h)&&(u="Hospedagem");const f=qv(n),m=f.usd.length>f.brl.length?Wt.USD:Wt.BRL,g=m===Wt.USD?f.usd:f.brl,x=g.length>0?Math.max(...g):0;let v=1;const w=n.match(/(\d+)x/i);w&&(v=parseInt(w[1]));const j=[];x===0&&j.push("Preo total"),u==="Diversos"&&j.push("Categoria precisa");let _="alta";j.length>0&&(_="mdia"),x===0&&(_="baixa");const y=m===Wt.BRL?1:5.2;return{id:Math.random().toString(36).substr(2,9),rawText:n,vendorPhone:a,vendorName:a,title:o.length>50?o.substring(0,50)+"...":o,category:u,currency:m,totalAmount:x,installments:v,installmentValue:x/v,confidence:_,missingFields:j,suggestedQuote:{title:o,category:u,currency:m,totalAmount:x,exchangeRate:y,amountBrl:x*y,validUntil:new Date(Date.now()+7*864e5).toISOString().split("T")[0],status:Vt.ANALYSIS,notesInternal:`Importado do WhatsApp
---
${n}`,paymentTerms:{methods:[v>1?Oa.CREDIT_CARD:Oa.PIX],installments:v,installmentValue:x*y/v}}}},Vv=(n,a)=>{const i=$v(n),o=/(?:\[?(\d{2}\/\d{2}\/\d{2,4}),?\s+(\d{2}:\d{2})(?::\d{2})?\]?)\s*(?:-\s*)?([^:]+):\s*/g,u=[];let h=0,f;for(;(f=o.exec(i))!==null;)u.length>0&&(u[u.length-1].content=i.substring(h,f.index).trim()),u.push({author:f[3].trim(),content:""}),h=o.lastIndex;u.length>0&&(u[u.length-1].content=i.substring(h).trim());const m=u.filter(w=>!(a.myNames.some(_=>w.author.includes(_))||a.myPhones.some(_=>w.author.includes(_))||(w.content.toLowerCase(),w.content.length<10&&!/R\$|U\$|\d/.test(w.content)))),g=[];let x="",v="";return m.forEach(w=>{const j=/R\$|U\$|Valor|Preo/i.test(w.content);/Aluguel|Carro|Ingresso|Ticket|Hospedagem/i.test(w.content),x&&(w.author!==v||j&&x.length>100)&&(g.push(Zm(x,v)),x=""),v=w.author,x+=(x?`
`:"")+w.content}),x&&g.push(Zm(x,v)),g},Hv=({trip:n,onImport:a,onClose:i,onEditBlock:o})=>{const[u,h]=H.useState(1),[f,m]=H.useState(""),[g,x]=H.useState([]),[v,w]=H.useState([]),[j,_]=H.useState({myName:"Daniel Manske",ignoreUser:!0}),y=()=>{if(!f.trim())return;const D=Vv(f,{myNames:[j.myName],myPhones:[]});x(D),w(D.filter(z=>z.confidence!=="baixa").map(z=>z.id)),h(2)},N=D=>{w(z=>z.includes(D)?z.filter(U=>U!==D):[...z,D])},O=()=>{const D=g.filter(z=>v.includes(z.id));a(D)};return r.jsx("div",{className:"space-y-6",children:u===1?r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-xl",children:[r.jsx("h4",{className:"text-sm font-bold text-indigo-400 uppercase mb-2",children:"Como Funciona"}),r.jsxs("ul",{className:"text-xs text-gray-400 space-y-1 list-disc ml-4",children:[r.jsx("li",{children:"Exporte a conversa do WhatsApp (sem mdia)."}),r.jsx("li",{children:"Cole o texto bruto abaixo."}),r.jsx("li",{children:"O sistema ignorar suas mensagens e extrair preos e datas automaticamente."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(P,{label:"Meu Nome no WhatsApp",value:j.myName,onChange:D=>_({...j,myName:D.target.value}),placeholder:"Ex: Daniel Manske"}),r.jsx("div",{className:"flex items-center gap-3 h-full pt-6",children:r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",className:"accent-indigo-500",checked:j.ignoreUser,onChange:D=>_({...j,ignoreUser:D.target.checked})}),r.jsx("span",{className:"text-xs font-bold text-gray-400 uppercase",children:"Filtrar minhas mensagens"})]})})]}),r.jsx(P,{as:"textarea",label:"Contedo da Conversa",rows:12,value:f,onChange:D=>m(D.target.value),placeholder:"[09:11, 21/01/2026] Fornecedor: Oramento SeaWorld...",className:"font-mono text-[10px]"}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800",children:[r.jsx(Z,{variant:"ghost",onClick:i,children:"Cancelar"}),r.jsx(Z,{variant:"primary",onClick:y,disabled:!f.trim(),children:"Analisar Texto "})]})]}):r.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("header",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-lg font-black text-white",children:[g.length," Oramentos Detectados"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Selecione quais deseja criar na viagem"})]}),r.jsx(Z,{variant:"ghost",className:"text-xs",onClick:()=>h(1),children:" Voltar e Ajustar"})]}),r.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto pr-2 custom-scrollbar",children:g.map(D=>r.jsxs(Ce,{className:`!p-4 border-2 transition-all cursor-pointer ${v.includes(D.id)?"border-indigo-500 bg-indigo-500/5":"border-gray-800 opacity-60"}`,onClick:()=>N(D.id),children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",checked:v.includes(D.id),onChange:()=>{},className:"w-5 h-5 accent-indigo-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase",children:D.category}),r.jsx("h4",{className:"font-bold text-gray-100",children:D.title})]})]}),r.jsxs(_e,{color:D.confidence==="alta"?"green":D.confidence==="mdia"?"yellow":"red",children:["Confiana ",D.confidence]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 bg-gray-950 p-3 rounded-lg border border-gray-800",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase",children:"Valor"}),r.jsxs("p",{className:"text-sm font-black text-indigo-400",children:[D.currency," ",D.totalAmount.toLocaleString("pt-BR")]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[9px] font-black text-gray-600 uppercase",children:"Pagamento"}),r.jsxs("p",{className:"text-sm font-bold text-gray-300",children:[D.installments,"x de R$ ",D.installmentValue.toLocaleString("pt-BR")]})]}),r.jsx("div",{className:"text-right",children:r.jsx(Z,{variant:"ghost",className:"text-[9px] py-1 px-2 h-7",onClick:z=>{z.stopPropagation(),o(D)},children:"Editar"})})]}),D.missingFields.length>0&&r.jsxs("p",{className:"text-[9px] text-red-400 mt-2 font-bold uppercase",children:[" Faltando: ",D.missingFields.join(", ")]})]},D.id))}),r.jsxs("div",{className:"flex justify-between items-center pt-6 border-t border-gray-800",children:[r.jsxs("p",{className:"text-xs text-gray-500 font-bold",children:[v.length," selecionados para importao"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",onClick:i,children:"Cancelar"}),r.jsx(Z,{variant:"primary",onClick:O,disabled:v.length===0,children:"Criar Selecionados "})]})]})]})})},Iv=({trip:n,vendors:a,quotes:i,onRefresh:o,onNavigateToQuote:u,onNavigateToWizard:h,onNavigateToCompare:f})=>{const[m,g]=H.useState(!1),[x,v]=H.useState([]),[w,j]=H.useState(!1),[_,y]=H.useState(!1),[N,O]=H.useState({category:"all",status:"all",vendor:"all"}),D=i.filter(E=>(N.category==="all"||E.category===N.category)&&(N.status==="all"||E.status===N.status)&&(N.vendor==="all"||E.vendorId===N.vendor)),z=async E=>{for(const G of E)await oe.saveQuoteFromWhatsApp(n.id,G);j(!1),o(),alert(`${E.length} oramentos importados!`)},U=(E,G)=>{if(E.stopPropagation(),x.includes(G))v(W=>W.filter(K=>K!==G));else{if(x.length>=5)return alert("Mximo de 5 oramentos para comparar.");v(W=>[...W,G])}};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 relative",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Oramentos"}),r.jsx("p",{className:"text-gray-500",children:"Compare fornecedores e prepare a votao"})]}),r.jsxs("div",{className:"flex gap-2 relative",children:[r.jsx(Z,{variant:m?"primary":"outline",onClick:()=>{g(!m),v([])},children:m?"Sair Comparador":"Modo Comparar"}),r.jsxs("div",{className:"relative group",children:[r.jsx(Z,{variant:"primary",onClick:()=>y(!_),children:"+ Nova Opo "}),_&&r.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 bg-gray-900 border border-gray-800 rounded-xl shadow-2xl z-50 overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsx("button",{onClick:()=>{y(!1),h()},className:"w-full text-left px-4 py-3 text-xs font-bold text-gray-300 hover:bg-gray-800 hover:text-white border-b border-gray-800 transition-colors",children:" Lanamento Manual"}),r.jsx("button",{onClick:()=>{y(!1),j(!0)},className:"w-full text-left px-4 py-3 text-xs font-bold text-gray-300 hover:bg-gray-800 hover:text-white transition-colors",children:" Importar do WhatsApp"})]})]})]})]}),r.jsx(Ce,{className:"!p-4 bg-gray-900/40 border-gray-800",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs(P,{as:"select",label:"Categoria",value:N.category,onChange:E=>O({...N,category:E.target.value}),children:[r.jsx("option",{value:"all",children:"Todas"}),n.categories.map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsxs(P,{as:"select",label:"Status",value:N.status,onChange:E=>O({...N,status:E.target.value}),children:[r.jsx("option",{value:"all",children:"Todos"}),Object.values(Vt).map(E=>r.jsx("option",{value:E,children:E},E))]}),r.jsxs(P,{as:"select",label:"Fornecedor",value:N.vendor,onChange:E=>O({...N,vendor:E.target.value}),children:[r.jsx("option",{value:"all",children:"Todos"}),a.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]}),r.jsx("div",{className:"flex items-end",children:r.jsx(Z,{variant:"ghost",className:"w-full text-xs",onClick:()=>O({category:"all",status:"all",vendor:"all"}),children:"Limpar"})})]})}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-20",children:D.map(E=>{const G=x.includes(E.id);return r.jsxs(Ce,{className:`group transition-all cursor-pointer flex flex-col border-2 ${G?"border-indigo-500 bg-indigo-500/5":"border-gray-800 hover:border-gray-700"}`,onClick:W=>m?U(W,E.id):u(E.id),children:[r.jsxs("div",{className:"flex justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[m&&r.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-500 rounded cursor-pointer",checked:G,onChange:W=>U(W,E.id),onClick:W=>W.stopPropagation()}),r.jsx(_e,{color:"indigo",children:E.category})]}),r.jsx(_e,{color:E.status===Vt.CHOSEN?"green":"gray",children:E.status})]}),r.jsx("h3",{className:"text-xl font-black text-white mb-1 leading-tight uppercase group-hover:text-indigo-400 transition-colors",children:E.title}),r.jsx("p",{className:"text-xs text-gray-600 font-bold mb-4",children:E.provider}),r.jsxs("div",{className:"mt-auto bg-gray-950 p-4 rounded-xl border border-gray-800 mb-4 group-hover:bg-indigo-600/5 transition-colors",children:[r.jsxs("p",{className:"text-2xl font-black text-indigo-400",children:["R$ ",E.amountBrl.toLocaleString("pt-BR")]}),r.jsx("p",{className:"text-[10px] text-gray-700 uppercase font-black",children:"Total Calculado"})]})]},E.id)})}),r.jsx(ia,{isOpen:w,onClose:()=>j(!1),title:"Importar do WhatsApp",children:r.jsx(Hv,{trip:n,onClose:()=>j(!1),onImport:z,onEditBlock:E=>{j(!1),h(E.suggestedQuote)}})}),m&&x.length>0&&r.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 z-50 animate-in slide-in-from-bottom-10 duration-500",children:r.jsxs("div",{className:"bg-gray-900 border-2 border-indigo-500 rounded-2xl shadow-2xl p-4 flex items-center gap-6 backdrop-blur-md",children:[r.jsxs("div",{className:"flex flex-col",children:[r.jsxs("p",{className:"text-white font-black text-sm uppercase",children:[x.length," Selecionadas"]}),r.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase tracking-widest",children:"Limite de 5 itens"})]}),r.jsx("div",{className:"h-10 w-px bg-gray-800"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",onClick:()=>v([]),children:"Limpar"}),r.jsx(Z,{variant:"primary",disabled:x.length<2,onClick:()=>f(x),children:"Comparar Agora "})]})]})})]})},Gv=({trip:n,expenses:a,onRefresh:i,onNavigateToExpense:o})=>{const[u,h]=H.useState({segment:"all",category:"all",status:"all",search:""}),f=H.useMemo(()=>{const g=a.filter(w=>w.status!==Ft.CANCELLED).reduce((w,j)=>w+j.amountBrl,0),x=a.filter(w=>w.status===Ft.CONFIRMED).reduce((w,j)=>w+j.amountBrl,0),v=a.filter(w=>w.status===Ft.PAID).reduce((w,j)=>w+j.amountBrl,0);return{total:g,confirmed:x,paid:v}},[a]),m=H.useMemo(()=>a.filter(g=>{const x=g.title.toLowerCase().includes(u.search.toLowerCase())||g.category.toLowerCase().includes(u.search.toLowerCase()),v=u.segment==="all"||g.segmentId===u.segment,w=u.category==="all"||g.category===u.category,j=u.status==="all"||g.status===u.status;return x&&v&&w&&j}).sort((g,x)=>x.createdAt.localeCompare(g.createdAt)),[a,u]);return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Itens Fechados"}),r.jsx("p",{className:"text-gray-500",children:"Gesto de despesas oficiais e racha"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"outline",onClick:i,children:"Sincronizar"}),r.jsx(Z,{variant:"primary",children:"Exportar PDF"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsxs(Ce,{className:"!bg-indigo-600/5 !border-indigo-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase mb-1",children:"Total Fechado"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",f.total.toLocaleString("pt-BR")]})]}),r.jsxs(Ce,{className:"!bg-amber-600/5 !border-amber-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-amber-400 uppercase mb-1",children:"Total Confirmado (Pendente)"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",f.confirmed.toLocaleString("pt-BR")]})]}),r.jsxs(Ce,{className:"!bg-emerald-600/5 !border-emerald-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-emerald-400 uppercase mb-1",children:"Total Efetivamente Pago"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",f.paid.toLocaleString("pt-BR")]})]})]}),r.jsx(Ce,{className:"!p-4 bg-gray-900/40 border-gray-800",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsx(P,{placeholder:"Buscar por ttulo ou categoria...",value:u.search,onChange:g=>h({...u,search:g.target.value})}),r.jsxs(P,{as:"select",value:u.segment,onChange:g=>h({...u,segment:g.target.value}),children:[r.jsx("option",{value:"all",children:"Todos os Segmentos"}),n.segments.map(g=>r.jsx("option",{value:g.id,children:g.name},g.id))]}),r.jsxs(P,{as:"select",value:u.category,onChange:g=>h({...u,category:g.target.value}),children:[r.jsx("option",{value:"all",children:"Todas Categorias"}),n.categories.map(g=>r.jsx("option",{value:g,children:g},g))]}),r.jsxs(P,{as:"select",value:u.status,onChange:g=>h({...u,status:g.target.value}),children:[r.jsx("option",{value:"all",children:"Todos Status"}),r.jsx("option",{value:Ft.CONFIRMED,children:"Confirmado"}),r.jsx("option",{value:Ft.PAID,children:"Pago"}),r.jsx("option",{value:Ft.PLANNED,children:"Planejado"})]})]})}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-800",children:r.jsxs("table",{className:"w-full text-left border-collapse bg-gray-900",children:[r.jsx("thead",{className:"bg-gray-950 text-[10px] font-black uppercase text-gray-500 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Ttulo / Segmento"}),r.jsx("th",{className:"p-4",children:"Categoria"}),r.jsx("th",{className:"p-4",children:"Valor Total"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4 text-right",children:"Ao"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-800",children:[m.map(g=>{var x;return r.jsxs("tr",{className:"hover:bg-gray-800/40 transition-colors cursor-pointer group",onClick:()=>o(g.id),children:[r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-bold text-gray-100 group-hover:text-indigo-400 transition-colors",children:g.title}),r.jsx("div",{className:"text-[10px] text-gray-500 uppercase font-black",children:((x=n.segments.find(v=>v.id===g.segmentId))==null?void 0:x.name)||"Geral"})]}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:"indigo",children:g.category})}),r.jsxs("td",{className:"p-4",children:[r.jsxs("div",{className:"font-black text-white",children:["R$ ",g.amountBrl.toLocaleString("pt-BR")]}),r.jsxs("div",{className:"text-[10px] text-gray-600",children:[g.currency," ",g.amount.toLocaleString()," (",g.exchangeRate,")"]})]}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:g.status===Ft.PAID?"green":g.status===Ft.CONFIRMED?"yellow":"gray",children:g.status.toUpperCase()})}),r.jsx("td",{className:"p-4 text-right",children:r.jsx(Z,{variant:"ghost",className:"text-[10px] py-1 opacity-0 group-hover:opacity-100 transition-opacity",children:"Ver Detalhes"})})]},g.id)}),m.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-20 text-center text-gray-600 italic",children:"Nenhuma despesa oficial encontrada com estes filtros."})})]})]})})]})},pg=n=>{if(!n)return"";const a=n.replace(/\D/g,"");return a.length===11?a.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):a.length===10?a.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3"):a.length===13&&a.startsWith("55")?a.replace(/(\d{2})(\d{2})(\d{5})(\d{4})/,"+$1 ($2) $3-$4"):n},Pv=n=>n.replace(/\D/g,""),Yv=n=>{if(!n)return"";const a=typeof n=="string"?new Date(n):n;if(isNaN(a.getTime()))return"";const i=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear();return`${i}/${o}/${u}`},Kv=n=>{if(!n)return"";const a=typeof n=="string"?new Date(n):n;if(isNaN(a.getTime()))return"";const i=String(a.getDate()).padStart(2,"0"),o=String(a.getMonth()+1).padStart(2,"0"),u=a.getFullYear(),h=String(a.getHours()).padStart(2,"0"),f=String(a.getMinutes()).padStart(2,"0");return`${i}/${o}/${u} ${h}:${f}`},nt=n=>{if(!n)return"";if(typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n))return n;if(typeof n=="string"){const h=n.split("T")[0].split("-");if(h.length===3)return`${h[0]}-${h[1].padStart(2,"0")}-${h[2].padStart(2,"0")}`}const a=typeof n=="string"?new Date(n):n;if(isNaN(a.getTime()))return"";const i=a.getFullYear(),o=String(a.getMonth()+1).padStart(2,"0"),u=String(a.getDate()).padStart(2,"0");return`${i}-${o}-${u}`},yg=n=>{if(!n)return null;if(typeof n=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(n)){const[i,o,u]=n.split("-").map(Number);return new Date(i,o-1,u)}const a=new Date(n);return isNaN(a.getTime())?null:a},mu=n=>{const a=yg(n);return a?Yv(a):""},lu=n=>{const a=yg(n);return a?Kv(a):""},Qv=({trip:n,expense:a,onBack:i,onRefresh:o})=>{var U;const[u,h]=H.useState("summary"),[f,m]=H.useState([]),[g,x]=H.useState([]),[v,w]=H.useState([]),[j,_]=H.useState(!1);H.useEffect(()=>{y()},[a.id]);const y=async()=>{const[E,G,W]=await Promise.all([oe.getExpenseSplits(a.id),oe.getPaymentsByExpense(a.id),oe.getReimbursements(n.id)]);m(E),x(G),w(W.filter(K=>K.expenseId===a.id))},N=H.useMemo(()=>g.reduce((E,G)=>E+G.paidAmountBrl,0),[g]),O=Math.min(100,Math.round(N/a.amountBrl*100)),D=async E=>{E.preventDefault();const G=new FormData(E.currentTarget),W=Number(G.get("amount"));await oe.savePayment({id:"",tripId:n.id,expenseId:a.id,paidByCoupleId:G.get("coupleId"),method:G.get("method"),paidAmountBrl:W,paidAt:new Date().toISOString()}),_(!1),o(),y()},z=async E=>{let G=[];if(E===Tn.EQUAL){const W=ze.splitEqual(a.amountBrl,n.couples.length);G=n.couples.map((K,R)=>({id:Math.random().toString(36).substr(2,9),expenseId:a.id,coupleId:K.id,splitType:E,amountBrl:W[R]}))}else if(E===Tn.PER_PERSON){const W=n.couples.map(R=>R.members.length),K=ze.splitByWeight(a.amountBrl,W);G=n.couples.map((R,ae)=>({id:Math.random().toString(36).substr(2,9),expenseId:a.id,coupleId:R.id,splitType:E,amountBrl:K[ae],value:R.members.length}))}G.length>0&&(await oe.updateExpenseSplits(a.id,G),y())};return r.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between gap-4",children:[r.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-400 hover:text-white group",children:[r.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Lista de Fechados"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>_(!0),children:"+ Adicionar Pagamento"}),r.jsx(Z,{variant:"primary",onClick:()=>h("split"),children:"Ajustar Racha"})]})]}),r.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-6 border-b border-gray-800",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{color:"indigo",children:a.category}),r.jsx(_e,{color:a.status===Ft.PAID?"green":"yellow",children:a.status.toUpperCase()})]}),r.jsx("h1",{className:"text-4xl font-black text-white uppercase tracking-tighter leading-none",children:a.title}),r.jsxs("p",{className:"text-lg text-gray-500 font-medium",children:["Segmento: ",((U=n.segments.find(E=>E.id===a.segmentId))==null?void 0:U.name)||"Geral"]})]}),r.jsxs("div",{className:"text-right space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-4 justify-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase",children:"Pago"}),r.jsxs("p",{className:"text-lg font-black text-emerald-400",children:["R$ ",ze.format(N)]})]}),r.jsx("div",{className:"w-px h-8 bg-gray-800"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase",children:"Total Geral"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",ze.format(a.amountBrl)]})]})]}),r.jsx("div",{className:"w-full bg-gray-800 h-2 rounded-full overflow-hidden",children:r.jsx("div",{className:"bg-emerald-500 h-full transition-all duration-1000",style:{width:`${O}%`}})})]})]}),r.jsx("div",{className:"flex border-b border-gray-800 overflow-x-auto",children:["summary","split","payments","reimbursements"].map(E=>r.jsx("button",{onClick:()=>h(E),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${u===E?"text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5":"text-gray-500 hover:text-gray-300"}`,children:E==="summary"?"Resumo":E==="split"?"Diviso (Racha)":E==="payments"?"Pagamentos":"Reembolsos Automticos"},E))}),r.jsxs("div",{className:"min-h-[400px]",children:[u==="summary"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 animate-in fade-in duration-300",children:[r.jsxs(Ce,{title:"Dados Tcnicos",children:[a.hotelDetails&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("p",{className:"text-xs text-gray-400",children:["Hotel: ",a.hotelDetails.roomType||"Standard"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-black",children:"Check-in"}),r.jsx("p",{className:"text-sm font-bold text-gray-200",children:a.hotelDetails.checkin})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-black",children:"Check-out"}),r.jsx("p",{className:"text-sm font-bold text-gray-200",children:a.hotelDetails.checkout})]})]})]}),!a.hotelDetails&&r.jsx("p",{className:"text-gray-600 italic",children:"Nenhum detalhe tcnico especfico disponvel."})]}),r.jsx(Ce,{title:"Notas e Observaes",children:r.jsx("p",{className:"text-sm text-gray-400 leading-relaxed",children:a.notesGroup||"Sem notas adicionais para o grupo."})})]}),u==="split"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Como este custo  dividido?"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",className:"text-[10px]",onClick:()=>z(Tn.EQUAL),children:"Igualitrio"}),r.jsx(Z,{variant:"ghost",className:"text-[10px]",onClick:()=>z(Tn.PER_PERSON),children:"Por Pessoa"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:f.map(E=>{const G=n.couples.find(W=>W.id===E.coupleId);return r.jsxs(Ce,{className:"text-center group border-2 hover:border-indigo-500 transition-all",children:[r.jsx("p",{className:"text-[10px] text-gray-500 uppercase font-black mb-1",children:G==null?void 0:G.name}),r.jsxs("p",{className:"text-2xl font-black text-white",children:["R$ ",ze.format(E.amountBrl)]}),r.jsx(_e,{color:"indigo",className:"mt-2",children:E.splitType===Tn.EQUAL?"Igual":`${E.value} Pessoas`})]},E.id)})})]}),u==="payments"&&r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Histrico de Pagamentos Efetuados"}),r.jsx(Z,{variant:"primary",onClick:()=>_(!0),children:"+ Novo Pagamento"})]}),r.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-800",children:r.jsxs("table",{className:"w-full text-left bg-gray-900",children:[r.jsx("thead",{className:"bg-gray-950 text-[10px] uppercase font-black text-gray-600 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Data"}),r.jsx("th",{className:"p-4",children:"Quem Pagou"}),r.jsx("th",{className:"p-4",children:"Mtodo"}),r.jsx("th",{className:"p-4 text-right",children:"Valor Pago"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:g.map(E=>{var G;return r.jsxs("tr",{className:"text-sm",children:[r.jsx("td",{className:"p-4 text-gray-400",children:mu(E.paidAt)}),r.jsx("td",{className:"p-4 text-white font-bold",children:(G=n.couples.find(W=>W.id===E.paidByCoupleId))==null?void 0:G.name}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:"indigo",children:E.method.toUpperCase()})}),r.jsxs("td",{className:"p-4 text-right font-black text-emerald-400",children:["R$ ",ze.format(E.paidAmountBrl)]})]},E.id)})})]})})]}),u==="reimbursements"&&r.jsx("div",{className:"space-y-4 animate-in fade-in duration-300",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(E=>{var G,W;return r.jsxs(Ce,{className:`flex items-center justify-between !p-4 border-2 ${E.status==="paid"?"opacity-40 border-gray-800":"border-indigo-500/30"}`,children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-white",children:(G=n.couples.find(K=>K.id===E.fromCoupleId))==null?void 0:G.name}),r.jsx("span",{className:"text-[10px] text-gray-600 font-black uppercase",children:"deve para"}),r.jsx("span",{className:"text-sm font-bold text-indigo-400",children:(W=n.couples.find(K=>K.id===E.toCoupleId))==null?void 0:W.name})]}),r.jsxs("p",{className:"text-lg font-black text-white mt-1",children:["R$ ",ze.format(E.amountBrl)]})]}),r.jsx("div",{className:"flex gap-2",children:E.status==="pending"?r.jsx(Z,{variant:"primary",className:"text-[10px] py-1",onClick:async()=>{await oe.markReimbursementAsPaid(E.id),y()},children:"Marcar Pago"}):r.jsx(_e,{color:"green",children:"LIQUIDADO"})})]},E.id)})})})]}),r.jsx(ia,{isOpen:j,onClose:()=>_(!1),title:"Registrar Pagamento",children:r.jsxs("form",{onSubmit:D,className:"space-y-4",children:[r.jsx(P,{as:"select",label:"Quem pagou?",name:"coupleId",required:!0,children:n.couples.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(P,{as:"select",label:"Mtodo",name:"method",required:!0,children:[r.jsx("option",{value:Oa.PIX,children:"PIX"}),r.jsx("option",{value:Oa.CREDIT_CARD,children:"Carto"}),r.jsx("option",{value:Oa.CASH,children:"Espcie"})]}),r.jsx(P,{label:"Valor (R$)",name:"amount",type:"number",step:"0.01",defaultValue:a.amountBrl,required:!0})]}),r.jsx("div",{className:"pt-4 flex justify-end gap-3 border-t border-gray-800",children:r.jsx(Z,{variant:"primary",type:"submit",children:"Confirmar"})})]})})]})},Xv=({trip:n})=>{const[a,i]=H.useState([]),[o,u]=H.useState([]),[h,f]=H.useState("all");H.useEffect(()=>{m()},[n.id]);const m=async()=>{const[v,w]=await Promise.all([oe.getPaymentsByTrip(n.id),oe.getExpenses(n.id)]);i(v),u(w)},g=H.useMemo(()=>a.filter(v=>h==="all"||v.paidByCoupleId===h).sort((v,w)=>w.paidAt.localeCompare(v.paidAt)),[a,h]),x=H.useMemo(()=>g.reduce((v,w)=>v+w.paidAmountBrl,0),[g]);return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Fluxo de Caixa"}),r.jsx("p",{className:"text-gray-500",children:"Todos os pagamentos realizados na viagem"})]}),r.jsxs(Ce,{className:"!p-3 !bg-indigo-600/10 border-indigo-500/20",children:[r.jsx("p",{className:"text-[10px] font-black text-indigo-400 uppercase",children:"Total Desembolsado"}),r.jsxs("p",{className:"text-2xl font-black text-white",children:["R$ ",x.toLocaleString("pt-BR")]})]})]}),r.jsx(Ce,{className:"!p-4 bg-gray-900/40 border-gray-800",children:r.jsxs("div",{className:"flex gap-4 items-end",children:[r.jsxs(P,{as:"select",label:"Filtrar por Pagador",value:h,onChange:v=>f(v.target.value),className:"max-w-xs",children:[r.jsx("option",{value:"all",children:"Todos os Casais"}),n.couples.map(v=>r.jsx("option",{value:v.id,children:v.name},v.id))]}),r.jsx(Z,{variant:"ghost",className:"text-xs",onClick:()=>f("all"),children:"Limpar Filtros"})]})}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-800",children:r.jsxs("table",{className:"w-full text-left bg-gray-900",children:[r.jsx("thead",{className:"bg-gray-950 text-[10px] font-black uppercase text-gray-500 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Data"}),r.jsx("th",{className:"p-4",children:"Quem Pagou"}),r.jsx("th",{className:"p-4",children:"Despesa Vinculada"}),r.jsx("th",{className:"p-4",children:"Mtodo"}),r.jsx("th",{className:"p-4 text-right",children:"Valor BRL"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-800",children:[g.map(v=>{const w=o.find(_=>_.id===v.expenseId),j=n.couples.find(_=>_.id===v.paidByCoupleId);return r.jsxs("tr",{className:"hover:bg-gray-800/20 transition-colors",children:[r.jsx("td",{className:"p-4 text-gray-400 text-sm",children:mu(v.paidAt)}),r.jsx("td",{className:"p-4 font-bold text-gray-200 text-sm",children:j==null?void 0:j.name}),r.jsx("td",{className:"p-4 text-gray-400 text-sm",children:(w==null?void 0:w.title)||"Avulso"}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:"indigo",children:v.method.toUpperCase()})}),r.jsxs("td",{className:"p-4 text-right font-black text-emerald-400",children:["R$ ",v.paidAmountBrl.toLocaleString("pt-BR")]})]},v.id)}),g.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-20 text-center text-gray-600 italic",children:"Nenhum pagamento registrado."})})]})]})})]})},Jv=({trip:n})=>{const[a,i]=H.useState([]),[o,u]=H.useState([]),[h,f]=H.useState([]),[m,g]=H.useState([]);H.useEffect(()=>{x()},[n.id]);const x=async()=>{const[j,_,y,N]=await Promise.all([oe.getExpenses(n.id),oe.getReimbursements(n.id),oe.getPaymentsByTrip(n.id),oe.getExpenseSplitsByTrip(n.id)]);i(j),u(_),f(y),g(N)},v=H.useMemo(()=>{const j={};n.couples.forEach(y=>j[y.id]={share:0,paid:0}),h.forEach(y=>{j[y.paidByCoupleId]&&(j[y.paidByCoupleId].paid+=ze.toCents(y.paidAmountBrl))}),m.forEach(y=>{j[y.coupleId]&&(j[y.coupleId].share+=ze.toCents(y.amountBrl))}),o.filter(y=>y.status==="paid").forEach(y=>{const N=ze.toCents(y.amountBrl);j[y.fromCoupleId]&&(j[y.fromCoupleId].paid+=N),j[y.toCoupleId]&&(j[y.toCoupleId].paid-=N)});const _={};return Object.keys(j).forEach(y=>{_[y]={share:ze.fromCents(j[y].share),paid:ze.fromCents(j[y].paid),net:ze.fromCents(j[y].paid-j[y].share)}}),_},[m,h,o,n.couples]),w=H.useMemo(()=>{const j=Object.keys(v).filter(D=>v[D].net<-.009).map(D=>({id:D,cents:Math.abs(ze.toCents(v[D].net))})),_=Object.keys(v).filter(D=>v[D].net>.009).map(D=>({id:D,cents:ze.toCents(v[D].net)})),y=[];let N=0,O=0;for(;N<j.length&&O<_.length;){const D=Math.min(j[N].cents,_[O].cents);D>0&&y.push({from:j[N].id,to:_[O].id,amount:ze.fromCents(D)}),j[N].cents-=D,_[O].cents-=D,j[N].cents<=0&&N++,_[O].cents<=0&&O++}return y},[v]);return r.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[r.jsxs("header",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter leading-none",children:"Acerto de Contas"}),r.jsx("p",{className:"text-gray-500 mt-2",children:"Saldo consolidado baseado nos rachas definidos em cada item"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:n.couples.map(j=>{const _=v[j.id],y=_.net>.009,N=_.net<-.009;return r.jsxs(Ce,{className:`border-2 transition-all ${y?"border-emerald-500/30 bg-emerald-500/5":N?"border-red-500/30 bg-red-500/5":"border-gray-800"}`,children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase tracking-widest",children:j.name}),r.jsxs("div",{className:"mt-4 flex justify-between items-end",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] text-gray-600 uppercase font-black",children:"Saldo Lquido"}),r.jsxs("p",{className:`text-3xl font-black ${y?"text-emerald-400":N?"text-red-400":"text-gray-400"}`,children:[y?"+":""," R$ ",ze.format(_.net)]})]}),r.jsx(_e,{color:y?"green":N?"red":"gray",children:y?"A RECEBER":N?"DEVEDOR":"QUITE"})]}),r.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-800/30 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[r.jsx("span",{children:"Sua cota total nos rachas:"}),r.jsxs("span",{children:["R$ ",ze.format(_.share)]})]}),r.jsxs("div",{className:"flex justify-between text-[10px] text-gray-600",children:[r.jsx("span",{children:"Total desembolsado por voc:"}),r.jsxs("span",{children:["R$ ",ze.format(_.paid)]})]})]})]},j.id)})}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Transferncias Recomendadas (Para Liquidar Viagem)"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[w.map((j,_)=>{var y,N;return r.jsxs(Ce,{className:"flex items-center justify-between !p-4 !bg-gray-950 border border-indigo-500/20 shadow-xl",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm font-bold text-gray-200",children:(y=n.couples.find(O=>O.id===j.from))==null?void 0:y.name}),r.jsx("div",{className:"flex-1 h-px bg-gray-800 border-dashed border-b mx-2"}),r.jsx("span",{className:"text-sm font-bold text-indigo-400",children:(N=n.couples.find(O=>O.id===j.to))==null?void 0:N.name})]}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("p",{className:"text-xl font-black text-white",children:["R$ ",ze.format(j.amount)]}),r.jsx(_e,{color:"yellow",children:"ACERTO GLOBAL"})]})]}),r.jsxs("div",{className:"ml-6 flex flex-col gap-2",children:[r.jsx(Z,{variant:"primary",className:"text-[10px] py-2 px-4",onClick:()=>{alert("Para liquidar um saldo global, registre um pagamento avulso ou marque os reembolsos individuais das despesas como pagos.")},children:"Como Liquidar?"}),r.jsx(Z,{variant:"ghost",className:"text-[10px] py-1",onClick:()=>{var O;navigator.clipboard.writeText(`Oi ${(O=n.couples.find(D=>D.id===j.to))==null?void 0:O.name}, segundo o TripDivide meu saldo global devedor  R$ ${ze.format(j.amount)}. Me manda o PIX para eu liquidar?`),alert("Mensagem copiada!")},children:"Copiar Cobrana"})]})]},_)}),w.length===0&&r.jsxs("div",{className:"col-span-full py-20 bg-gray-900 border border-dashed border-gray-800 rounded-2xl flex flex-col items-center",children:[r.jsx("span",{className:"text-4xl mb-4",children:""}),r.jsx("p",{className:"font-bold text-gray-100",children:"Viagem Liquidada!"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1 uppercase tracking-widest font-black",children:"Nenhum acerto global pendente."})]})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Detalhes por Item (Reembolsos)"}),r.jsx("div",{className:"overflow-x-auto rounded-xl border border-gray-800",children:r.jsxs("table",{className:"w-full text-left bg-gray-900",children:[r.jsx("thead",{className:"bg-gray-950 text-[10px] font-black uppercase text-gray-600 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Item"}),r.jsx("th",{className:"p-4",children:"De"}),r.jsx("th",{className:"p-4",children:"Para"}),r.jsx("th",{className:"p-4",children:"Valor"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4 text-right",children:"Ao"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:o.map(j=>{var _,y,N;return r.jsxs("tr",{className:"text-xs group hover:bg-gray-800/40",children:[r.jsx("td",{className:"p-4 font-bold text-gray-400",children:((_=a.find(O=>O.id===j.expenseId))==null?void 0:_.title)||"Ajuste"}),r.jsx("td",{className:"p-4",children:(y=n.couples.find(O=>O.id===j.fromCoupleId))==null?void 0:y.name}),r.jsx("td",{className:"p-4 text-indigo-400",children:(N=n.couples.find(O=>O.id===j.toCoupleId))==null?void 0:N.name}),r.jsxs("td",{className:"p-4 font-black",children:["R$ ",ze.format(j.amountBrl)]}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:j.status==="paid"?"green":"yellow",children:j.status.toUpperCase()})}),r.jsx("td",{className:"p-4 text-right",children:j.status==="pending"&&r.jsx(Z,{variant:"ghost",className:"text-[10px] py-1",onClick:async()=>{await oe.markReimbursementAsPaid(j.id),x()},children:"Liquidado"})})]},j.id)})})]})})]})]})},xg=({value:n,onChange:a,placeholder:i="(00) 00000-0000",className:o="",required:u=!1})=>{const h=f=>{const m=f.target.value,g=Pv(m);g.length<=11&&a(g)};return r.jsx("input",{type:"tel",value:pg(n),onChange:h,placeholder:i,required:u,className:o})},tl=(n,a)=>{const i=n.replace(/[^A-Za-z0-9]/g,"");switch(a){case"CPF":return i.slice(0,11).replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{3})(\d{1})$/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3").replace(/(\d{3})(\d{2})$/,"$1.$2");case"RG":return i.slice(0,9).replace(/(\d{2})(\d{3})(\d{3})(\d{1})/,"$1.$2.$3-$4").replace(/(\d{2})(\d{3})(\d{3})$/,"$1.$2.$3").replace(/(\d{2})(\d{3})$/,"$1.$2");case"CNH":return i.slice(0,11);case"Passaporte":return i.slice(0,8).toUpperCase();default:return n}},al=n=>n.replace(/[^A-Za-z0-9]/g,""),vg=({trip:n,initialData:a,onSave:i,onCancel:o})=>{var se,pe;const[u,h]=H.useState(1),[f,m]=H.useState(!1),[g,x]=H.useState(""),[v,w]=H.useState([]),[j,_]=H.useState(null),[y,N]=H.useState(null),[O,D]=H.useState(-1),[z,U]=H.useState(!0),[E,G]=H.useState(""),[W,K]=H.useState(!1),[R,ae]=H.useState({tripId:n.id,type:yt.ADULT,coupleId:((se=n.couples[0])==null?void 0:se.id)||"",goesToSegments:n.segments.filter(A=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(A.id)).map(A=>A.id),isPayer:!0,canDrive:!1,tags:[],status:"Ativo",...a});H.useEffect(()=>{(async()=>{if(a!=null&&a.id){K(!0);try{const T=await oe.getTravelerDocuments(a.id);w(T)}catch(T){console.error("Erro ao carregar documentos:",T),w((a==null?void 0:a.documents)||[])}finally{K(!1)}}else w([])})()},[a==null?void 0:a.id]),H.useEffect(()=>{R.type===yt.BABY||R.type===yt.PET?ae(A=>({...A,isPayer:!1,canDrive:!1})):R.type===yt.ADULT&&ae(A=>({...A,isPayer:!0}))},[R.type]);const de=[{id:1,title:"Bsico"},{id:2,title:"Participao"},{id:3,title:"Documentos"}],ke=()=>h(A=>Math.min(A+1,3)),ge=()=>h(A=>Math.max(A-1,1)),qe=()=>!(!R.fullName||!R.fullName.trim()||(R.type===yt.CHILD||R.type===yt.BABY)&&!R.birthDate),be=A=>!A||A.length<=4?A:`${A.slice(-4)}`,q=()=>{var A;E.trim()&&!((A=R.tags)!=null&&A.includes(E.trim()))&&(ae({...R,tags:[...R.tags||[],E.trim()]}),G(""))},S=A=>{var T;ae({...R,tags:(T=R.tags)==null?void 0:T.filter(Q=>Q!==A)})},F=A=>A==="Visto"||A==="ESTA"?"entry":"identity";return r.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center relative pb-8",children:[r.jsx("div",{className:"absolute top-4 left-0 w-full h-0.5 bg-gray-800 -z-10"}),de.map(A=>r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs border-2 transition-all ${u===A.id?"bg-indigo-600 border-indigo-400 text-white":u>A.id?"bg-emerald-600 border-emerald-400 text-white":"bg-gray-900 border-gray-700 text-gray-500"}`,children:u>A.id?"":A.id}),r.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-gray-500",children:A.title})]},A.id))]}),r.jsxs("div",{className:"min-h-[300px]",children:[u===1&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in duration-300",children:[r.jsx(P,{label:"Nome Completo *",value:R.fullName,onChange:A=>ae({...R,fullName:A.target.value}),placeholder:"Como o grupo conhece"}),r.jsx(P,{label:"Apelido",value:R.nickname,onChange:A=>ae({...R,nickname:A.target.value}),placeholder:"Opcional"}),r.jsx(P,{as:"select",label:"Tipo *",value:R.type,onChange:A=>ae({...R,type:A.target.value}),children:Object.values(yt).map(A=>r.jsx("option",{value:A,children:A},A))}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Casal / Grupo *"}),f?r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:g,onChange:A=>x(A.target.value),placeholder:"Nome do novo grupo",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-indigo-500 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-400 transition-colors",autoFocus:!0,onKeyDown:async A=>{if(A.key==="Enter"&&g.trim()){A.preventDefault();const T=await oe.saveCouple(n.id,{name:g.trim()});T&&(n.couples.push({id:T.id,name:T.name,members:[]}),ae({...R,coupleId:T.id}),m(!1),x(""))}else A.key==="Escape"&&(m(!1),x(""))}}),r.jsx(Z,{variant:"primary",className:"text-xs whitespace-nowrap",disabled:!g.trim(),onClick:async A=>{if(A.preventDefault(),g.trim()){const T=await oe.saveCouple(n.id,{name:g.trim()});T&&(n.couples.push({id:T.id,name:T.name,members:[]}),ae({...R,coupleId:T.id}),m(!1),x(""))}},children:"Criar"}),r.jsx(Z,{variant:"ghost",className:"text-xs",onClick:A=>{A.preventDefault(),m(!1),x("")},children:""})]}),r.jsx("p",{className:"text-[10px] text-gray-600",children:"Enter para criar, Esc para cancelar"})]}):r.jsxs("div",{className:"flex gap-2",children:[r.jsx("select",{value:R.coupleId,onChange:A=>ae({...R,coupleId:A.target.value}),className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors",children:n.couples.map(A=>r.jsx("option",{value:A.id,children:A.name},A.id))}),r.jsx(Z,{variant:"outline",className:"text-xs whitespace-nowrap",onClick:A=>{A.preventDefault(),m(!0),x("")},children:"+ Grupo"})]})]}),R.type!==yt.PET&&r.jsx(P,{label:`Data de Nascimento ${R.type===yt.CHILD||R.type===yt.BABY?"*":""}`,type:"date",value:nt(R.birthDate),onChange:A=>ae({...R,birthDate:A.target.value})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"WhatsApp (Fone)"}),r.jsx(xg,{value:R.phone||"",onChange:A=>ae({...R,phone:A}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"})]}),r.jsx(P,{label:"Email",className:"col-span-1 md:col-span-2",value:R.email,onChange:A=>ae({...R,email:A.target.value}),placeholder:"Recomendado para comunicao"})]}),u===2&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Segmentos da Viagem"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>ae({...R,goesToSegments:n.segments.map(A=>A.id)}),className:"text-[10px] text-indigo-400 hover:text-indigo-300 font-bold uppercase",children:"Marcar todos"}),r.jsx("span",{className:"text-gray-700",children:""}),r.jsx("button",{onClick:()=>ae({...R,goesToSegments:[]}),className:"text-[10px] text-gray-500 hover:text-gray-400 font-bold uppercase",children:"Limpar"})]})]}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.segments.map(A=>{var T,Q;return r.jsxs("label",{className:`flex items-center gap-3 p-3 rounded-xl border transition-all cursor-pointer ${(T=R.goesToSegments)!=null&&T.includes(A.id)?"bg-indigo-600/10 border-indigo-500/40 text-white":"bg-gray-950 border-gray-800 text-gray-500 hover:border-gray-700"}`,children:[r.jsx("input",{type:"checkbox",className:"w-4 h-4 accent-indigo-500",checked:(Q=R.goesToSegments)==null?void 0:Q.includes(A.id),onChange:B=>{const te=R.goesToSegments||[],ie=B.target.checked?[...te,A.id]:te.filter(ue=>ue!==A.id);ae({...R,goesToSegments:ie})}}),r.jsx("span",{className:"text-sm font-bold",children:A.name})]},A.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold",children:"Viajante Pagante?"}),r.jsx("p",{className:"text-[10px] text-gray-600 uppercase",children:"Considerar no racha de custos"})]}),r.jsx("input",{type:"checkbox",className:"w-6 h-6 accent-emerald-500",checked:R.isPayer,onChange:A=>ae({...R,isPayer:A.target.checked}),disabled:R.type===yt.BABY||R.type===yt.PET})]}),R.type===yt.ADULT&&r.jsxs("div",{className:"p-4 bg-gray-950 border border-gray-800 rounded-xl flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold",children:"Pode Dirigir?"}),r.jsx("p",{className:"text-[10px] text-gray-600 uppercase",children:"CNH Habilitada"})]}),r.jsx("input",{type:"checkbox",className:"w-6 h-6 accent-indigo-500",checked:R.canDrive,onChange:A=>ae({...R,canDrive:A.target.checked})})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Tags"}),r.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:(pe=R.tags)==null?void 0:pe.map(A=>r.jsxs(_e,{color:"indigo",className:"flex items-center gap-1",children:[A,r.jsx("button",{onClick:()=>S(A),className:"ml-1 hover:text-red-400",children:""})]},A))}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:E,onChange:A=>G(A.target.value),onKeyDown:A=>A.key==="Enter"&&(A.preventDefault(),q()),placeholder:"Ex: Vegetariano, Alergia, Prefere janela",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors text-sm"}),r.jsx(Z,{variant:"outline",onClick:q,disabled:!E.trim(),children:"+ Add"})]})]}),r.jsx(P,{as:"textarea",label:"Observaes Livres",rows:2,value:R.notes,onChange:A=>ae({...R,notes:A.target.value}),placeholder:"Detalhes adicionais, restries, preferncias..."})]}),u===3&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs(Ce,{className:"!bg-indigo-600/5 !border-indigo-500/20",children:[r.jsx("p",{className:"text-[10px] text-indigo-400 font-bold uppercase mb-1",children:" Documentao (Opcional)"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Adicione documentos para controle. Nmeros so protegidos e no aparecem completos na listagem."})]}),r.jsx("div",{className:"space-y-2",children:v.map((A,T)=>r.jsxs("div",{className:"p-3 bg-gray-950 border border-gray-800 rounded-xl flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("p",{className:"text-sm font-bold text-white",children:[A.docType," - ",be(A.docNumber)]}),r.jsxs("p",{className:"text-[10px] text-gray-500",children:[A.issuingCountry&&`${A.issuingCountry}  `,A.docExpiry&&`Vence: ${A.docExpiry}`]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>{N(A),D(T),U(!0)},className:"text-indigo-400 hover:text-indigo-300 text-xs",children:""}),r.jsx("button",{onClick:()=>w(v.filter((Q,B)=>B!==T)),className:"text-red-400 hover:text-red-300 text-xs",children:""})]})]},T))}),y!==null?r.jsxs(Ce,{className:"!bg-gray-900/50",children:[r.jsx("p",{className:"text-xs font-bold text-gray-400 mb-3",children:O>=0?"Editar Documento":"Novo Documento"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs(P,{as:"select",label:"Tipo *",value:y.docType||"Passaporte",onChange:A=>N({...y,docType:A.target.value,docCategory:F(A.target.value)}),children:[r.jsx("option",{value:"Passaporte",children:" Passaporte"}),r.jsx("option",{value:"RG",children:" RG"}),r.jsx("option",{value:"CPF",children:" CPF"}),r.jsx("option",{value:"CNH",children:" CNH"}),r.jsx("option",{value:"Visto",children:" Visto"}),r.jsx("option",{value:"ESTA",children:" ESTA/ETA"}),r.jsx("option",{value:"Outro",children:" Outro"})]}),y.docType==="Passaporte"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(P,{label:"Pas Emissor *",value:y.issuingCountry||"",onChange:A=>N({...y,issuingCountry:A.target.value||""}),placeholder:"Ex: Brasil"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:z?tl(y.docNumber||"",y.docType):y.docNumber||"",onChange:A=>{const T=al(A.target.value);N({...y,docNumber:T||""})},placeholder:"Ex: AB123456",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(y.issueDate)||"",onChange:A=>N({...y,issueDate:A.target.value||""})}),r.jsx(P,{label:"Vencimento *",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Local de Emisso",value:y.issuerPlace||"",onChange:A=>N({...y,issuerPlace:A.target.value||""}),placeholder:"Ex: So Paulo"}),r.jsx(P,{label:"Observaes",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value||""}),placeholder:"Detalhes adicionais"})]}),y.docType==="RG"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(P,{label:"Estado Emissor *",value:y.issuerState||"",onChange:A=>N({...y,issuerState:A.target.value}),placeholder:"Ex: SP"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:z?tl(y.docNumber||"",y.docType):y.docNumber||"",onChange:A=>{const T=al(A.target.value);N({...y,docNumber:T})},placeholder:"Ex: 00.000.000-0",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"rgo Emissor",value:y.issuerAgency||"",onChange:A=>N({...y,issuerAgency:A.target.value}),placeholder:"Ex: SSP"}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(y.issueDate)||"",onChange:A=>N({...y,issueDate:A.target.value||""})}),r.jsx(P,{label:"Vencimento (opcional)",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Observaes",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Detalhes adicionais"})]}),y.docType==="CPF"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:z?tl(y.docNumber||"",y.docType):y.docNumber||"",onChange:A=>{const T=al(A.target.value);N({...y,docNumber:T})},placeholder:"Ex: 000.000.000-00",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"Observaes",className:"md:col-span-2",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Detalhes adicionais"})]}),y.docType==="CNH"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero de Registro *"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:z?tl(y.docNumber||"",y.docType):y.docNumber||"",onChange:A=>{const T=al(A.target.value);N({...y,docNumber:T})},placeholder:"Ex: 12345678900",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsxs(P,{as:"select",label:"Categoria",value:y.licenseCategory||"",onChange:A=>N({...y,licenseCategory:A.target.value}),children:[r.jsx("option",{value:"",children:"Selecione"}),r.jsx("option",{value:"A",children:"A - Moto"}),r.jsx("option",{value:"B",children:"B - Carro"}),r.jsx("option",{value:"AB",children:"AB - Moto e Carro"}),r.jsx("option",{value:"C",children:"C - Caminho"}),r.jsx("option",{value:"D",children:"D - nibus"}),r.jsx("option",{value:"E",children:"E - Carreta"})]}),r.jsx(P,{label:"UF Emissora",value:y.issuerState||"",onChange:A=>N({...y,issuerState:A.target.value}),placeholder:"Ex: SP"}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(y.issueDate)||"",onChange:A=>N({...y,issueDate:A.target.value||""})}),r.jsx(P,{label:"Vencimento *",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Observaes",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Detalhes adicionais"})]}),y.docType==="Visto"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(P,{label:"Pas/Regio *",value:y.regionOrCountry||"",onChange:A=>N({...y,regionOrCountry:A.target.value}),placeholder:"Ex: EUA, Schengen"}),r.jsx(P,{label:"Categoria",value:y.visaCategory||"",onChange:A=>N({...y,visaCategory:A.target.value}),placeholder:"Ex: B1/B2, Turismo"}),r.jsxs(P,{as:"select",label:"Tipo de Entrada",value:y.entryType||"",onChange:A=>N({...y,entryType:A.target.value}),children:[r.jsx("option",{value:"",children:"Selecione"}),r.jsx("option",{value:"single",children:"Entrada nica"}),r.jsx("option",{value:"multiple",children:"Mltiplas Entradas"})]}),r.jsx(P,{label:"Durao (dias)",type:"number",value:y.stayDurationDays||"",onChange:A=>N({...y,stayDurationDays:parseInt(A.target.value)||null}),placeholder:"Ex: 90"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero/ID (opcional)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:y.docNumber||"",onChange:A=>N({...y,docNumber:A.target.value}),placeholder:"Ex: 123456789",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"Vencimento *",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Observaes",className:"md:col-span-2",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Ex: Vlido para turismo"})]}),y.docType==="ESTA"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(P,{label:"Pas/Regio *",value:y.regionOrCountry||"",onChange:A=>N({...y,regionOrCountry:A.target.value}),placeholder:"Ex: EUA, Canad"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero/ID (opcional)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:y.docNumber||"",onChange:A=>N({...y,docNumber:A.target.value}),placeholder:"Ex: 123456789",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"Vencimento *",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Observaes",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Detalhes adicionais"})]}),y.docType==="Outro"&&r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[r.jsx(P,{label:"Nome do Documento *",value:y.customLabel||"",onChange:A=>N({...y,customLabel:A.target.value}),placeholder:"Ex: Carteira do Plano"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"Nmero/ID (opcional)"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:z?"text":"password",value:y.docNumber||"",onChange:A=>N({...y,docNumber:A.target.value}),placeholder:"Ex: 123456",className:"flex-1 px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"}),r.jsx("button",{onClick:()=>U(!z),className:"px-3 text-gray-500 hover:text-gray-300",children:z?"":""})]})]}),r.jsx(P,{label:"Pas/Estado Emissor",value:y.issuingCountry||y.issuerState||"",onChange:A=>N({...y,issuingCountry:A.target.value}),placeholder:"Ex: Brasil"}),r.jsx(P,{label:"Vencimento (opcional)",type:"date",value:nt(y.docExpiry)||"",onChange:A=>N({...y,docExpiry:A.target.value||""})}),r.jsx(P,{label:"Observaes",className:"md:col-span-2",value:y.notes||"",onChange:A=>N({...y,notes:A.target.value}),placeholder:"Detalhes adicionais"})]})]}),r.jsxs("div",{className:"flex gap-2 mt-4",children:[r.jsx(Z,{variant:"primary",className:"flex-1",disabled:!y.docType||y.docType==="Passaporte"&&(!y.issuingCountry||!y.docNumber||!y.docExpiry)||y.docType==="RG"&&(!y.issuerState||!y.docNumber)||y.docType==="CPF"&&!y.docNumber||y.docType==="CNH"&&(!y.docNumber||!y.docExpiry)||y.docType==="Visto"&&(!y.regionOrCountry||!y.docExpiry)||y.docType==="ESTA"&&(!y.regionOrCountry||!y.docExpiry)||y.docType==="Outro"&&!y.customLabel,onClick:()=>{if(O>=0){const A=[...v];A[O]=y,w(A)}else w([...v,y]);N(null),D(-1),U(!1)},children:O>=0?"Atualizar":"Adicionar"}),r.jsx(Z,{variant:"ghost",onClick:()=>{N(null),D(-1),U(!0)},children:"Cancelar"})]})]}):r.jsx(Z,{variant:"outline",className:"w-full",onClick:()=>{N({docType:"Passaporte",docCategory:"identity",docNumber:"",issuingCountry:"",docExpiry:"",notes:""}),D(-1),U(!0)},children:"+ Adicionar Documento"}),r.jsxs(Ce,{className:"!bg-amber-600/5 !border-amber-500/20",children:[r.jsx("p",{className:"text-[10px] text-amber-500 font-bold uppercase mb-1",children:" Dados Protegidos"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Nmeros de documentos so criptografados e s aparecem mascarados (1234) nas listagens."})]})]})]}),r.jsxs("div",{className:"flex justify-between pt-6 border-t border-gray-800",children:[r.jsx(Z,{variant:"ghost",onClick:u===1?o:ge,children:u===1?"Cancelar":"Voltar"}),r.jsx("div",{className:"flex gap-2",children:u<3?r.jsx(Z,{onClick:ke,disabled:u===1&&!qe(),children:"Prximo"}):r.jsx(Z,{variant:"primary",onClick:()=>{const A=(R.goesToSegments||[]).filter(T=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(T));i({...R,goesToSegments:A,documents:v})},disabled:!qe(),children:"Salvar Viajante"})})]})]})},Zv=({onImport:n,onClose:a})=>{const[i,o]=H.useState("");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-xl",children:[r.jsx("p",{className:"text-sm font-bold text-white mb-2",children:"Instrues de Importao"}),r.jsxs("p",{className:"text-xs text-gray-400 leading-relaxed",children:["Cole sua lista separada por ponto-e-vrgula (um viajante por linha):",r.jsx("br",{}),r.jsx("code",{className:"text-[10px] text-indigo-400 block mt-2 bg-gray-950 p-2 rounded",children:"Nome Completo; Tipo; ID_Casal; Segmentos; Fone"}),r.jsx("span",{className:"text-[10px] block mt-1 italic text-gray-500",children:"Ex: Joo Silva; Adulto; couple-1; seg-1,seg-2; +5511..."})]})]}),r.jsx(P,{as:"textarea",rows:10,value:i,onChange:u=>o(u.target.value),placeholder:"Cole aqui...",className:"font-mono text-xs"}),r.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-800",children:[r.jsx(Z,{variant:"ghost",onClick:a,children:"Cancelar"}),r.jsx(Z,{variant:"primary",onClick:()=>n(i),disabled:!i.trim(),children:"Importar Lista"})]})]})},Fv=({trip:n,onRefresh:a,onNavigateToDetail:i})=>{const[o,u]=H.useState([]),[h,f]=H.useState(!1),[m,g]=H.useState(!1),[x,v]=H.useState(null),[w,j]=H.useState(""),[_,y]=H.useState("all"),[N,O]=H.useState("all"),[D,z]=H.useState(null);H.useEffect(()=>{U()},[n.id]);const U=async()=>{const R=await oe.getTravelers(n.id);u(R)},E=H.useMemo(()=>{const R=w.toLowerCase();return o.filter(ae=>{const de=ae.fullName||"",ke=ae.nickname||"",ge=ae.phone||"",qe=n.couples.find(se=>se.id===ae.coupleId),be=(qe==null?void 0:qe.name)||"",q=de.toLowerCase().includes(R)||ge.includes(w)||ke.toLowerCase().includes(R)||be.toLowerCase().includes(R),S=_==="all"||ae.type===_,F=N==="all"||ae.coupleId===N;return q&&S&&F})},[o,w,_,N,n.couples]),G=H.useMemo(()=>{const R={};return E.forEach(ae=>{const de=ae.coupleId||"sem-grupo";R[de]||(R[de]=[]),R[de].push(ae)}),Object.keys(R).forEach(ae=>{R[ae].sort((de,ke)=>de.type==="Adulto"&&ke.type!=="Adulto"?-1:de.type!=="Adulto"&&ke.type==="Adulto"?1:(de.fullName||"").localeCompare(ke.fullName||""))}),R},[E]),W=(R=null)=>{v(R),f(!0)},K=async R=>{const ae=await oe.bulkImportTravelers(n.id,R);g(!1),U(),a(),z(`${ae} viajantes importados com sucesso!`),setTimeout(()=>z(null),3e3)};return r.jsxs("div",{className:"flex flex-col h-full gap-8 animate-in fade-in duration-500",children:[D&&r.jsx("div",{className:"fixed top-4 right-4 z-50 bg-emerald-600 text-white px-6 py-3 rounded-xl shadow-lg animate-in slide-in-from-top-2 duration-300",children:r.jsxs("p",{className:"text-sm font-bold",children:[" ",D]})}),r.jsxs("div",{className:"flex-1 space-y-6",children:[r.jsxs("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-3xl font-black text-white uppercase tracking-tighter",children:"Viajantes"}),r.jsx("p",{className:"text-gray-500",children:"Gesto de participantes e documentos"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx(Z,{variant:"primary",onClick:()=>W(),children:"+ Novo Viajante"})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 bg-gray-900/40 p-4 rounded-2xl border border-gray-800",children:[r.jsx("div",{className:"md:col-span-1",children:r.jsx(P,{placeholder:"Buscar por nome, fone, grupo...",value:w,onChange:R=>j(R.target.value)})}),r.jsxs(P,{as:"select",value:_,onChange:R=>y(R.target.value),children:[r.jsx("option",{value:"all",children:"Todos os tipos"}),Object.values(yt).map(R=>r.jsx("option",{value:R,children:R},R))]}),r.jsxs(P,{as:"select",value:N,onChange:R=>O(R.target.value),children:[r.jsx("option",{value:"all",children:"Todos os grupos"}),n.couples.map(R=>r.jsx("option",{value:R.id,children:R.name},R.id))]}),r.jsxs("div",{className:"flex items-center gap-2 justify-center",children:[r.jsxs(_e,{color:"indigo",children:[o.length," Total"]}),r.jsxs(_e,{color:"gray",children:[o.filter(R=>R.type===yt.ADULT).length," ADU"]})]})]}),r.jsxs("div",{className:"space-y-6",children:[Object.entries(G).map(([R,ae])=>{const de=n.couples.find(ge=>ge.id===R),ke=(de==null?void 0:de.name)||"Sem Grupo";return r.jsxs("div",{className:"bg-gray-900/40 rounded-2xl border border-gray-800 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-3 bg-gray-900/60 border-b border-gray-800",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-wide",children:ke}),r.jsxs(_e,{color:"gray",children:[ae.length," ",ae.length===1?"viajante":"viajantes"]})]})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse",children:[r.jsx("thead",{className:"text-[10px] font-black uppercase text-gray-500 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4",children:"Nome / Tipo"}),r.jsx("th",{className:"p-4",children:"Segmentos"}),r.jsx("th",{className:"p-4",children:"Status"}),r.jsx("th",{className:"p-4 text-center",children:"Issues"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:ae.map(ge=>{const qe=oe.computeTravelerIssues(ge,n),be=qe.some(F=>F.type==="error"),q=qe.some(F=>F.type==="warning"),S=ge.fullName||"Sem Nome";return r.jsxs("tr",{onClick:()=>{console.log(" Clicou no viajante:",ge.fullName,"ID:",ge.id),i(ge.id)},className:"hover:bg-gray-900/40 transition-colors cursor-pointer",children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs ${ge.type===yt.ADULT?"bg-indigo-600/20 text-indigo-400":"bg-yellow-600/20 text-yellow-400"}`,children:S.charAt(0)}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold text-gray-200",children:S}),r.jsxs("p",{className:"text-[10px] text-gray-500 uppercase",children:[ge.type," ",ge.nickname?` ${ge.nickname}`:""]})]})]})}),r.jsx("td",{className:"p-4",children:r.jsx("div",{className:"flex flex-wrap gap-1",children:(ge.goesToSegments||[]).map(F=>{const se=n.segments.find(pe=>pe.id===F);return r.jsx("span",{className:"text-[9px] px-1.5 py-0.5 bg-gray-800 text-gray-500 rounded uppercase font-bold",children:se==null?void 0:se.name},F)})})}),r.jsx("td",{className:"p-4",children:r.jsx(_e,{color:ge.isPayer?"green":"gray",children:ge.isPayer?"Pagante":"No pagante"})}),r.jsx("td",{className:"p-4 text-center",children:r.jsxs("div",{className:"flex justify-center gap-1",children:[be&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse",title:"Erro crtico"}),q&&r.jsx("div",{className:"w-2 h-2 rounded-full bg-amber-500",title:"Ateno"}),!be&&!q&&r.jsx("span",{className:"text-emerald-500 text-xs",children:""})]})})]},ge.id)})})]})})]},R)}),Object.keys(G).length===0&&r.jsx("div",{className:"py-20 text-center text-gray-600 italic",children:"Nenhum viajante encontrado."})]})]}),r.jsx(ia,{isOpen:h,onClose:()=>f(!1),title:x!=null&&x.id?"Editar Viajante":"Novo Viajante",children:r.jsx(vg,{trip:n,initialData:x||void 0,onCancel:()=>f(!1),onSave:async R=>{const ae=await oe.saveTraveler(R);if(R.documents&&Array.isArray(R.documents)&&R.documents.length>0)for(const de of R.documents)await oe.saveTravelerDocument({...de,travelerId:ae.id});f(!1),U(),a()}})}),r.jsx(ia,{isOpen:m,onClose:()=>g(!1),title:"Importar Viajantes em Lote",children:r.jsx(Zv,{onImport:K,onClose:()=>g(!1)})})]})},Wv={Passaporte:"",RG:"",CPF:"",CNH:"",Visto:"",ESTA:"",Outro:""},sl=(n,a)=>{if(!n)return"";const i=n.replace(/[^A-Za-z0-9]/g,"");switch(a){case"CPF":return i.slice(0,11).replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{3})(\d{1})$/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3").replace(/(\d{3})(\d{2})$/,"$1.$2");case"RG":return i.slice(0,9).replace(/(\d{2})(\d{3})(\d{3})(\d{1})/,"$1.$2.$3-$4").replace(/(\d{2})(\d{3})(\d{3})$/,"$1.$2.$3").replace(/(\d{2})(\d{3})$/,"$1.$2");case"CNH":return i.slice(0,11);case"Passaporte":return i.slice(0,8).toUpperCase();default:return n}},eb=({document:n,passports:a,onClose:i,onSave:o,onDelete:u,onUpdateNumber:h,isNewDocument:f=!1})=>{const[m,g]=H.useState(f),[x,v]=H.useState(!1),[w,j]=H.useState(!1),[_,y]=H.useState(""),[N,O]=H.useState(!0),[D,z]=H.useState(f),[U,E]=H.useState(!1),[G,W]=H.useState(n);H.useEffect(()=>{W(n),g(f),z(f)},[n,f]);const K=(q,S)=>{W({...G,[q]:S}),z(!0)},R=async()=>{await o(G),g(!1),z(!1)},ae=()=>{if(D){E(!0);return}W(n),g(!1),z(!1)},de=()=>{W(n),g(!1),z(!1),E(!1)},ke=()=>{if(D){E(!0);return}i()},ge=()=>{E(!1),i()},qe=async()=>{_.trim()&&(await h(n.id,_),v(!1),y(""))},be=async()=>{await u(n.id),i()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",onClick:ke,children:r.jsxs("div",{className:"bg-gray-900 border border-gray-800 w-full max-w-3xl rounded-2xl shadow-2xl animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-800 bg-gray-900/50",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-3xl",children:Wv[G.docType]||""}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-black text-white uppercase tracking-tight",children:G.docType}),r.jsx("p",{className:"text-xs text-gray-500",children:f?"Novo documento":m?"Modo de edio":"Visualizao"})]})]}),r.jsx("button",{onClick:ke,className:"text-gray-500 hover:text-white transition-colors p-1 hover:bg-gray-800 rounded-lg",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[U&&r.jsxs("div",{className:"p-4 bg-amber-600/10 rounded-xl border border-amber-600/20 space-y-3 animate-in slide-in-from-top-2",children:[r.jsx("p",{className:"text-sm text-amber-400 font-bold",children:" Voc tem alteraes no salvas. Deseja descartar?"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",className:"flex-1 bg-amber-600/20 text-amber-400 hover:bg-amber-600/30",onClick:m?de:ge,children:"Descartar alteraes"}),r.jsx(Z,{variant:"ghost",onClick:()=>E(!1),children:"Continuar editando"})]})]}),r.jsxs("div",{className:"p-5 bg-gray-950 rounded-xl border border-gray-800",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("p",{className:"text-xs font-black text-gray-500 uppercase",children:"Nmero do Documento"}),!f&&!x&&G.docNumber&&!m&&r.jsx("button",{onClick:()=>v(!0),className:"text-xs text-indigo-400 hover:text-indigo-300 font-bold px-3 py-1 hover:bg-indigo-600/10 rounded-lg transition-all",children:"Atualizar nmero"})]}),f&&m||x?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:N?"text":"password",value:N?sl(f?G.docNumber:_,G.docType):f?G.docNumber:_,onChange:q=>{const S=q.target.value.replace(/[^A-Za-z0-9]/g,"");f?K("docNumber",S):y(S)},placeholder:"Digite o nmero do documento",className:"flex-1 px-4 py-3 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 transition-all",autoFocus:f}),r.jsx("button",{onClick:()=>O(!N),className:"px-4 text-gray-500 hover:text-gray-300 hover:bg-gray-800 rounded-xl transition-all",children:N?"":""})]}),!f&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"primary",onClick:qe,disabled:!_.trim(),className:"flex-1",children:"Confirmar atualizao"}),r.jsx(Z,{variant:"ghost",onClick:()=>{v(!1),y("")},children:"Cancelar"})]}),r.jsxs("p",{className:"text-xs text-amber-500 flex items-center gap-2",children:[r.jsx("span",{children:""}),r.jsx("span",{children:"O nmero ser criptografado e substituir o atual"})]})]})]}):r.jsx("p",{className:"text-2xl font-black tracking-widest text-white font-mono",children:sl(G.docNumber,G.docType)||"(no informado)"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[G.docType==="Passaporte"&&r.jsxs(r.Fragment,{children:[r.jsx(P,{label:"Pas Emissor",value:G.issuerCountry||"",onChange:q=>K("issuerCountry",q.target.value),disabled:!m}),r.jsx(P,{label:"Local de Emisso",value:G.issuerPlace||"",onChange:q=>K("issuerPlace",q.target.value),disabled:!m}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(G.issueDate)||"",onChange:q=>K("issueDate",q.target.value),disabled:!m}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m}),r.jsx("div",{className:"p-4 bg-gray-950 rounded-xl border border-gray-800",children:r.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:G.isPrimary||!1,onChange:q=>K("isPrimary",q.target.checked),disabled:!m,className:"w-5 h-5 accent-indigo-500"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-white",children:"Passaporte Principal"}),r.jsx("p",{className:"text-xs text-gray-500",children:"Usado como referncia para vistos"})]})]})})]}),G.docType==="RG"&&r.jsxs(r.Fragment,{children:[r.jsx(P,{label:"Estado Emissor",value:G.issuerState||"",onChange:q=>K("issuerState",q.target.value),disabled:!m}),r.jsx(P,{label:"rgo Emissor",value:G.issuerAgency||"",onChange:q=>K("issuerAgency",q.target.value),disabled:!m}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(G.issueDate)||"",onChange:q=>K("issueDate",q.target.value),disabled:!m}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m})]}),G.docType==="CNH"&&r.jsxs(r.Fragment,{children:[r.jsxs(P,{as:"select",label:"Categoria",value:G.licenseCategory||"",onChange:q=>K("licenseCategory",q.target.value),disabled:!m,children:[r.jsx("option",{value:"",children:"Selecione"}),r.jsx("option",{value:"A",children:"A - Moto"}),r.jsx("option",{value:"B",children:"B - Carro"}),r.jsx("option",{value:"AB",children:"AB - Moto e Carro"}),r.jsx("option",{value:"C",children:"C - Caminho"}),r.jsx("option",{value:"D",children:"D - nibus"}),r.jsx("option",{value:"E",children:"E - Carreta"})]}),r.jsx(P,{label:"UF Emissora",value:G.issuerState||"",onChange:q=>K("issuerState",q.target.value),disabled:!m}),r.jsx(P,{label:"Data de Emisso",type:"date",value:nt(G.issueDate)||"",onChange:q=>K("issueDate",q.target.value),disabled:!m}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m})]}),G.docType==="Visto"&&r.jsxs(r.Fragment,{children:[r.jsx(P,{label:"Pas/Regio",value:G.regionOrCountry||"",onChange:q=>K("regionOrCountry",q.target.value),disabled:!m}),r.jsx(P,{label:"Categoria",value:G.visaCategory||"",onChange:q=>K("visaCategory",q.target.value),disabled:!m,placeholder:"Ex: B1/B2, Turismo"}),r.jsxs(P,{as:"select",label:"Tipo de Entrada",value:G.entryType||"",onChange:q=>K("entryType",q.target.value),disabled:!m,children:[r.jsx("option",{value:"",children:"Selecione"}),r.jsx("option",{value:"single",children:"Entrada nica"}),r.jsx("option",{value:"multiple",children:"Mltiplas Entradas"})]}),r.jsx(P,{label:"Durao (dias)",type:"number",value:G.stayDurationDays||"",onChange:q=>K("stayDurationDays",parseInt(q.target.value)||null),disabled:!m}),r.jsxs(P,{as:"select",label:"Vinculado ao Passaporte",value:G.passportDocumentId||"",onChange:q=>K("passportDocumentId",q.target.value||null),disabled:!m,children:[r.jsx("option",{value:"",children:"Nenhum"}),a.map(q=>r.jsxs("option",{value:q.id,children:[sl(q.docNumber,"Passaporte")," - ",q.issuerCountry]},q.id))]}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m})]}),G.docType==="ESTA"&&r.jsxs(r.Fragment,{children:[r.jsx(P,{label:"Pas/Regio",value:G.regionOrCountry||"",onChange:q=>K("regionOrCountry",q.target.value),disabled:!m}),r.jsxs(P,{as:"select",label:"Vinculado ao Passaporte",value:G.passportDocumentId||"",onChange:q=>K("passportDocumentId",q.target.value||null),disabled:!m,children:[r.jsx("option",{value:"",children:"Nenhum"}),a.map(q=>r.jsxs("option",{value:q.id,children:[sl(q.docNumber,"Passaporte")," - ",q.issuerCountry]},q.id))]}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m})]}),G.docType==="Outro"&&r.jsxs(r.Fragment,{children:[r.jsx(P,{label:"Nome do Documento",value:G.customLabel||"",onChange:q=>K("customLabel",q.target.value),disabled:!m}),r.jsx(P,{label:"Pas/Estado Emissor",value:G.issuerCountry||G.issuerState||"",onChange:q=>K("issuerCountry",q.target.value),disabled:!m}),r.jsx(P,{label:"Vencimento",type:"date",value:nt(G.expiryDate)||"",onChange:q=>K("expiryDate",q.target.value),disabled:!m})]}),r.jsx(P,{as:"textarea",label:"Observaes",rows:3,value:G.notes||"",onChange:q=>K("notes",q.target.value),disabled:!m,placeholder:"Detalhes adicionais sobre o documento"})]}),!f&&r.jsx(r.Fragment,{children:w?r.jsxs("div",{className:"p-4 bg-red-600/10 rounded-xl border border-red-600/20 space-y-3 animate-in slide-in-from-top-2",children:[r.jsx("p",{className:"text-sm text-red-400 font-bold",children:" Tem certeza que deseja excluir este documento?"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",className:"flex-1 bg-red-600/20 text-red-400 hover:bg-red-600/30",onClick:be,children:"Confirmar excluso"}),r.jsx(Z,{variant:"ghost",onClick:()=>j(!1),children:"Cancelar"})]})]}):r.jsx("button",{onClick:()=>j(!0),className:"w-full p-3 text-red-400 hover:bg-red-600/10 rounded-xl border border-red-600/20 transition-colors text-sm font-bold",children:" Excluir documento"})})]}),r.jsx("div",{className:"px-6 py-4 border-t border-gray-800 bg-gray-900/50 flex gap-3",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Z,{variant:"primary",className:"flex-1",onClick:R,disabled:!D,children:f?" Cadastrar documento":" Salvar alteraes"}),r.jsx(Z,{variant:"ghost",onClick:ae,children:"Cancelar"})]}):r.jsxs(r.Fragment,{children:[r.jsx(Z,{variant:"primary",className:"flex-1",onClick:()=>g(!0),children:" Editar"}),r.jsx(Z,{variant:"ghost",onClick:ke,children:"Fechar"})]})})]})})},tb={Passaporte:"",RG:"",CPF:"",CNH:"",Visto:"",ESTA:"",Outro:""},ab=(n,a)=>{if(!n)return"";const i=n.replace(/[^A-Za-z0-9]/g,"");switch(a){case"CPF":return i.slice(0,11).replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{3})(\d{1})$/,"$1.$2.$3-$4").replace(/(\d{3})(\d{3})(\d{2})$/,"$1.$2.$3").replace(/(\d{3})(\d{2})$/,"$1.$2");case"RG":return i.slice(0,9).replace(/(\d{2})(\d{3})(\d{3})(\d{1})/,"$1.$2.$3-$4").replace(/(\d{2})(\d{3})(\d{3})$/,"$1.$2.$3").replace(/(\d{2})(\d{3})$/,"$1.$2");case"CNH":return i.slice(0,11);case"Passaporte":return i.slice(0,8).toUpperCase();default:return n}},sb=({trip:n,travelerId:a,onBack:i,onRefresh:o})=>{const[u,h]=H.useState(null),[f,m]=H.useState([]),[g,x]=H.useState(!0),[v,w]=H.useState(!1),[j,_]=H.useState(null),[y,N]=H.useState(!1),[O,D]=H.useState(!1),[z,U]=H.useState(!1),[E,G]=H.useState(null),[W,K]=H.useState("all"),[R,ae]=H.useState("all"),[de,ke]=H.useState("");H.useEffect(()=>{ge()},[a]);const ge=async()=>{x(!0);try{console.log(" Carregando viajante:",a);const B=await oe.getTravelers(n.id);console.log(" Viajantes encontrados:",B.length);const te=B.find(ie=>ie.id===a);if(te){console.log(" Viajante encontrado:",te.fullName),h(te);const ie=await oe.getTravelerDocuments(te.id);console.log(" Documentos carregados:",ie.length),m(ie)}else console.error(" Viajante no encontrado com ID:",a)}catch(B){console.error(" Erro ao carregar viajante:",B)}x(!1)},qe=async()=>{u&&(await oe.deleteTraveler(u.id),o(),i())},be=async B=>{try{const te={id:B.id,travelerId:B.travelerId||(u==null?void 0:u.id),docType:B.docType,docCategory:B.docCategory,docNumber:B.docNumber||"",issuerCountry:B.issuerCountry||"",issuerState:B.issuerState||"",issuerAgency:B.issuerAgency||"",issuerPlace:B.issuerPlace||"",regionOrCountry:B.regionOrCountry||"",issueDate:B.issueDate||"",docExpiry:B.expiryDate||B.docExpiry||"",visaCategory:B.visaCategory||"",entryType:B.entryType||"",stayDurationDays:B.stayDurationDays||null,licenseCategory:B.licenseCategory||"",customLabel:B.customLabel||"",passportDocumentId:B.passportDocumentId||null,isPrimary:B.isPrimary||!1,notes:B.notes||""};await oe.saveTravelerDocument(te),await ge(),G("Documento salvo com sucesso!"),setTimeout(()=>G(null),3e3),_(null),N(!1)}catch(te){alert("Erro ao salvar documento: "+te.message)}},q=async B=>{try{await oe.deleteTravelerDocument(B),await ge(),G("Documento excludo com sucesso!"),setTimeout(()=>G(null),3e3)}catch(te){alert("Erro ao excluir documento: "+te.message)}},S=async(B,te)=>{try{const ie=f.find(ue=>ue.id===B);if(!ie)return;await oe.saveTravelerDocument({...ie,id:B,docNumber:te}),await ge(),G("Nmero do documento atualizado com sucesso!"),setTimeout(()=>G(null),3e3)}catch(ie){alert("Erro ao atualizar nmero: "+ie.message)}},F=()=>{D(!0)},se=B=>{D(!1),N(!0);const te={travelerId:u==null?void 0:u.id,docType:B,docCategory:B==="Visto"||B==="ESTA"?"entry":"identity",docNumber:"",notes:"",issuerCountry:"",issuerState:"",issuerAgency:"",issuerPlace:"",regionOrCountry:"",issueDate:"",expiryDate:"",visaCategory:"",entryType:"",stayDurationDays:null,licenseCategory:"",customLabel:"",passportDocumentId:null,isPrimary:!1};_(te)};if(g||!u)return g?r.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:r.jsx("p",{className:"text-gray-500 animate-pulse",children:"Carregando viajante..."})}):r.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-red-400 mb-4",children:" Viajante no encontrado"}),r.jsx(Z,{variant:"outline",onClick:i,children:" Voltar para lista"})]})});const pe=f.filter(B=>{var je,lt,Ge,Da;const te=W==="all"||B.docCategory===W,ie=R==="all"||B.docType===R,ue=!de||((je=B.docNumber)==null?void 0:je.toLowerCase().includes(de.toLowerCase()))||((lt=B.issuerCountry)==null?void 0:lt.toLowerCase().includes(de.toLowerCase()))||((Ge=B.issuerState)==null?void 0:Ge.toLowerCase().includes(de.toLowerCase()))||((Da=B.customLabel)==null?void 0:Da.toLowerCase().includes(de.toLowerCase()));return te&&ie&&ue}),A={passports:pe.filter(B=>B.docType==="Passaporte"),identity:pe.filter(B=>["RG","CPF","CNH"].includes(B.docType)),entry:pe.filter(B=>["Visto","ESTA"].includes(B.docType)),others:pe.filter(B=>B.docType==="Outro")},T=oe.computeTravelerIssues(u,n),Q=n.couples.find(B=>B.id===u.coupleId);return r.jsxs("div",{className:"min-h-screen bg-gray-950",children:[E&&r.jsx("div",{className:"fixed top-4 right-4 z-50 bg-emerald-600 text-white px-6 py-3 rounded-xl shadow-lg animate-in slide-in-from-top-2 duration-300",children:r.jsxs("p",{className:"text-sm font-bold",children:[" ",E]})}),r.jsx("div",{className:"bg-gray-900/50 border-b border-gray-800 px-8 py-6",children:r.jsxs("div",{className:"max-w-[1600px] mx-auto",children:[r.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-500 hover:text-white transition-colors mb-4",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),r.jsx("span",{className:"text-xs font-bold uppercase",children:"Viajantes"})]}),r.jsxs("div",{className:"flex items-start justify-between gap-6",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[r.jsx("h1",{className:"text-3xl font-black text-white tracking-tight",children:u.fullName}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_e,{color:"indigo",className:"text-[10px] px-2 py-0.5",children:u.type}),Q&&r.jsx(_e,{color:"gray",className:"text-[10px] px-2 py-0.5",children:Q.name}),u.isPayer&&r.jsx(_e,{color:"green",className:"text-[10px] px-2 py-0.5",children:"PAGANTE"}),u.canDrive&&r.jsx(_e,{color:"blue",className:"text-[10px] px-2 py-0.5",children:"DIRIGE"})]})]}),r.jsxs("div",{className:"flex items-center gap-6 text-sm text-gray-400",children:[u.phone&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:""}),r.jsx("span",{children:pg(u.phone)})]}),u.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-gray-600",children:""}),r.jsx("span",{className:"truncate max-w-xs",children:u.email})]}),!u.phone&&!u.email&&r.jsx("span",{className:"text-gray-600 italic text-xs",children:"Sem informaes de contato"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Z,{variant:"outline",size:"sm",onClick:()=>w(!0),children:" Editar"}),r.jsx(Z,{variant:"primary",size:"sm",onClick:F,children:"+ Documento"}),r.jsx("div",{className:"relative",children:z?r.jsxs("div",{className:"absolute right-0 top-full mt-2 bg-gray-900 border border-gray-800 rounded-xl shadow-xl p-3 w-64 z-10 animate-in slide-in-from-top-2",children:[r.jsx("p",{className:"text-xs text-red-400 font-bold mb-3",children:" Confirmar excluso?"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"ghost",className:"flex-1 bg-red-600/20 text-red-400 hover:bg-red-600/30 text-xs",onClick:qe,children:"Excluir"}),r.jsx(Z,{variant:"ghost",className:"text-xs",onClick:()=>U(!1),children:"Cancelar"})]})]}):r.jsx("button",{onClick:()=>U(!0),className:"px-3 py-2 text-gray-500 hover:text-white hover:bg-gray-800 rounded-lg transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})})})]})]})]})}),r.jsxs("div",{className:"max-w-[1600px] mx-auto px-8 py-6",children:[T.length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-amber-600/10 rounded-xl border border-amber-600/20",children:[r.jsxs("p",{className:"text-xs font-black text-amber-500 uppercase mb-3",children:[" ",T.length," Pendncia",T.length>1?"s":""]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2",children:T.map((B,te)=>r.jsxs("p",{className:"text-xs text-amber-400 leading-tight",children:[" ",B.message]},te))})]}),r.jsxs("div",{className:"bg-gray-900 border border-gray-800 rounded-xl p-5",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-lg font-black text-white uppercase mb-3",children:"Documentos"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[r.jsxs(P,{as:"select",value:W,onChange:B=>K(B.target.value),className:"text-xs",children:[r.jsx("option",{value:"all",children:"Todas Categorias"}),r.jsx("option",{value:"identity",children:"Identidade"}),r.jsx("option",{value:"entry",children:"Entrada no Pas"})]}),r.jsxs(P,{as:"select",value:R,onChange:B=>ae(B.target.value),className:"text-xs",children:[r.jsx("option",{value:"all",children:"Todos os Tipos"}),r.jsx("option",{value:"Passaporte",children:"Passaporte"}),r.jsx("option",{value:"RG",children:"RG"}),r.jsx("option",{value:"CPF",children:"CPF"}),r.jsx("option",{value:"CNH",children:"CNH"}),r.jsx("option",{value:"Visto",children:"Visto"}),r.jsx("option",{value:"ESTA",children:"ESTA/ETA"}),r.jsx("option",{value:"Outro",children:"Outros"})]}),r.jsx(P,{placeholder:"Buscar...",value:de,onChange:B=>ke(B.target.value),className:"text-xs"})]})]}),pe.length===0?r.jsxs("div",{className:"py-16 text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 italic mb-3",children:"Nenhum documento encontrado"}),r.jsx(Z,{variant:"outline",size:"sm",onClick:F,children:"+ Adicionar primeiro documento"})]}):r.jsxs("div",{className:"space-y-4",children:[A.passports.length>0&&r.jsx(nl,{title:" Passaportes",count:A.passports.length,documents:A.passports,onEdit:B=>{_(B),N(!1)}}),A.identity.length>0&&r.jsx(nl,{title:" Identidade",count:A.identity.length,documents:A.identity,onEdit:B=>{_(B),N(!1)}}),A.entry.length>0&&r.jsx(nl,{title:" Entrada no Pas",count:A.entry.length,documents:A.entry,onEdit:B=>{_(B),N(!1)}}),A.others.length>0&&r.jsx(nl,{title:" Outros",count:A.others.length,documents:A.others,onEdit:B=>{_(B),N(!1)}})]})]})]}),r.jsx(ia,{isOpen:v,onClose:()=>w(!1),title:"Editar Viajante",size:"xl",children:r.jsx(vg,{trip:n,initialData:u,onCancel:()=>w(!1),onSave:async B=>{if(await oe.saveTraveler(B),B.documents&&B.documents.length>0)for(const te of B.documents)await oe.saveTravelerDocument({...te,travelerId:B.id});w(!1),await ge(),o()}})}),r.jsx(ia,{isOpen:O,onClose:()=>D(!1),title:"Selecione o tipo de documento",size:"lg",children:r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[{type:"Passaporte",icon:"",desc:"Documento internacional",color:"indigo"},{type:"RG",icon:"",desc:"Registro Geral",color:"blue"},{type:"CPF",icon:"",desc:"Cadastro de Pessoa Fsica",color:"green"},{type:"CNH",icon:"",desc:"Carteira de Habilitao",color:"purple"},{type:"Visto",icon:"",desc:"Autorizao de entrada",color:"yellow"},{type:"ESTA",icon:"",desc:"Autorizao eletrnica",color:"cyan"},{type:"Outro",icon:"",desc:"Documento customizado",color:"gray"}].map(({type:B,icon:te,desc:ie,color:ue})=>r.jsxs("button",{onClick:()=>se(B),className:"group relative p-6 bg-gray-950 hover:bg-gray-900 border border-gray-800 hover:border-indigo-500 rounded-xl transition-all text-left overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-600/0 via-indigo-600/0 to-indigo-600/0 group-hover:from-indigo-600/5 group-hover:via-indigo-600/10 group-hover:to-indigo-600/5 transition-all duration-300"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"text-4xl mb-3 transform group-hover:scale-110 transition-transform duration-200",children:te}),r.jsx("p",{className:"font-black text-white text-lg mb-1",children:B}),r.jsx("p",{className:"text-xs text-gray-500 leading-tight",children:ie})]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-indigo-600 to-purple-600 transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"})]},B))})}),j&&r.jsx(eb,{document:j,passports:f.filter(B=>B.docType==="Passaporte"),onClose:()=>{_(null),N(!1)},onSave:be,onDelete:q,onUpdateNumber:S,isNewDocument:y})]})},nl=({title:n,count:a,documents:i,onEdit:o})=>{const[u,h]=H.useState(!1),f=v=>{if(!v)return null;const w=new Date,j=new Date(v),_=Math.ceil((j.getTime()-w.getTime())/(1e3*60*60*24));return _<0?{color:"bg-red-600/20 text-red-400 border-red-600/30",textColor:"text-red-400",label:"Vencido"}:_<=30?{color:"bg-red-600/20 text-red-400 border-red-600/30",textColor:"text-red-400",label:`Vence em ${_}d`}:_<=90?{color:"bg-yellow-600/20 text-yellow-400 border-yellow-600/30",textColor:"text-yellow-400",label:`Vence em ${_}d`}:null},m=v=>v.issuerCountry||v.issuerState||v.regionOrCountry||"",g=v=>{if(v.docType==="Visto"&&v.visaCategory)return v.visaCategory;if(v.docType==="CNH"&&v.licenseCategory)return`Cat. ${v.licenseCategory}`;if(v.docType==="RG"&&(v.issuerAgency||v.issuerState)){const w=[];return v.issuerAgency&&w.push(v.issuerAgency),v.issuerState&&w.push(v.issuerState),w.join("/")}return v.docType==="Outro"&&v.customLabel?v.customLabel:v.docType==="Visto"&&v.entryType?v.entryType==="multiple"?"Mltiplas":"nica":null},x=i.filter(v=>f(v.expiryDate)!==null).length;return r.jsxs("div",{className:"border border-gray-800 rounded-xl overflow-hidden",children:[r.jsxs("button",{onClick:()=>h(!u),className:"w-full px-5 py-3 bg-gray-900/50 flex items-center justify-between hover:bg-gray-900 transition-all group",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-sm font-black text-gray-300 uppercase tracking-wide",children:n}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[r.jsxs("span",{children:[a," ",a===1?"item":"itens"]}),x>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsxs("span",{className:"text-amber-400 font-bold",children:[x," ",x===1?"alerta":"alertas"]})]})]})]}),r.jsx("svg",{className:`w-4 h-4 text-gray-600 transition-transform duration-200 ${u?"":"rotate-180"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),!u&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-900/30 border-b border-gray-800",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-5 py-2.5 text-left text-[10px] font-black text-gray-500 uppercase tracking-wider",children:"Tipo"}),r.jsx("th",{className:"px-5 py-2.5 text-left text-[10px] font-black text-gray-500 uppercase tracking-wider",children:"Emissor"}),r.jsx("th",{className:"px-5 py-2.5 text-left text-[10px] font-black text-gray-500 uppercase tracking-wider",children:"Nmero"}),r.jsx("th",{className:"px-5 py-2.5 text-left text-[10px] font-black text-gray-500 uppercase tracking-wider",children:"Validade"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-800",children:i.map(v=>{const w=f(v.expiryDate),j=m(v),_=g(v);return r.jsxs("tr",{onClick:()=>o(v),className:"hover:bg-gray-900/40 transition-colors cursor-pointer group",children:[r.jsx("td",{className:"px-5 py-3.5",children:r.jsxs("div",{className:"flex items-center gap-2.5",children:[r.jsx("span",{className:"text-xl",children:tb[v.docType]||""}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-bold text-white",children:v.docType}),_&&r.jsx("p",{className:"text-[10px] text-gray-500 mt-0.5",children:_}),v.isPrimary&&r.jsx("span",{className:"inline-block mt-1 text-[8px] px-1.5 py-0.5 bg-emerald-600/20 text-emerald-400 rounded uppercase font-bold border border-emerald-600/30",children:"Principal"})]})]})}),r.jsx("td",{className:"px-5 py-3.5",children:r.jsx("p",{className:"text-sm text-gray-300",children:j})}),r.jsx("td",{className:"px-5 py-3.5",children:r.jsx("p",{className:"text-sm font-mono text-white",children:ab(v.docNumber,v.docType)})}),r.jsx("td",{className:"px-5 py-3.5",children:v.expiryDate?r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("p",{className:`text-sm ${w?w.textColor:"text-gray-300"}`,children:mu(v.expiryDate)}),w&&r.jsx("span",{className:`inline-block text-[10px] px-2 py-0.5 rounded uppercase font-bold border ${w.color}`,children:w.label})]}):r.jsx("p",{className:"text-sm text-gray-600 italic",children:"Sem validade"})})]},v.id)})})]})})]})},nb=({trip:n,quote:a,vendor:i,onEdit:o,onBack:u,onRefresh:h,onNavigateToExpense:f,onNavigateToQuote:m})=>{const[g,x]=H.useState("summary"),[v,w]=H.useState([]),[j,_]=H.useState([]),[y,N]=H.useState(!1),[O,D]=H.useState(!1),[z,U]=H.useState(null);H.useEffect(()=>{E()},[a.id]);const E=async()=>{const[R,ae]=await Promise.all([oe.getQuoteVersions(a.id),oe.getQuotes(n.id)]);w(R),_(ae.filter(de=>de.originalId===(a.originalId||a.id)&&de.id!==a.id)),a.originalId?U(ae.find(de=>de.id===a.originalId)||null):U(null)},G=async R=>{R.preventDefault();const ae=new FormData(R.currentTarget),de={...a,totalAmount:Number(ae.get("totalAmount")),exchangeRate:Number(ae.get("exchangeRate")),validUntil:ae.get("validUntil"),amountBrl:Number(ae.get("totalAmount"))*Number(ae.get("exchangeRate"))};await oe.saveQuote(de),N(!1),h(),E()},W=async R=>{R.preventDefault();const ae=new FormData(R.currentTarget).get("label"),de=await oe.createQuoteVariation(a.id,ae);de&&(D(!1),m(de.id))},K=()=>{if(!z)return[];const R=[];return a.totalAmount!==z.totalAmount&&R.push(`Preo: ${a.totalAmount} vs ${z.totalAmount}`),a.linkUrl!==z.linkUrl&&R.push("Link/Opo diferente"),R};return r.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("button",{onClick:u,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[r.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Lista de Oramentos"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>N(!0),children:"Atualizar Valor"}),r.jsx(Z,{variant:"outline",onClick:()=>D(!0),children:"Criar Variao"}),r.jsx(Z,{variant:"outline",onClick:o,children:"Editar Completo"}),a.status!==Vt.CHOSEN&&r.jsx(Z,{variant:"primary",onClick:f,children:"Oficializar "})]})]}),a.originalId&&r.jsxs("div",{className:"bg-indigo-600/10 border border-indigo-500/20 p-4 rounded-xl flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xl",children:""}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-[10px] text-indigo-400 font-black uppercase",children:["Variao: ",a.variationLabel]}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Esta  uma opo alternativa de ",r.jsx("span",{className:"text-white font-bold cursor-pointer hover:underline",onClick:()=>m(a.originalId),children:z==null?void 0:z.title})]})]})]}),r.jsx("div",{className:"flex gap-2",children:K().map(R=>r.jsx(_e,{color:"indigo",children:R},R))})]}),r.jsxs("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-6 border-b border-gray-800",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx(_e,{color:"indigo",children:a.category}),r.jsx(_e,{color:a.status===Vt.CHOSEN?"green":"gray",children:a.status})]}),r.jsx("h1",{className:"text-4xl font-black text-white uppercase tracking-tighter leading-none",children:a.title}),r.jsx("p",{className:"text-lg text-gray-500 font-medium",children:a.provider})]}),r.jsx("div",{className:"flex gap-4",children:r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase",children:"Total BRL"}),r.jsxs("p",{className:"text-3xl font-black text-indigo-400",children:["R$ ",a.amountBrl.toLocaleString("pt-BR")]})]})})]}),r.jsx("div",{className:"flex border-b border-gray-800 overflow-x-auto",children:["summary","details","audit","variations","payment"].map(R=>r.jsx("button",{onClick:()=>x(R),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${g===R?"text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5":"text-gray-500 hover:text-gray-300"}`,children:R==="summary"?"Resumo":R==="details"?"Dados Tcnicos":R==="audit"?"Auditoria":R==="variations"?"Opes":"Pagamento"},R))}),r.jsxs("div",{className:"min-h-[400px]",children:[g==="summary"&&r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 animate-in fade-in duration-300",children:[r.jsx("div",{className:"lg:col-span-2 space-y-6",children:r.jsx(Ce,{title:"Escopo e Notas",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-emerald-500 uppercase",children:" Incluses"}),r.jsx("p",{className:"text-sm text-gray-400",children:a.includes||"N/D"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-[10px] font-black text-red-500 uppercase",children:" Excluses"}),r.jsx("p",{className:"text-sm text-gray-400",children:a.excludes||"N/D"})]})]})})}),r.jsx("div",{className:"space-y-6",children:r.jsxs(Ce,{title:"ltima Atualizao",children:[r.jsxs("p",{className:"text-xs text-gray-400",children:["Pelo usurio: ",r.jsx("span",{className:"text-white font-bold",children:a.createdBy})]}),r.jsxs("p",{className:"text-xs text-gray-400",children:["Em: ",lu(a.updatedAt)]})]})})]}),g==="audit"&&r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Linha do Tempo de Alteraes"}),r.jsxs("div",{className:"space-y-4",children:[v.map(R=>r.jsxs(Ce,{className:"!p-4 bg-gray-900/50",children:[r.jsxs("div",{className:"flex justify-between items-start mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-600/20 text-indigo-400 flex items-center justify-center text-[10px] font-bold",children:"V"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-black text-white",children:lu(R.createdAt)}),r.jsxs("p",{className:"text-[10px] text-gray-600 uppercase",children:["Alterado por ",R.createdBy]})]})]}),r.jsx(Z,{variant:"ghost",className:"text-[10px] py-1",onClick:async()=>{confirm("Deseja restaurar esta verso?")&&(await oe.restoreQuoteVersion(R.id),h(),E())},children:"Restaurar Verso"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.changes.map((ae,de)=>r.jsxs("div",{className:"text-xs p-2 bg-gray-950 rounded border border-gray-800",children:[r.jsx("p",{className:"font-bold text-gray-500 uppercase text-[9px] mb-1",children:ae.label}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-red-500 line-through",children:ae.old}),r.jsx("span",{className:"text-gray-600",children:""}),r.jsx("span",{className:"text-emerald-500 font-bold",children:ae.new})]})]},de))})]},R.id)),v.length===0&&r.jsx("p",{className:"text-center py-20 text-gray-600 italic",children:"Nenhuma alterao registrada ainda."})]})]}),g==="variations"&&r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Outras Opes Vinculadas"}),r.jsx(Z,{variant:"primary",onClick:()=>D(!0),children:"+ Criar Variao"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[j.map(R=>r.jsxs(Ce,{onClick:()=>m(R.id),className:"cursor-pointer hover:border-indigo-500 transition-all border-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx(_e,{color:"indigo",children:R.variationLabel||"Variao"}),r.jsxs("p",{className:"text-lg font-black text-white",children:["R$ ",R.amountBrl.toLocaleString("pt-BR")]})]}),r.jsx("h4",{className:"font-bold text-gray-400 mt-2",children:R.title})]},R.id)),j.length===0&&r.jsx("p",{className:"col-span-full text-center py-20 text-gray-600 italic",children:"Sem outras variaes."})]})]})]}),r.jsx(ia,{isOpen:y,onClose:()=>N(!1),title:"Atualizar Valores Rpido",children:r.jsxs("form",{onSubmit:G,className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Valor Original",name:"totalAmount",type:"number",step:"0.01",defaultValue:a.totalAmount}),r.jsx(P,{label:"Cmbio",name:"exchangeRate",type:"number",step:"0.01",defaultValue:a.exchangeRate})]}),r.jsx(P,{label:"Nova Validade",name:"validUntil",type:"date",defaultValue:nt(a.validUntil)}),r.jsxs("div",{className:"pt-4 border-t border-gray-800 flex justify-end gap-3",children:[r.jsx(Z,{variant:"ghost",type:"button",onClick:()=>N(!1),children:"Cancelar"}),r.jsx(Z,{variant:"primary",type:"submit",children:"Atualizar e Versionar"})]})]})}),r.jsx(ia,{isOpen:O,onClose:()=>D(!1),title:"Criar Nova Variao",children:r.jsxs("form",{onSubmit:W,className:"space-y-4",children:[r.jsx(P,{label:"Nome da Variao",name:"label",placeholder:"Ex: Com Seguro Total, Incluindo Caf...",required:!0}),r.jsx("p",{className:"text-xs text-gray-500",children:"Iremos copiar todos os dados do oramento atual para uma nova variao vinculada."}),r.jsxs("div",{className:"pt-4 border-t border-gray-800 flex justify-end gap-3",children:[r.jsx(Z,{variant:"ghost",type:"button",onClick:()=>D(!1),children:"Cancelar"}),r.jsx(Z,{variant:"primary",type:"submit",children:"Gerar Variao"})]})]})})]})},rb=({trip:n,vendor:a,onEdit:i,onBack:o,onRefresh:u,onNavigateToQuote:h,onCreateQuote:f})=>{const[m,g]=H.useState("info"),[x,v]=H.useState([]),[w,j]=H.useState([]),[_,y]=H.useState(!1),[N,O]=H.useState({category:a.categories[0]||"Geral",segmentId:"seg-all",notes:""});H.useEffect(()=>{D()},[a.id]);const D=async()=>{const[E,G]=await Promise.all([oe.getQuotes(n.id),oe.getVendorRequests(a.id)]);v(E.filter(W=>W.vendorId===a.id)),j(G)},z=()=>{var K;const E=((K=n.segments.find(R=>R.id===N.segmentId))==null?void 0:K.name)||"Toda a viagem",G=n.couples.reduce((R,ae)=>R+ae.members.length,0);let W=`Ol ${a.name},
Gostaria de solicitar um oramento para ${n.name}.

`;return W+=`*Contexto:* ${E}
`,W+=`*Pessoas:* ${G} viajantes totais.

`,N.category==="Hospedagem"?W+=`*Pedido de Hotel:*
- Check-in/out: Consultar datas do segmento
- Ocupao: Quartos para ${G} pessoas
- Requisitos: Caf incluso, Poltica de cancelamento flexvel.
`:N.category==="Ingressos/Atraes"?W+=`*Pedido de Ingressos:*
- Tipo: Consultar disponibilidade
- Adultos/Crianas: ${G} totais
`:W+=`*Pedido Geral:*
${N.notes||"- Solicito valores e condies conforme disponibilidade."}
`,W+=`
Aguardo retorno com valores e formas de pagamento.
Obrigado!`,W},U=async()=>{const E=a.contacts.find(K=>K.phone)||a.contacts[0];if(!(E!=null&&E.phone))return alert("Nenhum telefone cadastrado para este fornecedor.");const G=z();await oe.saveVendorRequest({id:"",tripId:n.id,vendorId:a.id,category:N.category,segmentId:N.segmentId,message:G,createdAt:""});const W=encodeURIComponent(G);window.open(`https://wa.me/${E.phone.replace(/\D/g,"")}?text=${W}`,"_blank"),y(!1),D()};return r.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-300",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("button",{onClick:o,className:"flex items-center gap-2 text-gray-400 hover:text-white transition-colors group",children:[r.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Lista de Fornecedores"})]}),r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>y(!0),children:" Pedir Oramento"}),r.jsx(Z,{variant:"outline",onClick:i,children:"Editar"}),r.jsx(Z,{variant:"primary",onClick:f,children:"+ Novo Oramento"})]})]}),r.jsx("header",{className:"flex flex-col md:flex-row md:items-end justify-between gap-6 pb-6 border-b border-gray-800",children:r.jsxs("div",{className:"space-y-2",children:[r.jsx("h1",{className:"text-4xl font-black text-white uppercase tracking-tighter leading-none",children:a.name}),r.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:a.categories.map(E=>r.jsx(_e,{color:"indigo",children:E},E))})]})}),r.jsx("div",{className:"flex border-b border-gray-800 overflow-x-auto",children:["info","contacts","terms","quotes","requests"].map(E=>r.jsx("button",{onClick:()=>g(E),className:`px-6 py-4 text-[10px] font-black uppercase tracking-widest transition-all whitespace-nowrap ${m===E?"text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5":"text-gray-500 hover:text-gray-300"}`,children:E==="info"?"Resumo":E==="contacts"?"Contatos":E==="terms"?"Condies":E==="quotes"?"Oramentos":"Pedidos Enviados"},E))}),r.jsxs("div",{className:"min-h-[400px]",children:[m==="info"&&r.jsxs(Ce,{title:"Dados Gerais",children:[r.jsx("p",{className:"text-sm text-gray-400",children:a.legalName||"Razo Social no informada"}),r.jsxs("div",{className:"mt-4 flex gap-4",children:[a.websiteUrl&&r.jsx(Z,{variant:"ghost",onClick:()=>window.open(a.websiteUrl,"_blank"),children:"Website"}),a.instagramUrl&&r.jsx(Z,{variant:"ghost",onClick:()=>window.open(`https://instagram.com/${a.instagramUrl}`,"_blank"),children:"Instagram"})]})]}),m==="requests"&&r.jsxs("div",{className:"space-y-4 animate-in fade-in duration-300",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest",children:"Histrico de Mensagens Enviadas"}),w.map(E=>r.jsxs(Ce,{className:"!p-4 !bg-gray-900/50",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx(_e,{color:"indigo",children:E.category}),r.jsx("span",{className:"text-[10px] text-gray-500 font-bold",children:lu(E.createdAt)})]}),r.jsx("pre",{className:"text-[10px] font-mono bg-black/50 p-4 rounded text-gray-400 whitespace-pre-wrap",children:E.message}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx(Z,{variant:"ghost",className:"text-[10px]",onClick:()=>{navigator.clipboard.writeText(E.message),alert("Copiado!")},children:"Copiar Novamente"})})]},E.id)),w.length===0&&r.jsx("p",{className:"text-center py-20 text-gray-600 italic",children:"Nenhum pedido enviado ainda."})]}),m==="quotes"&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 animate-in fade-in duration-300",children:x.map(E=>r.jsxs(Ce,{onClick:()=>h(E.id),className:"cursor-pointer hover:border-indigo-500 transition-all border-2",children:[r.jsx("h4",{className:"font-black text-white uppercase",children:E.title}),r.jsxs("p",{className:"text-sm font-bold text-indigo-400",children:["R$ ",E.amountBrl.toLocaleString("pt-BR")]})]},E.id))})]}),r.jsx(ia,{isOpen:_,onClose:()=>y(!1),title:"Gerador de Pedido de Oramento",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx(P,{as:"select",label:"Categoria do Oramento",value:N.category,onChange:E=>O({...N,category:E.target.value}),children:n.categories.map(E=>r.jsx("option",{value:E,children:E},E))}),r.jsxs(P,{as:"select",label:"Segmento de Referncia",value:N.segmentId,onChange:E=>O({...N,segmentId:E.target.value}),children:[r.jsx("option",{value:"seg-all",children:"Geral (Toda Viagem)"}),n.segments.map(E=>r.jsx("option",{value:E.id,children:E.name},E.id))]}),r.jsx(P,{as:"textarea",label:"Notas Adicionais",rows:3,value:N.notes,onChange:E=>O({...N,notes:E.target.value}),placeholder:"Ex: Preferncia por andar alto, carro SUV..."})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase",children:"Preview da Mensagem"}),r.jsxs("div",{className:"bg-emerald-950/20 border border-emerald-500/20 rounded-xl p-4 min-h-[250px] flex flex-col",children:[r.jsx("pre",{className:"text-[10px] font-mono text-gray-300 whitespace-pre-wrap flex-1",children:z()}),r.jsxs("div",{className:"pt-4 flex gap-2",children:[r.jsx(Z,{variant:"ghost",className:"flex-1 text-[10px]",onClick:()=>{navigator.clipboard.writeText(z()),alert("Copiado!")},children:"Copiar Texto"}),r.jsx(Z,{variant:"primary",className:"flex-1 text-[10px] bg-emerald-600 hover:bg-emerald-700",onClick:U,children:"Abrir WhatsApp "})]})]})]})]})})]})},ib=({trip:n,vendors:a,initialData:i,onSave:o,onCancel:u})=>{var j,_;const[h,f]=H.useState(1),[m,g]=H.useState({tripId:n.id,currency:Wt.BRL,exchangeRate:1,status:Vt.DRAFT,tags:[],participantIds:["ALL"],totalAmount:0,amountBrl:0,category:n.categories[0],segmentId:"seg-all",paymentTerms:{methods:[Oa.PIX],installments:1,installmentValue:0},attachments:[],completeness:0,...i}),x=H.useMemo(()=>{var z,U,E,G;const y=m,N={base:!!(y.title&&y.category&&y.vendorId&&y.totalAmount&&y.validUntil&&y.cancellationPolicy),hotel:y.category==="Hospedagem"?!!((z=y.hotelDetails)!=null&&z.checkin&&((U=y.hotelDetails)!=null&&U.checkout)):!0,ticket:y.category==="Ingressos/Atraes"?!!((E=y.ticketDetails)!=null&&E.kind):!0,car:y.category==="Aluguel de Carro"?!!((G=y.carDetails)!=null&&G.pickupDateTime):!0},O=Object.keys(N).length,D=Object.values(N).filter(Boolean).length;return Math.round(D/O*100)},[m]);H.useEffect(()=>{g(y=>({...y,completeness:x}))},[x]),H.useEffect(()=>{m.currency===Wt.BRL&&m.exchangeRate!==1&&g(y=>({...y,exchangeRate:1}))},[m.currency]),H.useEffect(()=>{var z;const y=m.totalAmount||0,N=m.currency===Wt.BRL?1:m.exchangeRate||1,O=y*N,D=O/(((z=m.paymentTerms)==null?void 0:z.installments)||1);g(U=>({...U,amountBrl:O,paymentTerms:{...U.paymentTerms,installmentValue:D}}))},[m.totalAmount,m.currency,m.exchangeRate,(j=m.paymentTerms)==null?void 0:j.installments]);const v=[{id:1,title:"Bsico"},{id:2,title:"Valores"},{id:3,title:"Pagamento"},{id:4,title:"Detalhes"},{id:5,title:"Participantes"},{id:6,title:"Regras"}],w=()=>{var y,N,O,D,z,U,E,G,W,K,R,ae,de,ke,ge,qe,be,q;switch(h){case 1:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[r.jsx(P,{label:"Ttulo do Oramento *",value:m.title,onChange:S=>g({...m,title:S.target.value}),placeholder:"Ex: Voo Ida - LATAM Premium"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{as:"select",label:"Categoria *",value:m.category,onChange:S=>g({...m,category:S.target.value}),children:n.categories.map(S=>r.jsx("option",{value:S,children:S},S))}),r.jsxs(P,{as:"select",label:"Segmento",value:m.segmentId,onChange:S=>g({...m,segmentId:S.target.value}),children:[r.jsx("option",{value:"seg-all",children:"Geral (Toda Viagem)"}),n.segments.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]})]}),r.jsxs(P,{as:"select",label:"Fornecedor *",value:m.vendorId,onChange:S=>{const F=a.find(se=>se.id===S.target.value);g({...m,vendorId:S.target.value,provider:F==null?void 0:F.name})},children:[r.jsx("option",{value:"",children:"Selecione um fornecedor..."}),a.map(S=>r.jsx("option",{value:S.id,children:S.name},S.id))]}),r.jsxs("div",{className:"flex gap-2 items-end",children:[r.jsx(P,{label:"Link do Oramento (URL)",className:"flex-1",value:m.linkUrl,onChange:S=>g({...m,linkUrl:S.target.value})}),m.linkUrl&&r.jsx(Z,{variant:"secondary",onClick:()=>window.open(m.linkUrl,"_blank"),children:"Abrir"})]})]});case 2:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs(P,{as:"select",label:"Moeda *",value:m.currency,onChange:S=>g({...m,currency:S.target.value}),children:[r.jsx("option",{value:Wt.BRL,children:"BRL (Real)"}),r.jsx("option",{value:Wt.USD,children:"USD (Dlar)"})]}),r.jsx(P,{label:"Cmbio *",type:"number",step:"0.01",value:m.exchangeRate,disabled:m.currency===Wt.BRL,onChange:S=>g({...m,exchangeRate:Number(S.target.value)})})]}),r.jsx(P,{label:"Valor Total (Moeda Original) *",type:"number",step:"0.01",value:m.totalAmount,onChange:S=>g({...m,totalAmount:Number(S.target.value)})}),r.jsx(P,{label:"Taxas e Impostos Opcionais",type:"number",step:"0.01",value:m.taxesFees,onChange:S=>g({...m,taxesFees:Number(S.target.value)})}),r.jsxs("div",{className:"p-4 bg-indigo-500/10 border border-indigo-500/20 rounded-xl",children:[r.jsx("p",{className:"text-xs font-bold text-indigo-400 uppercase mb-1",children:"Total em Reais"}),r.jsxs("p",{className:"text-3xl font-black text-white",children:["R$ ",(y=m.amountBrl)==null?void 0:y.toLocaleString("pt-BR")]})]})]});case 3:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Mtodos Aceitos"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(Oa).map(S=>{var F;return r.jsx("button",{onClick:()=>{var A;const se=((A=m.paymentTerms)==null?void 0:A.methods)||[],pe=se.includes(S)?se.filter(T=>T!==S):[...se,S];g({...m,paymentTerms:{...m.paymentTerms,methods:pe}})},className:`px-3 py-1.5 rounded-lg text-xs font-bold border transition-all ${(F=m.paymentTerms)!=null&&F.methods.includes(S)?"bg-indigo-600 border-indigo-400 text-white":"bg-gray-950 border-gray-800 text-gray-500"}`,children:S},S)})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Parcelas (Max)",type:"number",min:"1",max:"12",value:(N=m.paymentTerms)==null?void 0:N.installments,onChange:S=>g({...m,paymentTerms:{...m.paymentTerms,installments:Number(S.target.value)}})}),r.jsx(P,{label:"Valor da Parcela",value:`R$ ${(O=m.paymentTerms)==null?void 0:O.installmentValue.toLocaleString("pt-BR")}`,disabled:!0})]}),r.jsx(P,{label:"Desconto  Vista (Valor)",type:"number",value:(D=m.paymentTerms)==null?void 0:D.cashDiscount,onChange:S=>g({...m,paymentTerms:{...m.paymentTerms,cashDiscount:Number(S.target.value)}})})]});case 4:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[m.category==="Ingressos/Atraes"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs(P,{as:"select",label:"Tipo",value:(z=m.ticketDetails)==null?void 0:z.kind,onChange:S=>g({...m,ticketDetails:{...m.ticketDetails,kind:S.target.value}}),children:[r.jsx("option",{value:"Parque",children:"Parque"}),r.jsx("option",{value:"Show",children:"Show"}),r.jsx("option",{value:"Jogo",children:"Jogo"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 bg-gray-950 p-4 rounded-xl border border-gray-800",children:[r.jsx(P,{label:"Qtd Adultos",type:"number",value:(U=m.ticketDetails)==null?void 0:U.adultQty,onChange:S=>g({...m,ticketDetails:{...m.ticketDetails,adultQty:Number(S.target.value)}})}),r.jsx(P,{label:"Preo Unit. Adulto",type:"number",value:(E=m.ticketDetails)==null?void 0:E.adultPrice,onChange:S=>g({...m,ticketDetails:{...m.ticketDetails,adultPrice:Number(S.target.value)}})})]}),r.jsx(Z,{variant:"ghost",className:"w-full text-[10px]",onClick:()=>{const S=m.ticketDetails,F=S.adultQty*S.adultPrice+S.childQty*S.childPrice;g({...m,totalAmount:F})},children:"Calcular total pelo detalhamento"})]}),m.category==="Hospedagem"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Check-in",type:"date",value:(G=m.hotelDetails)==null?void 0:G.checkin,onChange:S=>g({...m,hotelDetails:{...m.hotelDetails,checkin:S.target.value}})}),r.jsx(P,{label:"Check-out",type:"date",value:(W=m.hotelDetails)==null?void 0:W.checkout,onChange:S=>g({...m,hotelDetails:{...m.hotelDetails,checkout:S.target.value}})}),r.jsx(P,{label:"Tipo Quarto",value:(K=m.hotelDetails)==null?void 0:K.roomType,onChange:S=>g({...m,hotelDetails:{...m.hotelDetails,roomType:S.target.value}})}),r.jsxs("div",{className:"flex items-center gap-2 mt-6",children:[r.jsx("input",{type:"checkbox",checked:(R=m.hotelDetails)==null?void 0:R.breakfastIncluded,onChange:S=>g({...m,hotelDetails:{...m.hotelDetails,breakfastIncluded:S.target.checked}})}),r.jsx("span",{className:"text-sm",children:"Caf da Manh?"})]})]}),m.category==="Aluguel de Carro"&&r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Retirada",type:"datetime-local",value:(ae=m.carDetails)==null?void 0:ae.pickupDateTime,onChange:S=>g({...m,carDetails:{...m.carDetails,pickupDateTime:S.target.value}})}),r.jsx(P,{label:"Devoluo",type:"datetime-local",value:(de=m.carDetails)==null?void 0:de.dropoffDateTime,onChange:S=>g({...m,carDetails:{...m.carDetails,dropoffDateTime:S.target.value}})}),r.jsx(P,{label:"Classe do Carro",value:(ke=m.carDetails)==null?void 0:ke.carClass,onChange:S=>g({...m,carDetails:{...m.carDetails,carClass:S.target.value}})}),r.jsx(P,{label:"Franquia (Deductible)",type:"number",value:(ge=m.carDetails)==null?void 0:ge.deductible,onChange:S=>g({...m,carDetails:{...m.carDetails,deductible:Number(S.target.value)}})})]}),!["Hospedagem","Ingressos/Atraes","Aluguel de Carro"].includes(m.category||"")&&r.jsx("p",{className:"text-gray-500 italic text-center py-10",children:"Categoria genrica: use notas para detalhes adicionais."})]});case 5:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>g({...m,participantIds:["ALL"]}),className:`p-4 rounded-xl border text-left ${(qe=m.participantIds)!=null&&qe.includes("ALL")?"bg-indigo-600 border-indigo-400":"bg-gray-950 border-gray-800 text-gray-500"}`,children:[r.jsx("p",{className:"font-bold",children:"Todos"}),r.jsx("p",{className:"text-[10px]",children:"Toda a viagem"})]}),r.jsxs("button",{onClick:()=>g({...m,participantIds:[]}),className:`p-4 rounded-xl border text-left ${(be=m.participantIds)!=null&&be.includes("ALL")?"bg-gray-950 border-gray-800 text-gray-500":"bg-indigo-600 border-indigo-400"}`,children:[r.jsx("p",{className:"font-bold",children:"Selecionar"}),r.jsx("p",{className:"text-[10px]",children:"Escolher casais"})]})]}),!((q=m.participantIds)!=null&&q.includes("ALL"))&&r.jsx("div",{className:"space-y-2 mt-4",children:n.couples.map(S=>{var F;return r.jsxs("label",{className:"flex items-center justify-between p-3 bg-gray-950 rounded-lg border border-gray-800 cursor-pointer hover:border-gray-600",children:[r.jsx("span",{className:"text-sm font-medium",children:S.name}),r.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-500",checked:(F=m.participantIds)==null?void 0:F.includes(S.id),onChange:se=>{const pe=m.participantIds||[],A=se.target.checked?[...pe,S.id]:pe.filter(T=>T!==S.id);g({...m,participantIds:A})}})]},S.id)})})]});case 6:return r.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right-4 duration-300",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Validade *",type:"date",value:m.validUntil,onChange:S=>g({...m,validUntil:S.target.value})}),r.jsxs(P,{as:"select",label:"Poltica Cancelamento *",value:m.cancellationPolicy,onChange:S=>g({...m,cancellationPolicy:S.target.value}),children:[r.jsx("option",{value:"Reembolsvel",children:"Reembolsvel Total"}),r.jsx("option",{value:"Parcial",children:"Parcial"}),r.jsx("option",{value:"No Reembolsvel",children:"No Reembolsvel"})]})]}),r.jsx(P,{as:"textarea",label:"O que INCLUI",rows:2,value:m.includes,onChange:S=>g({...m,includes:S.target.value})}),r.jsx(P,{as:"textarea",label:"O que EXCLUI",rows:2,value:m.excludes,onChange:S=>g({...m,excludes:S.target.value})}),r.jsx(P,{as:"textarea",label:"Notas p/ Grupo",rows:2,value:m.notesGroup,onChange:S=>g({...m,notesGroup:S.target.value})})]});default:return null}};return r.jsxs("div",{className:"flex flex-col lg:flex-row gap-8 min-h-[600px]",children:[r.jsxs("div",{className:"flex-1 flex flex-col",children:[r.jsx("div",{className:"flex justify-between items-center mb-10 overflow-x-auto pb-4",children:v.map(y=>r.jsxs("button",{onClick:()=>f(y.id),className:`flex flex-col items-center gap-2 group transition-all px-4 ${h===y.id?"opacity-100 scale-105":"opacity-40 hover:opacity-70"}`,children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold text-xs border-2 ${h===y.id?"bg-indigo-600 border-indigo-400 text-white shadow-lg":"bg-gray-900 border-gray-700"}`,children:y.id}),r.jsx("span",{className:`text-[9px] uppercase font-black tracking-widest ${h===y.id?"text-indigo-400":"text-gray-500"}`,children:y.title})]},y.id))}),r.jsx("div",{className:"flex-1",children:w()}),r.jsxs("div",{className:"flex justify-between mt-10 pt-6 border-t border-gray-800",children:[r.jsx(Z,{variant:"ghost",onClick:()=>h>1?f(h-1):u(),children:h===1?"Cancelar":"Voltar"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"secondary",onClick:()=>o(m),children:"Salvar Rascunho"}),h<6?r.jsx(Z,{onClick:()=>f(h+1),children:"Prximo Passo"}):r.jsx(Z,{variant:"primary",onClick:()=>o({...m,status:Vt.SHORTLIST}),children:"Finalizar e Shortlist"})]})]})]}),r.jsx("div",{className:"w-full lg:w-80 space-y-4 sticky top-4 h-fit",children:r.jsx(Ce,{title:"Resumo ao Vivo",className:"!bg-gray-950/50 border-gray-800",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(_e,{color:"indigo",children:m.category}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-[10px] text-gray-600 font-bold uppercase",children:"Completude"}),r.jsxs("p",{className:`text-sm font-black ${m.completeness===100?"text-emerald-500":"text-amber-500"}`,children:[m.completeness,"%"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-white leading-tight",children:m.title||"Sem ttulo"}),r.jsx("p",{className:"text-xs text-gray-500 font-medium",children:m.provider||"Sem fornecedor"})]}),r.jsxs("div",{className:"p-3 bg-gray-900 rounded-xl space-y-1",children:[r.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Impacto Financeiro"}),r.jsxs("p",{className:"text-2xl font-black text-white",children:["R$ ",(_=m.amountBrl)==null?void 0:_.toLocaleString("pt-BR")]}),r.jsxs("p",{className:"text-[10px] text-gray-600",children:["Por casal: R$ ",((m.amountBrl||0)/3).toLocaleString("pt-BR")]})]}),r.jsxs("div",{className:"space-y-2 pt-4 border-t border-gray-800",children:[r.jsx("p",{className:"text-[10px] text-gray-500 font-bold uppercase",children:"Checklist"}),r.jsxs("ul",{className:"space-y-1",children:[r.jsx(rl,{label:"Campos Bsicos",checked:!!(m.title&&m.vendorId)}),r.jsx(rl,{label:"Financeiro",checked:!!m.totalAmount}),r.jsx(rl,{label:"Regras & Validade",checked:!!(m.validUntil&&m.cancellationPolicy)}),r.jsx(rl,{label:"Participantes",checked:m.participantIds&&m.participantIds.length>0})]})]})]})})})]})},rl=({label:n,checked:a})=>r.jsxs("li",{className:"flex items-center gap-2 text-[10px] font-bold",children:[r.jsx("div",{className:`w-3 h-3 rounded-full flex items-center justify-center border ${a?"bg-emerald-500 border-emerald-400":"border-gray-700"}`,children:a&&r.jsx("span",{className:"text-white text-[8px]",children:""})}),r.jsx("span",{className:a?"text-gray-300":"text-gray-600",children:n})]}),lb=({trip:n,initialData:a,onSave:i,onCancel:o})=>{var j,_;const[u,h]=H.useState({tripId:n.id,status:"Ativo",categories:[],rating:3,preferred:!1,tags:[],riskFlags:[],contacts:[],attachments:[],...a}),[f,m]=H.useState("info"),g=y=>{const N=u.contacts||[],O=N.findIndex(z=>z.id===y.id),D=[...N];O>=0?D[O]=y:D.push({...y,id:Math.random().toString(36).substr(2,9)}),h({...u,contacts:D})},x=y=>{h({...u,contacts:(u.contacts||[]).filter(N=>N.id!==y)})},v=u.name&&u.name.trim().length>0,w=["Taxas ocultas","Reembolso difcil","Atraso na resposta","Preo instvel","Comunicao difcil"];return r.jsxs("div",{className:"flex flex-col h-full bg-gray-950 border border-gray-800 rounded-2xl overflow-hidden shadow-2xl animate-in slide-in-from-right-10 duration-500",children:[r.jsxs("header",{className:"p-6 bg-gray-900 border-b border-gray-800 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tighter",children:a!=null&&a.id?"Editar Fornecedor":"Novo Fornecedor"}),r.jsxs("p",{className:"text-xs text-gray-500 font-bold uppercase tracking-widest mt-1",children:["Viagem: ",n.name]})]}),r.jsx(_e,{color:u.preferred?"indigo":"gray",children:u.preferred?" Favorito":"Fornecedor Comum"})]}),r.jsx("div",{className:"flex border-b border-gray-800 bg-gray-900/50",children:["info","contacts","terms"].map(y=>r.jsx("button",{onClick:()=>m(y),className:`flex-1 py-3 text-[10px] font-black uppercase tracking-widest transition-all ${f===y?"text-indigo-400 border-b-2 border-indigo-500 bg-indigo-500/5":"text-gray-500 hover:text-gray-300"}`,children:y==="info"?"Identificao":y==="contacts"?"Contatos":"Polticas"},y))}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-8 custom-scrollbar",children:[f==="info"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsx(P,{label:"Nome do Fornecedor *",value:u.name,onChange:y=>h({...u,name:y.target.value}),placeholder:"Ex: Hilton Orlando"}),r.jsx(P,{label:"Razo Social / Legal",value:u.legalName,onChange:y=>h({...u,legalName:y.target.value}),placeholder:"Nome completo da empresa"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Categorias de Servio"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:n.categories.map(y=>{var N;return r.jsx("button",{onClick:()=>{const O=u.categories||[],D=O.includes(y)?O.filter(z=>z!==y):[...O,y];h({...u,categories:D})},className:`px-3 py-1.5 rounded-xl text-[10px] font-bold uppercase transition-all border ${(N=u.categories)!=null&&N.includes(y)?"bg-indigo-600 border-indigo-400 text-white":"bg-gray-950 border-gray-800 text-gray-500 hover:border-gray-600"}`,children:y},y)})})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400",children:"Rating (Confiabilidade)"}),r.jsx("div",{className:"flex gap-2 p-2 bg-gray-950 border border-gray-800 rounded-lg",children:[1,2,3,4,5].map(y=>r.jsx("button",{onClick:()=>h({...u,rating:y}),className:`text-xl transition-all ${u.rating>=y?"text-amber-400":"text-gray-800"}`,children:""},y))})]}),r.jsx("div",{className:"flex items-end h-full",children:r.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-950 border border-gray-800 rounded-xl cursor-pointer w-full",children:[r.jsx("input",{type:"checkbox",className:"w-5 h-5 accent-indigo-500",checked:u.preferred,onChange:y=>h({...u,preferred:y.target.checked})}),r.jsx("span",{className:"text-sm font-bold text-gray-300",children:"Marcar como Favorito"})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(P,{label:"Website",value:u.websiteUrl,onChange:y=>h({...u,websiteUrl:y.target.value}),placeholder:"https://..."}),r.jsx(P,{label:"Instagram",value:u.instagramUrl,onChange:y=>h({...u,instagramUrl:y.target.value}),placeholder:"@perfil"})]})]}),f==="contacts"&&r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-300",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase",children:"Equipe de Atendimento"}),r.jsx(Z,{variant:"outline",className:"text-[10px] py-1",onClick:()=>g({id:"",name:"",role:"Comercial",preferredMethod:"WhatsApp",isPrimary:!1}),children:"+ Novo Contato"})]}),r.jsxs("div",{className:"space-y-3",children:[(u.contacts||[]).map(y=>r.jsxs("div",{className:"p-4 bg-gray-900 border border-gray-800 rounded-2xl space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3",children:[r.jsx(P,{label:"Nome",value:y.name,onChange:N=>g({...y,name:N.target.value})}),r.jsx(P,{label:"Cargo/Setor",value:y.role,onChange:N=>g({...y,role:N.target.value})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-2",children:"WhatsApp/Fone"}),r.jsx(xg,{value:y.phone||"",onChange:N=>g({...y,phone:N}),placeholder:"(00) 00000-0000",className:"w-full px-4 py-2.5 bg-gray-950 border border-gray-800 rounded-xl text-white placeholder-gray-600 focus:outline-none focus:border-indigo-500 transition-colors"})]}),r.jsx(P,{label:"Email",value:y.email,onChange:N=>g({...y,email:N.target.value})})]}),r.jsx("button",{onClick:()=>x(y.id),className:"ml-4 text-red-500/50 hover:text-red-500 p-2",children:""})]}),r.jsxs("div",{className:"flex items-center gap-4 pt-2 border-t border-gray-800",children:[r.jsxs("label",{className:"flex items-center gap-2 text-xs font-medium text-gray-500",children:[r.jsx("input",{type:"checkbox",checked:y.isPrimary,onChange:N=>g({...y,isPrimary:N.target.checked}),className:"accent-indigo-500"}),"Principal"]}),r.jsx("div",{className:"flex gap-2",children:["WhatsApp","Email","Telefone"].map(N=>r.jsx("button",{onClick:()=>g({...y,preferredMethod:N}),className:`px-2 py-1 rounded text-[9px] font-black uppercase border transition-all ${y.preferredMethod===N?"bg-indigo-600 border-indigo-400 text-white":"bg-gray-950 border-gray-800 text-gray-600"}`,children:N},N))})]})]},y.id)),(u.contacts||[]).length===0&&r.jsx("p",{className:"text-center py-10 text-gray-600 italic text-sm",children:"Nenhum contato cadastrado."})]})]}),f==="terms"&&r.jsxs("div",{className:"space-y-8 animate-in fade-in duration-300",children:[r.jsxs("section",{className:"space-y-4",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase",children:"Flags de Risco / Alertas"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:w.map(y=>{var N;return r.jsx("button",{onClick:()=>{const O=u.riskFlags||[],D=O.includes(y)?O.filter(z=>z!==y):[...O,y];h({...u,riskFlags:D})},className:`px-3 py-1.5 rounded-xl text-[10px] font-bold border transition-all ${(N=u.riskFlags)!=null&&N.includes(y)?"bg-red-600/10 border-red-500/40 text-red-400":"bg-gray-950 border-gray-800 text-gray-600 hover:border-gray-700"}`,children:y},y)})})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-500 uppercase",children:"Termos de Pagamento Padro"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsx(P,{label:"Max Parcelamento",type:"number",min:"1",value:(j=u.paymentTermsDefault)==null?void 0:j.installmentsMax,onChange:y=>h({...u,paymentTermsDefault:{...u.paymentTermsDefault,installmentsMax:Number(y.target.value)}})}),r.jsx(P,{label:"% Desconto  Vista",type:"number",min:"0",value:(_=u.paymentTermsDefault)==null?void 0:_.cashDiscountPercent,onChange:y=>h({...u,paymentTermsDefault:{...u.paymentTermsDefault,cashDiscountPercent:Number(y.target.value),cashDiscountPossible:Number(y.target.value)>0}})})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"text-[10px] font-black text-gray-500 uppercase",children:"Mtodos aceitos"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(Oa).map(y=>{var N;return r.jsx("button",{onClick:()=>{var z;const O=((z=u.paymentTermsDefault)==null?void 0:z.methods)||[],D=O.includes(y)?O.filter(U=>U!==y):[...O,y];h({...u,paymentTermsDefault:{...u.paymentTermsDefault,methods:D}})},className:`px-3 py-1.5 rounded-lg text-[9px] font-black border transition-all ${(N=u.paymentTermsDefault)!=null&&N.methods.includes(y)?"bg-emerald-600 border-emerald-400 text-white":"bg-gray-950 border-gray-800 text-gray-600"}`,children:y},y)})})]})]}),r.jsxs("section",{className:"space-y-4",children:[r.jsx(P,{as:"textarea",label:"Notas de Cancelamento",rows:2,value:u.cancellationPolicyNotes,onChange:y=>h({...u,cancellationPolicyNotes:y.target.value}),placeholder:"Ex: Reembolsvel at 48h antes..."}),r.jsx(P,{label:"SLA de Resposta",value:u.slaNotes,onChange:y=>h({...u,slaNotes:y.target.value}),placeholder:"Ex: Responde em 2h"})]})]})]}),r.jsxs("footer",{className:"p-6 bg-gray-900 border-t border-gray-800 flex justify-end gap-3",children:[r.jsx(Z,{variant:"ghost",onClick:o,children:"Cancelar"}),r.jsx(Z,{variant:"primary",onClick:()=>i(u),disabled:!v,children:"Salvar Fornecedor"})]})]})},ob=({trip:n,quotes:a,onBack:i,onRefresh:o,onNavigateToQuote:u})=>{const[h,f]=H.useState(!1),m=H.useMemo(()=>[...a].sort((_,y)=>_.amountBrl-y.amountBrl),[a]),g=n.couples.reduce((_,y)=>_+y.members.length,0),x=_=>{if(a.length<2)return!1;const y=_(a[0]);return!a.every(N=>_(N)===y)},v=[{label:"Fornecedor",accessor:_=>_.provider},{label:"Status",accessor:_=>_.status},{label:"Total Original",accessor:_=>`${_.currency} ${_.totalAmount.toLocaleString("pt-BR")}`},{label:"Total BRL",accessor:_=>`R$ ${_.amountBrl.toLocaleString("pt-BR")}`,critical:!0},{label:"Custo por Pessoa",accessor:_=>`R$ ${(_.amountBrl/g).toFixed(2)}`},{label:"Cmbio Aplicado",accessor:_=>_.currency===Wt.BRL?"-":`R$ ${_.exchangeRate}`},{label:"Vencimento",accessor:_=>new Date(_.validUntil).toLocaleDateString("pt-BR")},{label:"Cancelamento",accessor:_=>_.cancellationPolicy},{label:"Parcelas",accessor:_=>`${_.paymentTerms.installments}x`},{label:"Desconto  Vista",accessor:_=>_.paymentTerms.cashDiscount?`R$ ${_.paymentTerms.cashDiscount}`:"Nenhum"},{label:"Completude",accessor:_=>`${_.completeness}%`}],w=async _=>{const y=a.find(N=>N.id===_);y&&(await oe.saveQuote({...y,status:Vt.SHORTLIST}),o())},j=async()=>{await oe.saveComparison({id:"",tripId:n.id,quoteIds:a.map(_=>_.id),createdAt:""}),alert("Comparao salva no histrico!")};return r.jsxs("div",{className:"space-y-6 animate-in fade-in zoom-in-95 duration-500 pb-20",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("button",{onClick:i,className:"flex items-center gap-2 text-gray-400 hover:text-white group",children:[r.jsx("svg",{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),r.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Voltar para a Lista"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{variant:"outline",onClick:()=>f(!h),children:h?"Mostrar Tudo":"Apenas Diferenas"}),r.jsx(Z,{variant:"primary",onClick:j,children:"Salvar Comparao"})]})]}),r.jsx("div",{className:"overflow-x-auto rounded-2xl border border-gray-800 bg-gray-900 shadow-2xl",children:r.jsxs("table",{className:"w-full border-collapse text-left min-w-[800px]",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"bg-gray-950",children:[r.jsx("th",{className:"p-6 border-b border-gray-800 sticky left-0 bg-gray-950 z-10 w-48",children:r.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase",children:"Atributo"})}),m.map(_=>r.jsx("th",{className:"p-6 border-b border-gray-800 min-w-[250px]",children:r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsx(_e,{color:"indigo",children:_.category}),r.jsx("button",{onClick:()=>u(_.id),className:"text-[10px] text-indigo-400 font-bold hover:underline",children:"Detalhes "})]}),r.jsx("h4",{className:"text-sm font-black text-white uppercase truncate",children:_.title})]})},_.id))]})}),r.jsxs("tbody",{className:"divide-y divide-gray-800",children:[v.map((_,y)=>{const N=x(_.accessor);return h&&!N?null:r.jsxs("tr",{className:`group hover:bg-gray-800/20 transition-colors ${N?"bg-indigo-500/5":""}`,children:[r.jsx("td",{className:"p-4 border-r border-gray-800 font-bold text-xs text-gray-500 uppercase tracking-tighter sticky left-0 bg-gray-900 group-hover:bg-gray-800 transition-colors z-10",children:r.jsxs("div",{className:"flex items-center gap-2",children:[_.label,N&&r.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500",title:"Diferena detectada"})]})}),m.map(O=>r.jsx("td",{className:`p-4 text-sm ${_.critical?"font-black text-white":"text-gray-400"}`,children:_.accessor(O)},O.id))]},y)}),a.every(_=>_.category==="Hospedagem")&&r.jsxs(r.Fragment,{children:[r.jsx("tr",{className:"bg-gray-950/50",children:r.jsx("td",{colSpan:a.length+1,className:"p-2 text-[8px] font-black text-gray-700 uppercase tracking-widest text-center",children:"Especificaes de Hotel"})}),r.jsxs("tr",{className:"hover:bg-gray-800/20",children:[r.jsx("td",{className:"p-4 border-r border-gray-800 font-bold text-xs text-gray-500 uppercase sticky left-0 bg-gray-900",children:"Caf da Manh"}),m.map(_=>{var y;return r.jsx("td",{className:"p-4 text-sm text-gray-400",children:(y=_.hotelDetails)!=null&&y.breakfastIncluded?r.jsx(_e,{color:"green",children:"Incluso"}):r.jsx(_e,{color:"red",children:"No incluso"})},_.id)})]}),r.jsxs("tr",{className:"hover:bg-gray-800/20",children:[r.jsx("td",{className:"p-4 border-r border-gray-800 font-bold text-xs text-gray-500 uppercase sticky left-0 bg-gray-900",children:"Tipo de Quarto"}),m.map(_=>{var y;return r.jsx("td",{className:"p-4 text-sm text-gray-400",children:((y=_.hotelDetails)==null?void 0:y.roomType)||"-"},_.id)})]})]}),r.jsxs("tr",{children:[r.jsx("td",{className:"p-4 border-r border-gray-800 font-bold text-xs text-gray-500 uppercase sticky left-0 bg-gray-900 z-10",children:"Deciso"}),m.map(_=>r.jsxs("td",{className:"p-4",children:[_.status!==Vt.CHOSEN&&r.jsxs("div",{className:"space-y-2",children:[r.jsx(Z,{variant:"outline",className:"w-full text-[10px] py-1",onClick:()=>w(_.id),children:"Votar / Shortlist"}),r.jsx(Z,{variant:"ghost",className:"w-full text-[10px] py-1 text-red-400",children:"Descartar"})]}),_.status===Vt.CHOSEN&&r.jsx(_e,{color:"green",children:"Vencedora "})]},_.id))]})]})]})})]})},Kc=({onCreateTrip:n,onEnter:a,hasTrip:i})=>{const o=()=>{var u;(u=document.getElementById("como-funciona"))==null||u.scrollIntoView({behavior:"smooth"})};return r.jsxs("section",{className:"relative w-full h-[95vh] md:h-screen overflow-hidden flex items-center justify-center bg-[#02040a]",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("video",{autoPlay:!0,muted:!0,loop:!0,playsInline:!0,poster:"https://images.unsplash.com/photo-1542296332-2e4473faf563?auto=format&fit=crop&q=80&w=2000",className:"w-full h-full object-cover opacity-40 scale-",style:{filter:"brightness(0.7) contrast(1.2) saturate(0.8) blur(1px)"},children:r.jsx("source",{src:"https://assets.mixkit.co/videos/preview/mixkit-night-city-traffic-in-a-time-lapse-4444-large.mp4",type:"video/mp4"})}),r.jsx("div",{className:"absolute inset-0 z-[1] pointer-events-none opacity-20 bg-[url('https://www.transparenttextures.com/patterns/stardust.png')]"}),r.jsx("div",{className:"absolute inset-0 z-[2] bg-[radial-gradient(circle_at_center,_transparent_0%,_#02040a_120%)]"}),r.jsx("div",{className:"absolute inset-0 z-[2] bg-gradient-to-b from-[#02040a]/80 via-transparent to-[#02040a]"}),r.jsx("div",{className:"absolute top-1/2 left-0 w-full h-[1px] bg-gradient-to-r from-transparent via-blue-500/30 to-transparent blur-[100px] z-[3] animate-pulse"}),r.jsx("div",{className:"absolute top-1/3 right-0 w-full h-[1px] bg-gradient-to-r from-transparent via-orange-500/20 to-transparent blur-[100px] z-[3] animate-pulse",style:{animationDelay:"1s"}})]}),r.jsxs("div",{className:"relative z-10 container mx-auto px-6 flex flex-col items-center text-center -mt-20 md:-mt-32",children:[r.jsx("div",{className:"relative z-20 -mb-40 md:-mb-56",children:r.jsx("img",{src:"/logo.png",alt:"TripDivide Logo",className:"h-[32rem] md:h-[42rem] w-auto object-contain transform hover:scale-105 transition-transform duration-700"})}),r.jsxs("div",{className:"space-y-4 max-w-4xl mb-12 animate-in fade-in slide-in-from-bottom-8 duration-1000 relative z-30",children:[r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-4 backdrop-blur-md",children:[r.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-cyan-400 animate-pulse"}),r.jsx("span",{className:"text-[9px] font-black text-gray-400 uppercase tracking-[0.4em]",children:"Clculo em centavos exatos"})]}),r.jsxs("h1",{className:"text-4xl md:text-6xl font-black text-white uppercase tracking-tighter leading-[1.5] select-none italic px-4 py-3",children:["O racha ",r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-orange-500 via-yellow-400 to-orange-500",children:"perfeito"}),r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-cyan-400 drop-shadow-[0_0_30px_rgba(59,130,246,0.5)]",children:"comea aqui."})]}),r.jsxs("p",{className:"text-gray-400 text-base md:text-lg max-w-2xl mx-auto font-light leading-relaxed tracking-tight mt-6 px-4",children:["Planeje, vote e divida custos da sua viagem em grupo com ",r.jsx("span",{className:"text-white font-bold",children:"preciso absoluta"}),".",r.jsx("span",{className:"block text-xs text-gray-600 mt-3 uppercase font-black tracking-widest",children:"Sem planilhas  Sem confuso"})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6 mb-16",children:[r.jsxs("div",{className:"group relative",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-600 to-cyan-500 rounded-2xl blur-md opacity-40 group-hover:opacity-100 transition duration-500"}),r.jsx(Z,{variant:"primary",className:"relative !px-12 !py-5 !text-xl !rounded-2xl !bg-indigo-600 hover:!bg-indigo-500 transition-all transform hover:scale-105 active:scale-95 font-black uppercase tracking-tight shadow-2xl",onClick:i?a:n,children:i?"Acessar Viagem":"Criar Viagem Agora"})]}),r.jsx(Z,{variant:"outline",className:"!px-10 !py-5 !text-xl !rounded-2xl !border-white/10 hover:!bg-white/5 transition-all text-white/70 font-bold uppercase tracking-tight",onClick:o,children:"Ver como funciona"})]}),r.jsxs("div",{className:"flex flex-col items-center gap-4 border-t border-white/5 pt-8 w-full max-w-xl",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-600 uppercase tracking-[0.5em]",children:"Ideal para grupos de 6 a 20 pessoas"}),r.jsxs("div",{className:"flex gap-8 opacity-30 grayscale hover:grayscale-0 transition-all duration-500",children:[r.jsx("span",{className:"text-xs font-black text-white",children:"ORLANDO 2026"}),r.jsx("span",{className:"text-xs font-black text-white",children:"EUROTRIP"}),r.jsx("span",{className:"text-xs font-black text-white",children:"MIAMI NIGHTS"})]})]})]}),r.jsx("div",{className:"absolute inset-0 pointer-events-none shadow-[inset_0_0_150px_rgba(0,0,0,0.9)] z-20"}),r.jsx("div",{className:"absolute bottom-10 left-1/2 -translate-x-1/2 z-30 flex flex-col items-center gap-2",children:r.jsx("div",{className:"w-[1px] h-12 bg-gradient-to-b from-orange-500 to-transparent animate-bounce"})})]})},cb=[{number:"01",title:"Destino e Logstica",benefit:"Organize o calendrio sem esforo.",bullets:["Defina datas e roteiros gerais","Crie segmentos (ex: Orlando vs Miami)"],icon:""},{number:"02",title:"Casais e Viajantes",benefit:"Saiba exatamente quem participa de cada item.",bullets:["Cadastre casais e dependentes","Configure quem dirige ou paga"],icon:""},{number:"03",title:"Cotaes Inteligentes",benefit:"Centralize tudo, do manual ao WhatsApp.",bullets:["Cole textos brutos do WhatsApp","Anexe links e validade de preo"],icon:""},{number:"04",title:"Votao e Consenso",benefit:"Decises democrticas e rpidas.",bullets:["Compare opes lado a lado","Vote e oficialize o vencedor"],icon:""},{number:"05",title:"Fechamento e Acerto",benefit:"Paz financeira com centavos exatos.",bullets:["Gere reembolsos automticos","Acompanhe quem j pagou o qu"],icon:""}],ub=[{icon:"",title:"Centavos Exatos",benefit:"Zero arredondamentos, zero confuso.",bullets:["Algoritmo ajusta resto automaticamente","ltimo pagante recebe o ajuste"]},{icon:"",title:"Import WhatsApp",benefit:"Cole e pronto. Sem digitao manual.",bullets:["Extrai preos e datas automaticamente","Suporta textos brutos de fornecedores"]},{icon:"",title:"Gesto de Fornecedores",benefit:"Saiba com quem est fechando.",bullets:["Avalie reputao e SLA","Marque favoritos e red flags"]},{icon:"",title:"Reembolsos Automticos",benefit:"Quem pagou por quem, calculado.",bullets:["Detecta pagamentos cruzados","Gera lista de transferncias"]},{icon:"",title:"Segmentos de Viagem",benefit:"Nem todos vo a todos os lugares.",bullets:["Divida em etapas (Orlando, Miami)","Racha s quem participa"]},{icon:"",title:"Multi-Moeda",benefit:"Compare mas com mas.",bullets:["Cotaes em USD, BRL ou outras","Converso automtica para comparao"]},{icon:"",title:"Racha Flexvel",benefit:"Divida do seu jeito.",bullets:["Por casal, pessoa ou percentual","Crianas com peso diferenciado"]},{icon:"",title:"Auditoria Completa",benefit:"Transparncia bancria para o grupo.",bullets:["Histrico imutvel de tudo","Rastreie cada votao e pagamento"]}],Qc=()=>r.jsxs("section",{id:"como-funciona",className:"py-32 bg-[#02040a] relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-cover bg-center opacity-40 grayscale-[0.3] animate-slow-zoom",style:{backgroundImage:"url('https://images.unsplash.com/photo-1488646953014-85cb44e25828?auto=format&fit=crop&q=80&w=2000')",filter:"brightness(0.6)"}}),r.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#02040a] via-[#02040a]/70 to-[#02040a]"}),r.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_center,_transparent_0%,_#02040a_100%)]"})]}),r.jsx("div",{className:"absolute top-1/4 -left-20 w-[500px] h-[500px] bg-indigo-600/20 rounded-full blur-[120px] pointer-events-none animate-pulse"}),r.jsx("div",{className:"absolute bottom-1/4 -right-20 w-[500px] h-[500px] bg-cyan-600/20 rounded-full blur-[120px] pointer-events-none animate-pulse",style:{animationDelay:"2s"}}),r.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[r.jsxs("div",{className:"text-center mb-24 space-y-4",children:[r.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-4 backdrop-blur-md",children:r.jsx("span",{className:"text-[9px] font-black text-indigo-400 uppercase tracking-[0.4em]",children:"Metodologia TripDivide"})}),r.jsxs("h2",{className:"text-5xl md:text-7xl font-black text-white uppercase tracking-tighter leading-none italic",children:["Como transformamos ",r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-300 to-gray-600",children:"caos em preciso."})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-6 mb-32",children:cb.map((n,a)=>r.jsxs("div",{className:"group relative",children:[r.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-b from-indigo-500/30 to-transparent rounded-[2.5rem] opacity-0 group-hover:opacity-100 transition duration-500 blur-sm"}),r.jsxs("div",{className:"relative h-full bg-[#05070a]/40 border border-white/10 p-8 rounded-[2.5rem] backdrop-blur-xl flex flex-col hover:bg-white/[0.05] transition-all duration-500",children:[r.jsx("span",{className:"text-5xl font-black text-white/5 mb-6 group-hover:text-indigo-500/20 transition-colors italic",children:n.number}),r.jsx("div",{className:"text-4xl mb-6 transform group-hover:scale-110 transition-transform duration-500",children:n.icon}),r.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2 leading-tight",children:n.title}),r.jsx("p",{className:"text-indigo-400 text-[10px] font-black mb-6 leading-relaxed uppercase tracking-widest",children:n.benefit}),r.jsx("ul",{className:"space-y-3 mt-auto border-t border-white/5 pt-6",children:n.bullets.map((i,o)=>r.jsxs("li",{className:"flex items-start gap-2 text-[11px] text-gray-300 font-medium leading-snug group-hover:text-white transition-colors",children:[r.jsx("span",{className:"text-indigo-500/80 mt-0.5",children:""}),i]},o))})]})]},a))}),r.jsxs("div",{className:"mb-32",children:[r.jsxs("div",{className:"text-center mb-16 space-y-4",children:[r.jsx("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-white/5 border border-white/10 mb-4 backdrop-blur-md",children:r.jsx("span",{className:"text-[9px] font-black text-cyan-400 uppercase tracking-[0.4em]",children:"Funcionalidades Exclusivas"})}),r.jsxs("h2",{className:"text-4xl md:text-6xl font-black text-white uppercase tracking-tighter leading-none italic",children:["Tudo que voc precisa",r.jsx("br",{}),r.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-300 to-gray-600",children:"em um s lugar."})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ub.map((n,a)=>r.jsxs("div",{className:"group relative",children:[r.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-b from-cyan-500/30 to-transparent rounded-[2.5rem] opacity-0 group-hover:opacity-100 transition duration-500 blur-sm"}),r.jsxs("div",{className:"relative h-full bg-[#05070a]/40 border border-white/10 p-8 rounded-[2.5rem] backdrop-blur-xl flex flex-col hover:bg-white/[0.05] transition-all duration-500",children:[r.jsx("div",{className:"text-4xl mb-6 transform group-hover:scale-110 transition-transform duration-500",children:n.icon}),r.jsx("h3",{className:"text-xl font-black text-white uppercase tracking-tight mb-2 leading-tight",children:n.title}),r.jsx("p",{className:"text-cyan-400 text-[10px] font-black mb-6 leading-relaxed uppercase tracking-widest",children:n.benefit}),r.jsx("ul",{className:"space-y-3 mt-auto border-t border-white/5 pt-6",children:n.bullets.map((i,o)=>r.jsxs("li",{className:"flex items-start gap-2 text-[11px] text-gray-300 font-medium leading-snug group-hover:text-white transition-colors",children:[r.jsx("span",{className:"text-cyan-500/80 mt-0.5",children:""}),i]},o))})]})]},a))})]}),r.jsx("div",{className:"max-w-5xl mx-auto",children:r.jsxs("div",{className:"relative group",children:[r.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-indigo-500/20 via-cyan-500/20 to-indigo-500/20 rounded-[4rem] blur-2xl opacity-50"}),r.jsxs("div",{className:"relative bg-[#05070a]/90 border border-white/10 rounded-[4rem] p-10 md:p-16 backdrop-blur-3xl",children:[r.jsx("h3",{className:"text-center text-[10px] font-black text-gray-500 uppercase tracking-[0.5em] mb-16",children:"O diferencial tecnolgico"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-16",children:[r.jsx(Xc,{title:"Centavos Exatos",desc:"Nosso algoritmo ajusta o resto matemtico no ltimo pagante automaticamente. Sem arredondamentos que geram desconforto."}),r.jsx(Xc,{title:"Racha Flexvel",desc:"Divida por casal, por pessoa ou participao customizada. O sistema recalcula tudo em tempo real."}),r.jsx(Xc,{title:"Auditoria SaaS",desc:"Histrico imutvel de cada oramento e pagamento. Transparncia bancria para sua viagem de amigos."})]})]})]})}),r.jsxs("div",{className:"mt-24 flex flex-col items-center gap-10",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[r.jsxs("div",{className:"group relative",children:[r.jsx("div",{className:"absolute -inset-1 bg-indigo-500 rounded-2xl blur opacity-25 group-hover:opacity-60 transition duration-500"}),r.jsx(Z,{variant:"primary",className:"relative !px-16 !py-6 !text-2xl !rounded-2xl !bg-indigo-600 hover:!bg-indigo-500 shadow-[0_25px_50px_rgba(79,70,229,0.3)] font-black uppercase tracking-tight",onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),children:"Comear agora"})]}),r.jsx(Z,{variant:"outline",className:"!px-12 !py-6 !text-2xl !rounded-2xl !border-white/10 hover:!bg-white/5 transition-all text-white font-bold uppercase tracking-tight backdrop-blur-md",children:"Importar WhatsApp "})]}),r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("p",{className:"text-[10px] font-black text-gray-700 uppercase tracking-[0.5em]",children:"Segurana ponta-a-ponta  Sem anncios"}),r.jsx("div",{className:"w-12 h-[1px] bg-gradient-to-r from-transparent via-gray-800 to-transparent"})]})]})]}),r.jsx("style",{children:`
        @keyframes slow-zoom {
          0% { transform: scale(1); }
          100% { transform: scale(1.15); }
        }
        .animate-slow-zoom {
          animation: slow-zoom 30s linear infinite alternate;
        }
      `})]}),Xc=({title:n,desc:a})=>r.jsxs("div",{className:"text-center md:text-left space-y-6 group",children:[r.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-500/10 border border-indigo-500/20 flex items-center justify-center text-indigo-400 mx-auto md:mx-0 group-hover:bg-indigo-500 group-hover:text-white transition-all duration-500 shadow-xl",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("h4",{className:"text-xl font-black text-white uppercase tracking-tight italic",children:n}),r.jsx("p",{className:"text-sm text-gray-500 font-medium leading-relaxed group-hover:text-gray-400 transition-colors",children:a})]})]}),il=({onClose:n,onSave:a})=>{const[i,o]=H.useState(1),[u,h]=H.useState({name:"",startDate:"",endDate:"",destinations:[],baseCurrency:"BRL",defaultExchangeRate:1,defaultSplitRule:"equal",consensusRule:"2/3",categories:["Voo","Hospedagem","Aluguel de Carro","Restaurantes","Diversos"]}),[f,m]=H.useState(""),[g,x]=H.useState(!1),v=()=>{f.trim()&&(h({...u,destinations:[...u.destinations,f.trim()]}),m(""))},w=O=>{h({...u,destinations:u.destinations.filter((D,z)=>z!==O)})},j=()=>{i<3&&o(i+1)},_=()=>{i>1&&o(i-1)},y=async()=>{x(!0);try{await a(u)}catch(O){console.error("Erro ao salvar viagem:",O)}finally{x(!1)}},N=()=>i===1?u.name.trim()&&u.startDate&&u.endDate:i===2?u.destinations.length>0:!0;return r.jsx(ia,{onClose:n,size:"lg",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Nova Viagem"}),r.jsx("div",{className:"flex items-center gap-2 mt-4",children:[1,2,3].map(O=>r.jsx("div",{className:"flex items-center flex-1",children:r.jsx("div",{className:`h-1 flex-1 rounded ${O<=i?"bg-indigo-600":"bg-gray-800"}`})},O))}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Passo ",i," de 3: ",i===1?"Informaes Bsicas":i===2?"Destinos":"Configuraes"]})]}),i===1&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Nome da Viagem"}),r.jsx("input",{type:"text",value:u.name,onChange:O=>h({...u,name:O.target.value}),placeholder:"Ex: Frias em Paris",className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none",autoFocus:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Data de Ida"}),r.jsx("input",{type:"date",value:u.startDate,onChange:O=>h({...u,startDate:O.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Data de Volta"}),r.jsx("input",{type:"date",value:u.endDate,onChange:O=>h({...u,endDate:O.target.value}),min:u.startDate,className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none"})]})]})]}),i===2&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Adicionar Destino"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("input",{type:"text",value:f,onChange:O=>m(O.target.value),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),v())},placeholder:"Ex: Paris, Londres, Roma",className:"flex-1 px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none",autoFocus:!0}),r.jsx(Z,{onClick:v,className:"bg-indigo-600 hover:bg-indigo-700",children:r.jsx(bt.Plus,{className:"w-4 h-4"})})]})]}),u.destinations.length>0&&r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400",children:"Destinos Adicionados"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:u.destinations.map((O,D)=>r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-600/20 border border-indigo-600/30 rounded-lg",children:[r.jsx("span",{className:"text-sm text-white",children:O}),r.jsx("button",{onClick:()=>w(D),className:"text-indigo-400 hover:text-indigo-300",children:r.jsx(bt.X,{className:"w-3 h-3"})})]},D))})]})]}),i===3&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Moeda Base"}),r.jsxs("select",{value:u.baseCurrency,onChange:O=>h({...u,baseCurrency:O.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"BRL",children:"BRL (Real)"}),r.jsx("option",{value:"USD",children:"USD (Dlar)"}),r.jsx("option",{value:"EUR",children:"EUR (Euro)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Taxa de Cmbio Padro"}),r.jsx("input",{type:"number",step:"0.01",value:u.defaultExchangeRate,onChange:O=>h({...u,defaultExchangeRate:parseFloat(O.target.value)||1}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Regra Padro de Diviso"}),r.jsxs("select",{value:u.defaultSplitRule,onChange:O=>h({...u,defaultSplitRule:O.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"equal",children:"Dividir Igualmente"}),r.jsx("option",{value:"percent",children:"Por Percentual"}),r.jsx("option",{value:"per_person",children:"Por Pessoa"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-bold text-gray-400 mb-2",children:"Regra de Consenso"}),r.jsxs("select",{value:u.consensusRule,onChange:O=>h({...u,consensusRule:O.target.value}),className:"w-full px-4 py-2 bg-gray-900 border border-gray-800 rounded-lg text-white focus:border-indigo-600 focus:outline-none",children:[r.jsx("option",{value:"2/3",children:"2/3 dos votos"}),r.jsx("option",{value:"3/3",children:"Unanimidade"})]})]})]}),r.jsxs("div",{className:"flex gap-3 justify-between mt-6 pt-6 border-t border-gray-800",children:[r.jsx(Z,{onClick:n,className:"bg-gray-800 hover:bg-gray-700",children:"Cancelar"}),r.jsxs("div",{className:"flex gap-3",children:[i>1&&r.jsx(Z,{onClick:_,className:"bg-gray-800 hover:bg-gray-700",children:"Voltar"}),i<3?r.jsx(Z,{onClick:j,disabled:!N(),className:"bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Prximo"}):r.jsx(Z,{onClick:y,disabled:g||!N(),className:"bg-green-600 hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed",children:g?"Salvando...":"Criar Viagem"})]})]})]})})},db=({onNavigateToTrip:n,onRefresh:a})=>{const[i,o]=H.useState([]),[u,h]=H.useState([]),[f,m]=H.useState(!0),[g,x]=H.useState(!1),[v,w]=H.useState(null),j=async()=>{m(!0);try{const U=await Ke.getTrips();o(U.filter(E=>E.status==="active"||E.status==="archived")),h(U.filter(E=>E.status==="draft"))}catch(U){console.error("Erro ao carregar viagens:",U)}finally{m(!1)}};H.useEffect(()=>{j()},[]);const _=async U=>{try{await Ke.duplicateTrip(U),await j(),a()}catch(E){console.error("Erro ao duplicar viagem:",E)}},y=async U=>{try{await Ke.archiveTrip(U),await j(),a()}catch(E){console.error("Erro ao arquivar viagem:",E)}},N=async U=>{try{await Ke.deleteTrip(U),w(null),await j(),a()}catch(E){console.error("Erro ao excluir viagem:",E)}},O=async U=>{try{await Ke.setActiveTrip(U),n(U),a()}catch(E){console.error("Erro ao definir viagem ativa:",E)}},D=U=>U?new Date(U).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}):"",z=(U,E)=>{if(!U||!E)return"";const G=new Date(U),W=new Date(E);return`${Math.ceil((W.getTime()-G.getTime())/(1e3*60*60*24))} dias`};return f?r.jsx("div",{className:"text-center py-12 text-gray-500",children:"Carregando viagens..."}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-black text-white uppercase tracking-tight",children:"Minhas Viagens"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Gerencie todas as suas viagens"})]}),r.jsxs(Z,{onClick:()=>x(!0),className:"bg-indigo-600 hover:bg-indigo-700",children:[r.jsx(bt.Plus,{className:"w-4 h-4 mr-2"}),"Nova Viagem"]})]}),u.length>0&&r.jsxs("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Rascunhos"}),r.jsx("div",{className:"grid gap-3",children:u.map(U=>r.jsx("div",{className:"bg-gray-900 border border-yellow-600/30 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:U.name||"Viagem sem nome"}),r.jsx("span",{className:"px-2 py-0.5 bg-yellow-600/20 text-yellow-400 text-xs font-bold rounded",children:"RASCUNHO"})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Criado em ",D(U.created_at)]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{onClick:()=>n(U.id),className:"bg-yellow-600 hover:bg-yellow-700 text-xs",children:"Finalizar"}),r.jsx(Z,{onClick:()=>w(U.id),className:"bg-red-600/20 hover:bg-red-600/30 text-red-400 text-xs",children:"Descartar"})]})]})},U.id))})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h2",{className:"text-sm font-bold text-gray-400 uppercase tracking-wider",children:"Viagens"}),i.length===0?r.jsxs("div",{className:"text-center py-12 bg-gray-900 rounded-xl border border-gray-800",children:[r.jsx(bt.Travelers,{className:"w-12 h-12 text-gray-700 mx-auto mb-3"}),r.jsx("p",{className:"text-gray-500",children:"Nenhuma viagem criada ainda"}),r.jsx(Z,{onClick:()=>x(!0),className:"mt-4 bg-indigo-600 hover:bg-indigo-700",children:"Criar primeira viagem"})]}):r.jsx("div",{className:"grid gap-3",children:i.map(U=>r.jsx("div",{className:`bg-gray-900 border rounded-xl p-4 ${U.status==="archived"?"border-gray-800 opacity-60":"border-gray-800 hover:border-indigo-600/50"} transition-all`,children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:U.name}),U.status==="archived"&&r.jsx("span",{className:"px-2 py-0.5 bg-gray-700 text-gray-400 text-xs font-bold rounded",children:"ARQUIVADA"})]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[r.jsxs("span",{children:[D(U.start_date)," - ",D(U.end_date)]}),r.jsx("span",{children:""}),r.jsx("span",{children:z(U.start_date,U.end_date)}),U.destinations&&U.destinations.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:""}),r.jsx("span",{children:U.destinations.join(", ")})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(Z,{onClick:()=>O(U.id),className:"bg-indigo-600 hover:bg-indigo-700 text-xs",children:"Abrir"}),r.jsx(Z,{onClick:()=>_(U.id),className:"bg-gray-800 hover:bg-gray-700 text-xs",children:"Duplicar"}),U.status==="active"?r.jsx(Z,{onClick:()=>y(U.id),className:"bg-gray-800 hover:bg-gray-700 text-xs",children:"Arquivar"}):r.jsx(Z,{onClick:()=>w(U.id),className:"bg-red-600/20 hover:bg-red-600/30 text-red-400 text-xs",children:"Excluir"})]})]})},U.id))})]}),g&&r.jsx(il,{onClose:()=>x(!1),onSave:async U=>{const E=await Ke.saveTrip(U);x(!1),await Ke.setActiveTrip(E.id),n(E.id),a()}}),v&&r.jsx(ia,{onClose:()=>w(null),children:r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Confirmar Excluso"}),r.jsx("p",{className:"text-gray-400 mb-6",children:"Tem certeza que deseja excluir esta viagem? Esta ao no pode ser desfeita."}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx(Z,{onClick:()=>w(null),className:"bg-gray-800 hover:bg-gray-700",children:"Cancelar"}),r.jsx(Z,{onClick:()=>N(v),className:"bg-red-600 hover:bg-red-700",children:"Excluir"})]})]})})]})},hb=()=>{const[n,a]=H.useState(null),[i,o]=H.useState(!0),[u,h]=H.useState({type:"dashboard"}),[f,m]=H.useState(null),[g,x]=H.useState(null),[v,w]=H.useState(!0),[j,_]=H.useState(!1),[y,N]=H.useState("login"),[O,D]=H.useState([]),[z,U]=H.useState([]),[E,G]=H.useState([]),[W,K]=H.useState(!0);H.useEffect(()=>{ee.auth.getSession().then(({data:{session:q}})=>{a((q==null?void 0:q.user)??null),o(!1)});const{data:{subscription:be}}=ee.auth.onAuthStateChange((q,S)=>{a((S==null?void 0:S.user)??null)});return()=>be.unsubscribe()},[]);const R=async be=>{if(n){w(!0);try{let q=be;if(q||(q=await Ke.getActiveTrip()),!q){const F=(await Ke.getTrips()).filter(se=>se.status==="active");F.length>0&&(q=F[0].id,await Ke.setActiveTrip(q))}if(q){x(q);const S=await Ke.getTripById(q),[F,se,pe,A,T]=await Promise.all([oe.getCouples(q),oe.getSegments(q),oe.getVendors(q),oe.getQuotes(q),oe.getExpenses(q)]),Q=await oe.getTravelers(q),B=F.map(ue=>({id:ue.id,name:ue.name,members:Q.filter(je=>je.couple_id===ue.id).map(je=>({id:je.id,name:je.full_name,isChild:je.type!=="Adulto"}))})),te=se.map(ue=>({id:ue.id,name:ue.name,startDate:ue.start_date,endDate:ue.end_date})),ie={id:S.id,name:S.name,startDate:S.start_date,endDate:S.end_date,consensusRule:S.consensus_rule,categories:S.categories,couples:B,segments:te.length>0?te:[{id:"seg-all",name:"Geral",startDate:"",endDate:""}]};m(ie),D(pe),U(A),G(T)}else m(null),x(null)}catch(q){console.error("Erro ao carregar dados:",q)}finally{w(!1)}}};if(H.useEffect(()=>{n&&R()},[n]),i)return r.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center text-gray-500 animate-pulse font-black uppercase tracking-widest italic",children:"Carregando..."});const ae=async()=>{if(!n){N("signup"),K(!1);return}_(!0)},de=async be=>{await R(be),h({type:"dashboard"})},ke=()=>{_(!0)};if(!n)return W?r.jsx(r.Fragment,{children:r.jsxs("main",{className:"bg-[#02040a]",children:[r.jsx(Kc,{onCreateTrip:ae,hasTrip:!1,onEnter:()=>K(!1)}),r.jsx(Qc,{})]})}):r.jsx(zv,{onSuccess:()=>o(!1),initialMode:y});if(v)return r.jsx("div",{className:"min-h-screen bg-gray-950 flex items-center justify-center text-gray-500 animate-pulse font-black uppercase tracking-widest italic",children:"Iniciando TripDivide..."});if(W)return r.jsxs(r.Fragment,{children:[r.jsxs("main",{className:"bg-[#02040a]",children:[r.jsx(Kc,{onCreateTrip:ae,hasTrip:!!f,onEnter:()=>K(!1)}),r.jsx(Qc,{})]}),j&&r.jsx(il,{onClose:()=>_(!1),onSave:async be=>{const q=await Ke.saveTrip(be);await oe.saveSegment({tripId:q.id,name:"Geral",startDate:"",endDate:""}),_(!1),K(!1),await R(q.id),h({type:"dashboard"})}})]});if(!f)return r.jsxs(r.Fragment,{children:[r.jsxs("main",{className:"bg-[#02040a]",children:[r.jsx(Kc,{onCreateTrip:ae,hasTrip:!1}),r.jsx(Qc,{})]}),j&&r.jsx(il,{onClose:()=>_(!1),onSave:async be=>{const q=await Ke.saveTrip(be);await oe.saveSegment({tripId:q.id,name:"Geral",startDate:"",endDate:""}),_(!1),K(!1),await R(q.id),h({type:"dashboard"})}})]});const ge=be=>h({type:be}),qe=()=>{var be;switch(u.type){case"dashboard":return r.jsx(Jm,{trip:f,quotes:z,expenses:E,onNavigate:ge,onRefresh:R});case"trips":return r.jsx(db,{onNavigateToTrip:de,onRefresh:R});case"travelers":return r.jsx(Fv,{trip:f,onRefresh:R,onNavigateToDetail:q=>h({type:"traveler-detail",id:q})});case"traveler-detail":return r.jsx(sb,{trip:f,travelerId:u.id,onBack:()=>h({type:"travelers"}),onRefresh:R});case"vendors":return r.jsx(Lv,{trip:f,onRefresh:R,onNavigateToVendor:q=>h({type:"vendor-detail",id:q}),onNavigateToWizard:()=>h({type:"vendor-edit"})});case"vendor-detail":{const q=O.find(S=>S.id===u.id);return q?r.jsx(rb,{trip:f,vendor:q,onBack:()=>h({type:"vendors"}),onEdit:()=>h({type:"vendor-edit",id:q.id}),onRefresh:R,onNavigateToQuote:S=>h({type:"quote-detail",id:S}),onCreateQuote:()=>h({type:"quote-edit",prefillVendorId:q.id})}):null}case"vendor-edit":{const q=O.find(S=>S.id===u.id);return r.jsx(lb,{trip:f,initialData:q||{},onCancel:()=>h({type:"vendors"}),onSave:async S=>{await oe.saveVendor(S),R(),h({type:"vendors"})}})}case"quotes":return r.jsx(Iv,{trip:f,vendors:O,quotes:z,onRefresh:R,onNavigateToQuote:q=>h({type:"quote-detail",id:q}),onNavigateToWizard:q=>h({type:"quote-edit",initialData:q}),onNavigateToCompare:q=>h({type:"quote-compare",ids:q})});case"quote-detail":{const q=z.find(S=>S.id===u.id);return q?r.jsx(nb,{trip:f,quote:q,vendor:O.find(S=>S.id===q.vendorId),onBack:()=>h({type:"quotes"}),onEdit:()=>h({type:"quote-edit",id:q.id}),onRefresh:R,onNavigateToExpense:async()=>{const S=await oe.closeQuoteToExpense(f.id,q.id);S&&(await R(),h({type:"expense-detail",id:S.id}))},onNavigateToQuote:S=>h({type:"quote-detail",id:S})}):null}case"quote-compare":{const q=z.filter(S=>u.ids.includes(S.id));return r.jsx(ob,{trip:f,quotes:q,onBack:()=>h({type:"quotes"}),onRefresh:R,onNavigateToQuote:S=>h({type:"quote-detail",id:S})})}case"quote-edit":{const q=z.find(F=>F.id===u.id),S=u.initialData||(u.prefillVendorId?{vendorId:u.prefillVendorId,provider:(be=O.find(F=>F.id===u.prefillVendorId))==null?void 0:be.name}:{});return r.jsx(ib,{trip:f,vendors:O,initialData:q||S,onCancel:()=>h({type:"quotes"}),onSave:async F=>{await oe.saveQuote(F),R(),h({type:"quotes"})}})}case"expenses":return r.jsx(Gv,{trip:f,expenses:E,onRefresh:R,onNavigateToExpense:q=>h({type:"expense-detail",id:q})});case"expense-detail":{const q=E.find(S=>S.id===u.id);return q?r.jsx(Qv,{trip:f,expense:q,onBack:()=>h({type:"expenses"}),onRefresh:R}):null}case"payments":return r.jsx(Xv,{trip:f});case"settlement":return r.jsx(Jv,{trip:f});default:return r.jsx(Jm,{trip:f,quotes:z,expenses:E,onNavigate:ge,onRefresh:R})}};return r.jsxs(Bv,{activeTab:u.type.split("-")[0],setActiveTab:ge,tripId:g,tripName:(f==null?void 0:f.name)||"Sem viagem",userEmail:n==null?void 0:n.email,onTripChange:de,onCreateTrip:ke,children:[qe(),j&&r.jsx(il,{onClose:()=>_(!1),onSave:async be=>{const q=await Ke.saveTrip(be);await oe.saveSegment({tripId:q.id,name:"Geral",startDate:"",endDate:""}),_(!1),K(!1),await R(q.id),h({type:"dashboard"})}})]})},bg=document.getElementById("root");if(!bg)throw new Error("Could not find root element to mount to");const fb=ey.createRoot(bg);fb.render(r.jsx(jn.StrictMode,{children:r.jsx(hb,{})}));
